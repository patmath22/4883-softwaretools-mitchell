(self.webpackChunksmart_tag=self.webpackChunksmart_tag||[]).push([[695],{1871:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ajax=_interopRequireDefault(__webpack_require__(9974)),_logger=(__webpack_require__(2481),_interopRequireDefault(__webpack_require__(5754))),Segmentation={init:function(){var _bouncex$state,vc=bouncex.getBounceVisitCookie(),c=bouncex.getBounceCookie();if(bouncex.segments=bouncex.segments||[],null!==(_bouncex$state=bouncex.state)&&void 0!==_bouncex$state&&_bouncex$state.gdpr)Segmentation.clearSegments();else{var overrideSegments=bouncex.calling_url.match(/wkseg(\d+)/g);if(overrideSegments)bouncex.segments=overrideSegments.map((function(item){return parseInt(item.replace("wkseg",""))}));else if(c.softID){if("string"==typeof vc)try{vc=JSON.parse(vc)}catch(ex){_logger.default.error("could not parse visit cookie for segments")}vc&&vc.seg?bouncex.segments=vc.seg:Segmentation.downloadSegments(c.softID),bouncex.segments=bouncex.segments.filter((function(value,index,self){return self.indexOf(value)===index}))}}},downloadSegments:function(softID){var url="https://dfp.bouncex.net/pub/v2/segment/".concat(softID);_ajax.default.get({url,error:function(){Segmentation.clearSegments()},success:function(data){var segments=data;if("string"==typeof segments)try{segments=JSON.parse(segments)}catch(ex){_logger.default.error("segments service response was invalid JSON"),segments=[]}bouncex.updateBounceVisitCookie({seg:segments}),bouncex.segments=segments}})},clearSegments:function(){bouncex.updateBounceVisitCookie({seg:[]}),bouncex.segments=[]}},_default=Segmentation;exports.default=_default},8660:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_framewatcher=_interopRequireDefault(__webpack_require__(8772)),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3036)),_ssp2=__webpack_require__(2514),_ssp3=__webpack_require__(5432),_ssp4=__webpack_require__(7392),_ssp5=__webpack_require__(2889),_ssp6=__webpack_require__(2678),_ssp7=__webpack_require__(9032),_auction_handler=_interopRequireDefault(__webpack_require__(5390)),_helpers=_interopRequireDefault(__webpack_require__(1618)),_identityhub=_interopRequireDefault(__webpack_require__(1634)),_moat=_interopRequireDefault(__webpack_require__(9152)),_ias=_interopRequireDefault(__webpack_require__(8066)),_helpers2=__webpack_require__(2481),_helpers3=_interopRequireDefault(__webpack_require__(2501)),_preload=__webpack_require__(1418),_browser=_interopRequireDefault(__webpack_require__(8646)),_scheduling=__webpack_require__(1915),_eventListeners=_interopRequireDefault(__webpack_require__(4172)),_eventJsEval=__webpack_require__(1964),_campaignHelpers=_interopRequireDefault(__webpack_require__(2261)),_calloutTarget=_interopRequireDefault(__webpack_require__(9446)),_siteElement=__webpack_require__(4554),_report=__webpack_require__(1555),_images=__webpack_require__(8309),_logger=_interopRequireDefault(__webpack_require__(5754)),_accessibility=_interopRequireDefault(__webpack_require__(6105)),_prestructure=_interopRequireDefault(__webpack_require__(8723)),_bid_filters=_interopRequireDefault(__webpack_require__(6950)),_helpers4=__webpack_require__(6487),_contextual=_interopRequireDefault(__webpack_require__(3723)),_macros=__webpack_require__(7352),_displayAd=__webpack_require__(7504),_clientHints=_interopRequireDefault(__webpack_require__(4675));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var BehavioralAds={init:function(){_campaignHelpers.default.gbi2Enabled()&&(BehavioralAds.syncUsers(),_identityhub.default.injectIntoPage(),_contextual.default.supportsContextual()&&_contextual.default.Fetch(),_clientHints.default.setHighEntropyValues())},_activateBehavioralTriggers:function(campaignId){_campaignHelpers.default.activateInstruments(campaignId)},_activateCampaign:function(campaignId){this.log(campaignId,"activating campaign");var campaign=bouncex.campaigns[campaignId];campaign.prestructured=!1,campaign.gbi.ready=!0,campaign.gbi.hasActivatedOnce||((0,_eventJsEval.event_js_eval)(campaignId,"activation"),campaign.dispatchEvent("activation.bx"),campaign.gbi.hasActivatedOnce=!0),campaign.triggerUponActivation&&_campaignHelpers.default.triggerAd(campaign.triggerUponActivation,campaignId,{},!1)},_activateCreative:function(campaignId,creativeId){this.log(campaignId,"activating creative");var campaign=bouncex.campaigns[campaignId],creative=bouncex.creatives[creativeId],substitutionPattern=/{bpcid}/g;if(campaign.html=creative.html.replace(substitutionPattern,campaignId),campaign.styles=creative.styles.replace(substitutionPattern,campaignId),!_calloutTarget.default.setCalloutTarget(campaign))return bouncex.ads.error(campaignId,"no anchor found"),void this._failCampaign(campaignId);_campaignHelpers.default.placeCampaign(campaignId),_campaignHelpers.default.assignDomReferencesToCampaign(campaignId),_campaignHelpers.default.cacheCreativeForm(campaignId,1),_accessibility.default.setProperties(campaignId),_campaignHelpers.default.setTransitionEffect(campaignId),this.applySSPAttributes(campaignId),this.applySSPStyles(campaignId),_campaignHelpers.default.applyCampaignStyles(campaignId),campaign.supportsPrestructure&&_prestructure.default.initPrestructure(campaign)},applySSPAttributes:function(campaignId){var campaign=bouncex.campaigns[campaignId];campaign.winningBid&&campaign.obj1&&(campaign.obj1.attr("data-ssp",campaign.winningBid.provider),campaign.winningBid.isMultiPanel&&campaign.obj1.attr("data-multipanel",""))},applySSPStyles:function(campaignId){var _campaign$winningBid,campaign=bouncex.campaigns[campaignId];campaign.styles+=(0,_helpers4.getSSPStyles)(null===(_campaign$winningBid=campaign.winningBid)||void 0===_campaign$winningBid?void 0:_campaign$winningBid.provider)},_activatePlacement:function(campaignId,winningBid){var campaign=bouncex.campaigns[campaignId],placementId=winningBid.placementId,placement=campaign.gbi.placements[placementId],self=this;if(this.log(campaignId,"activating placement #".concat(placementId," (").concat(placement.mediaType,")")),campaign.winningBid=winningBid,campaign.activePlacementId=placementId,campaign.activeAdUnitId=placement.adUnitId,this._activateCreative(campaignId,placement.creativeId),bouncex.recirc.populateCreative(campaignId),"display"==placement.mediaType){var preloadEnabledForSSP=-1!==_ssp.default.PRELOAD_PROVIDERS.indexOf(winningBid.provider),preloadEnabledForSite=_ssp.default.PRELOAD_ENABLED,prerenderEnabledForSite=_ssp.default.PRERENDER_ENABLED,customSettings={};campaign.onImpression=function(onReady){self._populateDisplayAd(campaignId,_objectSpread({trigger:campaign.trigger,content:winningBid.adHtml,width:placement.width,height:placement.height,deployment:placement.deployment,onReady,mode:"default"},customSettings))},this._activateCampaign(campaignId),(0,_preload.preconnect)(winningBid.adHtml),preloadEnabledForSSP&&prerenderEnabledForSite&&!campaign.dynamic_anchor?setTimeout(this._populateDisplayAd.bind(this),0,campaignId,_objectSpread(_objectSpread({content:winningBid.adHtml,width:placement.width,height:placement.height,deployment:placement.deployment},customSettings),{},{mode:"prerenderOnly"})):preloadEnabledForSSP&&preloadEnabledForSite&&setTimeout(campaign.preloadDisplayAd.bind(campaign,winningBid.adHtml),0)}else if("video"==placement.mediaType){var videoSettings={vast:winningBid.vastData,width:placement.width,height:placement.height},bxVideoPlayer=campaign.obj1.find('video[id*="bx-video-player"]');bxVideoPlayer&&bxVideoPlayer.length>0?(campaign.gbi.isVideo=!0,bouncex.video.init(campaignId,videoSettings.vast,winningBid.provider,placement)):this._prepareVideo(campaignId,videoSettings,(function(){self._activateCampaign(campaignId)})),(0,_preload.preconnect)(winningBid.vastData)}},_adjustPosition:function(campaignId){var deployment=this._getDeploymentType(campaignId),campaign=bouncex.campaigns[campaignId];if("masthead"===deployment&&!campaign.preventAdjustPosition){var scrollDelta=this._getScrollPosition(campaign);bouncex.window.scrollTop(scrollDelta)}"masthead"===deployment&&campaign.preventAdjustPosition&&_logger.default.debug({group:"Ads",campaignId,message:"Adjust position on impression prevented by bouncex.preventAdjustPositionOnImpression"})},_getScrollPosition:function(campaign){var campaignDimensions=campaign.obj1[0].getBoundingClientRect(),siblingDimensions=this._getStickySiblingDimensions(campaign.obj1[0]);return!!siblingDimensions&&siblingDimensions.top<campaignDimensions.height?Math.max(campaignDimensions.top-siblingDimensions.height,0):campaignDimensions.top},_getStickySiblingDimensions:function(campaignElement){return campaignElement.previousElementSibling&&"sticky"===(0,_helpers2.getCssAttribute)(campaignElement.previousElementSibling,"position")?campaignElement.previousElementSibling.getBoundingClientRect():campaignElement.nextElementSibling&&"sticky"===(0,_helpers2.getCssAttribute)(campaignElement.nextElementSibling,"position")?campaignElement.nextElementSibling.getBoundingClientRect():void 0},_allRequestsAreComplete:function(campaignId){var requests=bouncex.campaigns[campaignId].gbi.requests;if(!requests)return!1;for(var i=0;i<requests.length;i++)if(!requests[i].endTime)return!1;return!0},_attachClickReporting:function(campaignId,container){bouncex.on(container,"mouseenter.gbi_click_events_"+campaignId,(function(){bouncex.on(bouncex.window,"blur.gbi_click_events_"+campaignId,(function(){bouncex.report(campaignId,"click",{value:"ad"})}))})),bouncex.events[campaignId].gbi_click=function(){bouncex.off(bouncex.window,"blur.gbi_click_events_"+campaignId)},bouncex.on(container,"mouseleave.gbi_click_events_"+campaignId,bouncex.events[campaignId].gbi_click)},_compose:function(){var args=Array.prototype.slice.call(arguments),obj={};return args.forEach((function(argObj){for(var key in argObj)argObj.hasOwnProperty(key)&&(obj[key]=argObj[key])})),obj},_constants:{auctionDelayInMilliseconds:2e3,defaultReloadDelayInMilliseconds:3e5,bidEvents:{fill:"bid_fill",none:"bid_none",empty:"bid_empty",error:"bid_error",cancelled:"bid_cancel",selected:"bid_selected"},targetSelector:".bx-group-placeholder:eq(0)",mobileFullWidthMinRatio:.85},auctionHandler:null,_createAndSendAuction:function(){if(null===this.auctionHandler){var settings={auctionCheckpoint:this._constants.auctionDelayInMilliseconds,auctionTimeout:2*this._constants.auctionDelayInMilliseconds};this.auctionHandler=new _auction_handler.default(settings)}return this.auctionHandler.getOrCreateAuction()},_createAndSendRequests:function(campaignId,placements){var _this=this;this.log(campaignId,"sending bid requests");var requests=[],_loop=function(placementId){if(placements.hasOwnProperty(placementId)){var placement=placements[placementId];placement.providers.forEach(function(provider){var request=this._createBidRequest(provider,{campaignId,placementId,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat});requests.push(request),request.init()}.bind(_this))}};for(var placementId in placements)_loop(placementId);return requests},_createBid:function(settings){return{provider:settings.provider,campaignId:settings.campaignId,placementId:settings.placementId,adUnitId:settings.adUnitId,price:settings.price,adHtml:settings.adHtml,vastData:settings.vastData,dealId:settings.dealId,dealName:settings.dealName,arrivalTime:settings.arrivalTime||Date.now(),targeting:settings.targeting}},_createBidRequest:function(provider,settings){return this._requestIndex[provider](settings)},_createDisplayFrame:function(content){return _campaignHelpers.default.createIframe({target:"_blank",class:"bx-gbi-frame",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",width:"100%",height:"100%",vspace:"0",hspace:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowTransparency:"true",srcdoc:content})},_customizations:{anchor:{updateDynamicAnchor:function(campaignId){var campaign=bouncex.campaigns[campaignId];if(campaign.dynamic_anchor&&!campaign.gbi.contentLoaded){var selector=(0,_siteElement.parseSiteElementSelector)(campaign.callout_t),bidDimensions=this._getBidDimensions(campaign);campaign.visibleAnchors=_browser.default.viewport.getVisibleElements(selector,{domPlacementMethod:campaign.dom_placement_method,height:bidDimensions.height,width:bidDimensions.width,voffset:campaign.callout_voffset,visibilityThreshold:campaign.visibilityThreshold}),campaign.visibleAnchors.length>0&&(_calloutTarget.default.setCampaignCalloutTargetToIndex(campaign,campaign.visibleAnchors[0].index),_campaignHelpers.default.placeCampaign(campaignId))}},passesViewabilityTest:function(campaignId){var campaign=bouncex.campaigns[campaignId],minimumHeight=this._getMinimumHeight(campaign)||250;return _browser.default.viewport.distanceToBottom(campaign.calloutTarget[0],campaign.dom_placement_method,campaign.callout_voffset)>minimumHeight},_getMinimumHeight:function(campaign){var bidDimensions=this._getBidDimensions(campaign);return("prepend"===campaign.dom_placement_method||"append"===campaign.dom_placement_method?campaign.calloutTarget.innerWidth():campaign.calloutTarget.parent().innerWidth())*(bidDimensions.height/bidDimensions.width)/2},_getBidDimensions:function(campaign){var placementId=campaign.winningBid?campaign.winningBid.placementId:Object.keys(campaign.gbi.placements)[0],bidPlacement=campaign.gbi.placements[placementId];return{height:Number(bidPlacement.height),width:Number(bidPlacement.width)}}}},_deactivateCampaign:function(campaignId,callback){this.log(campaignId,"deactivating campaign");var campaign=bouncex.campaigns[campaignId];return _campaignHelpers.default.deactivate_campaign(campaign,callback)},_restartCampaign:function(campaignId){var _initCampaign=this.initCampaign.bind(this,campaignId);this._deactivateCampaign(campaignId,_initCampaign)},_endAllRequests:function(campaignId){var campaign=bouncex.campaigns[campaignId];campaign&&campaign.gbi&&campaign.gbi.requests&&bouncex.campaigns[campaignId].gbi.requests.forEach((function(request){(!request.campaigns||Object.keys(request.campaigns).length<=1)&&request.end()}))},_exceedsFrequencyCap:function(){var config=bouncex.website.adsConfig;if(!config)return!1;if(!config.freqCapEnabled)return!1;if(!config.freqCapImpressions)return!1;switch(config.freqCapInterval){case"pageview":return this._pageImpressions>=config.freqCapImpressions;case"visit":return bouncex.visit_cookie.pci>=config.freqCapImpressions}return!1},_failCampaign:function(campaignId){var campaign=bouncex.campaigns[campaignId];if(campaign.failed)return!1;bouncex.close_ad(campaignId,!0),this.log(campaignId,"campaign failed");var deployment=this._getDeploymentType(campaignId);return this._failedDeployments.push(deployment),campaign.failed=!0,campaign.gbi.ready=!1,!1},_failedDeployments:[],_getAdUnitIds:function(campaignId){var campaign=bouncex.campaigns[campaignId],placements=campaign.gbi&&campaign.gbi.placements;return Object.keys(placements).map((function(key){return placements[key].adUnitId}))},_getDeploymentType:function(campaignId){var campaign=bouncex.campaigns[campaignId],placements=campaign.gbi&&campaign.gbi.placements;if(placements)for(var placementId in placements)if(placements.hasOwnProperty(placementId))return placements[placementId].deployment;return""},_getProviderConfig:function(provider,key){var sspConfig=bouncex.website.sspConfig;return sspConfig&&sspConfig[provider]&&sspConfig[provider][key]},_getReportablePrice:function(price){return Number(price).toFixed(5)},_getResizeData:function(campaignId,adDimensions){adDimensions.width=Number(adDimensions.width),adDimensions.height=Number(adDimensions.height);var campaign=bouncex.campaigns[campaignId],$creative=campaign.obj1,scaleRatio=1,extraPadding=2*((parseInt($creative.find(".bx-wrap").css("padding-left"),10)||0)+(parseInt($creative.find(".bx-align").css("padding-left"),10)||0)),wndsize=bouncex.wndsize(),marginForFullWidthDisplay=0;if("agilityzone"===campaign.type&&campaign.calloutTarget.length){var containerWidth=campaign.calloutTarget.width()||campaign.calloutTarget.parents(":visible").width();if(["before","after"].includes(campaign.dom_placement_method)&&(containerWidth=campaign.calloutTarget.parents(":visible").width()),scaleRatio=((containerWidth=containerWidth>0?Math.min(containerWidth,wndsize.width):wndsize.width)-extraPadding)/adDimensions.width,bouncex.state.mobile&&0===$creative.find(".no-mobile-full-width").length)(containerWidth-extraPadding)/wndsize.width>this._constants.mobileFullWidthMinRatio&&(marginForFullWidthDisplay=(containerWidth-wndsize.width)/2,scaleRatio=((containerWidth=wndsize.width)-extraPadding)/adDimensions.width)}else if("overlay"===campaign.type){var widthRatio=(wndsize.width-extraPadding)/adDimensions.width,heightRatio=(wndsize.height-extraPadding)/adDimensions.height;scaleRatio=widthRatio>heightRatio?heightRatio:widthRatio}return{scaleRatio,scaledWidth:adDimensions.width*scaleRatio,scaledHeight:adDimensions.height*scaleRatio,scaledMargin:marginForFullWidthDisplay}},_incrementImpressionCounters:function(){"number"==typeof this._pageImpressions?this._pageImpressions++:this._pageImpressions=1,bouncex.updateBounceVisitCookie((function(cookie){"number"==typeof cookie.pci?cookie.pci++:cookie.pci=1}))},_initAuction:function(campaignId){var campaign=bouncex.campaigns[campaignId];if(campaign&&campaign.isReadyForAuction()){this.log(campaignId,"initializing auction");var eligibleBids=campaign.gbi.bids,filters=[_bid_filters.default.deprioritizeBackfill,_bid_filters.default.hasHighestPriority,_bid_filters.default.hasHighestPrice,_bid_filters.default.arrivedFirst];if(0==eligibleBids.length)return this.log(campaignId,"no bids were returned"),this._failCampaign(campaignId);var winningBids=campaign.updateWinningBids(filters);if(this._reportWinningBids(campaignId,winningBids),!_calloutTarget.default.setCalloutTarget(campaign))return this.error(campaignId,"no anchor found"),this._failCampaign(campaignId);var adformat=campaign.adformats.video||campaign.adformats.all;adformat&&adformat.winningBid&&this._activatePlacement(campaignId,adformat.winningBid);var self=this,reloadDuration=bouncex.ads._getProviderConfig(adformat.winningBid.provider,"reload")||this._constants.defaultReloadDelayInMilliseconds;(0,_scheduling.setTimeoutWrapper)((function(){campaign.isReadyForAuction(!0)&&self._restartCampaign(campaignId)}),reloadDuration)}else _logger.default.debug({group:"Ads",message:"_initAuction: Auction already initialized or failed",metadata:{campaignId}})},_initRequests:function(campaignId,justPrefetched){var campaign=bouncex.campaigns[campaignId],placements=campaign.gbi.placements;campaign.gbi.hasBegunAuction=!0,campaign.gbi.bids=[];var decodedUri=decodeURIComponent(bouncex.calling_url);if(campaign.qbxtest&&-1!==decodedUri.indexOf("bxssp="))for(var placementId in placements)if(placements.hasOwnProperty(placementId)){var placement=placements[placementId];placement.providers=placement.providers.filter((function(provider){return-1!==decodedUri.indexOf("bxssp=".concat(provider))}))}this._isForceTest(campaignId)&&!justPrefetched?this._prefetchBids(campaignId,"aqbx",placements):(campaign.gbi.auction=this._createAndSendAuction(),this._setAuctionTimeout(campaignId))},_getSegmentInjectionHTML:function(){var audienceID="";return bouncex.calling_url.indexOf("perfadssample")>-1?audienceID="sample-feed":bouncex.cookie&&bouncex.cookie.softID&&(audienceID=bouncex.cookie.softID),audienceID?'\n      <script type="text/javascript">\n        window.wkndSegment = {\n          audienceID: '.concat(JSON.stringify(audienceID),",\n          segments: ").concat(JSON.stringify(bouncex.segments||[]),"\n        };\n      <\/script>\n    "):""},_integrations:{tag:{intermediaryId:"869cff86d1c453c1",generateId:function(){return this.intermediaryId+":"+bouncex.website.id}},moat:_moat.default,jwplayer:{key:"o8z/iG2QyTbuWcdH2vCzMM0waC0nOAeJ9/gVcpFiPZ+tv1+5",createPlayerConfig:function(settings){var vastKey=/^[\s]*<VAST/i.test(settings.vastData)?"vastxml":"tag",playerConfig={};return playerConfig.file="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/blank.mp4",playerConfig.mute=!0,playerConfig.width=settings.width,playerConfig.height=settings.height,playerConfig.advertising={},playerConfig.advertising.client="vast",playerConfig.advertising.vpaidcontrols=!0,playerConfig.advertising[vastKey]=settings.vastData,playerConfig},createPlayerInstance:function(campaignId,container,playerConfig,onReady){bouncex.ads.log(campaignId,"creating video player instance");var assetUrl="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/8.3.0/jwplayer.js",scripts=this._getSegmentInjectionHTML(),iframeHtml="<html><head>".concat(scripts,'</head><body style="margin: 0px; overflow: hidden;"><div id="bx-video"></div></body></html>'),videoFrame=_campaignHelpers.default.createIframe({class:"bx-gbi-frame",style:"border: 0; width: "+container.width()+"px; height: "+container.height()+"px;"}),self=this;container.append(videoFrame);var iframeWindow=videoFrame.contentWindow;bouncex.browser.firefox&&(iframeWindow.oldGetComputedStyle=iframeWindow.getComputedStyle,iframeWindow.getComputedStyle=function(el,pseudoEl){var result=iframeWindow.oldGetComputedStyle(el,pseudoEl);return null===result?{}:result}),iframeWindow.document.write(iframeHtml);var scriptTag=iframeWindow.document.createElement("script");scriptTag.setAttribute("src",assetUrl),scriptTag.onload=function(){bouncex.ads.log(campaignId,"jwplayer script loaded"),iframeWindow.jwplayer?(bouncex.ads.log(campaignId,"jwplayer executed"),iframeWindow.jwplayer.key=self.key,iframeWindow.player=iframeWindow.jwplayer("bx-video"),iframeWindow.player.setup(playerConfig),iframeWindow.player.on("adClick",(function(){bouncex.ads.report(campaignId,"click",{value:"ad"})})),iframeWindow.player.on("adError",(function(data){bouncex.ads.error(campaignId,data.message?"video error: "+data.message:"video error")})),onReady(iframeWindow.player)):(bouncex.ads.error(campaignId,"jwplayer failed to execute"),bouncex.ads._failCampaign(campaignId))},scriptTag.onerror=function(){bouncex.ads.error(campaignId,"jwplayer script failed to load"),bouncex.ads._failCampaign(campaignId)},iframeWindow.document.body.appendChild(scriptTag)}}},_isForceTestLiveConditions:function(campaignId){var key="abxtest".concat(campaignId),allKey="abxtestall";return bouncex.updateBounceCookie((function(cookie){cookie.hcs_abxtest=cookie.hcs_abxtest||[],bouncex.calling_url.indexOf(key)>-1&&-1===cookie.hcs_abxtest.indexOf(key)&&cookie.hcs_abxtest.push(key),bouncex.calling_url.indexOf(allKey)>-1&&-1===cookie.hcs_abxtest.indexOf(allKey)&&cookie.hcs_abxtest.push(allKey)})),bouncex.cookie.hcs_abxtest.indexOf(key)>-1||bouncex.cookie.hcs_abxtest.indexOf(allKey)>-1},_isForceTest:function(campaignId){return bouncex.calling_url.indexOf("aqbxtest"+campaignId)>-1||this._isForceTestLiveConditions(campaignId)},resizeAd:function(campaignId,settings){var campaign=bouncex.campaigns[campaignId],obj1=campaign.obj1||jQuery("#".concat(campaign.domElementID)),container=obj1.find(bouncex.ads._constants.targetSelector);container||(container=jQuery("#bx-video-player-".concat(campaignId)).closest(".bx-group"));var resizeData=bouncex.ads._getResizeData(campaignId,{width:settings.width,height:settings.height});return resizeData.scaleRatio>=1?1:(container&&container.css({width:resizeData.scaledWidth+"px",height:resizeData.scaledHeight+"px",overflow:"hidden"}),obj1&&obj1.css({width:resizeData.scaledWidth+"px",marginLeft:"".concat(resizeData.scaledMargin,"px"),marginRight:"".concat(resizeData.scaledMargin,"px")}),resizeData.scaleRatio)},_populateDisplayAd:function(campaignId,settings){this.log(campaignId,"populating display ad: ".concat(settings.mode||"pop"));var campaign=bouncex.campaigns[campaignId],container=campaign.obj1.find(bouncex.ads._constants.targetSelector),moat=_moat.default.display,content=(0,_macros.ReplaceMacros)(settings.content,campaign),onReady=settings.onReady,mode=settings.mode,prerenderOnly="prerenderOnly"===mode,loadAdOnShow="loadAdOnShow"===mode,undoRgx=settings.undoRgx||(0,_preload.getLoadOnPopRgx)(campaignId),interceptRgx=settings.interceptRgx||(0,_preload.getLoadOnShowRgx)(campaignId),iframeBodyStyles="transform-origin: 0 0; max-width: 100%; max-width: 100vw; max-height: 100%; max-height: 100vh;";if(0===container.length)return bouncex.ads.error(campaignId,"creative is missing an ad stack placeholder group"),bouncex.ads._failCampaign(campaignId),!1;var isPrerendered=campaign.isPrerendered(content);if(isPrerendered&&prerenderOnly)return!0;if(isPrerendered){campaign.frameWatcher.impressionStart();var contentDocument=campaign.frameWatcher.frameElement.contentDocument;return _preload.adjustPreloadContent.undo(contentDocument,undoRgx),campaign.frameWatcher.unwrapInterceptor(undoRgx),onReady&&!campaign.frameWatcher.loadComplete?campaign.frameWatcher.addEventListener("loadComplete.bx",onReady,!1):onReady&&setTimeout(onReady,0),!0}campaign.clearContainer(),content=(0,_preload.adjustPreloadContent)(content,interceptRgx,campaignId);var scaleRatio=bouncex.ads.resizeAd(campaignId,settings);scaleRatio&&scaleRatio<1&&(iframeBodyStyles+=" transform: scale(".concat(scaleRatio,");"));var pixelIntercept="window.parent.bouncex.campaigns[".concat(campaignId,"].frameWatcher.interceptElements(").concat(interceptRgx.toString(),");"),scripts="<script>\n      ".concat("var inDapIF = true;","\n      ").concat(pixelIntercept,"\n    <\/script>");scripts+=this._getSegmentInjectionHTML();var parentFont=getComputedStyle(container[0])["font-family"];iframeBodyStyles+="revcontent"===campaign.winningBid.provider?"font-family: ".concat(parentFont):"";var adData={"debug:ads:deal_id":campaign.winningBid.dealId,"debug:ads:deal_name":campaign.winningBid.dealName,"debug:ads:campaign_id":campaign.winningBid.campaignId,"debug:ads:ad_unit_id":campaign.winningBid.adUnitId,"debug:ads:provider":campaign.winningBid.provider,campaignid:campaign.winningBid.campaignId},csp="";(0,_helpers2.hasFeatureFlag)("ADS_CSP_ON_IFRAME")&&(csp="\n        <meta http-equiv=\"Content-Security-Policy\" content=\"upgrade-insecure-requests; default-src https: data: blob: 'self' 'unsafe-inline' 'unsafe-hashes' 'unsafe-eval'; object-src 'none'\">\n      "),content='<html>\n  <head>\n    <base target="_blank"/>\n    '.concat(csp,"\n    <script>\n      window.parent.bouncex.integrations.csp.initErrorDetection(document, true, ").concat(JSON.stringify(adData),", 10)\n    <\/script>\n    ").concat(scripts,'\n  </head>\n  <body marginwidth="0" marginheight="0" style="').concat(iframeBodyStyles,'">').concat(content,"</body>\n</html>");try{var displayFrame=this._createDisplayFrame(content),frameWatcher=this.watchCreativesLoad(campaignId,displayFrame);frameWatcher.sourceContent=settings.content,frameWatcher.loadedContent=content,campaign.once("impression.bx",(function(){if(campaign.frameWatcher===frameWatcher){loadAdOnShow&&container.append(displayFrame);var contentDocument=campaign.frameWatcher.frameElement.contentDocument;frameWatcher.unwrapInterceptor(),_preload.adjustPreloadContent.undo(contentDocument);var moatSrc=moat.getScriptTag({website:window.location.host+" ("+bouncex.website.id+")",deviceType:bouncex.state.mobile?"mobile":"desktop",trigger:campaign.trigger,adSize:settings.width+"x"+settings.height,placement:settings.deployment,ssp:campaign.winningBid.provider});if(moatSrc){var moatScript=contentDocument.createElement("script");moatScript.src=moatSrc,contentDocument.head.appendChild(moatScript)}var iasSrc=_ias.default.display.getScriptTag({trigger:campaign.trigger,placement:settings.deployment,ssp:campaign.winningBid.provider,websiteId:bouncex.website.id,adUnitId:campaign.winningBid.adUnitId,adsPath:"#".concat(campaign.getContainer().id)});iasSrc&&(0,_helpers2.createElement)("script",{src:iasSrc},document.head)}}),!1),loadAdOnShow||(0,_displayAd.displayAd)(campaign,displayFrame,container)}catch(e){return bouncex.ads.error(campaignId,"error populating ad: "+e),bouncex.ads._failCampaign(campaignId),!1}this._attachClickReporting(campaignId,container);var frameDoc=displayFrame.contentDocument;(0,_images.loadImages)(jQuery(frameDoc).find("img").filter(":visible"),(function(){bouncex.ads.log(campaignId,"images loaded successfully"),onReady&&onReady()})),campaign.removePreloader()},watchCreativesLoad:function(campaignId,displayFrame){var campaign=bouncex.campaigns[campaignId];if(campaign.frameWatcher&&campaign.frameWatcher.frameElement===displayFrame)return campaign.frameWatcher;campaign.frameWatcher=new _framewatcher.default(displayFrame),campaign.frameWatcher.campaignId=campaignId;var frameWatcherListener=this._reportCreativesLoaded.bind(this,campaign.frameWatcher);campaign.frameWatcher.addEventListener("loadComplete.bx",frameWatcherListener,!1);var adInterventionListener=this._reportAdIntervention.bind(this,campaignId,"browser");return campaign.frameWatcher.addEventListener("adIntervention.bx",adInterventionListener,!1),campaign.frameWatcher},watchVideoLoad:function(campaignId){var player=document.getElementById("bx-video-player-"+campaignId);this.watchCreativesLoad(campaignId,player)},_reportCreativesLoaded:function(frameWatcher){var campaignId=frameWatcher.campaignId,campaign=campaignId&&bouncex.campaigns[campaignId];campaign&&frameWatcher.loadComplete&&!frameWatcher.reportData&&(frameWatcher.reportData={loaded:1*frameWatcher.loadSucceeded,failed:1*frameWatcher.loadFailed,load_delay:frameWatcher.loadDelay},this.report(campaignId,"creatives_loaded",frameWatcher.reportData),bouncex.clientEvents.activateCreativeLoadedEvent({id:campaign.id,purpose:campaign.purpose,sub_purpose:campaign.sub_purpose}),frameWatcher.loadFailed&&this.error(campaignId,"creatives failed to load"))},_reportAdIntervention:function(campaignId,reason){var campaign=campaignId&&bouncex.campaigns[campaignId];if(campaign&&!campaign.ad_closed){this._failCampaign(campaignId),this.error(campaignId,"Ad Intervened: ".concat(reason));var metadata={reason};this.report(campaignId,"ad_intervention",metadata)}},_prefetchBids:function(campaignId,provider,placements){this.log(campaignId,"prefetching "+provider);var campaign=bouncex.campaigns[campaignId],prefetchPlacements={};for(var placementId in placements)placements.hasOwnProperty(placementId)&&(prefetchPlacements[placementId]=this._compose(placements[placementId]),prefetchPlacements[placementId].providers=[provider]);campaign.gbi.requests=this._createAndSendRequests(campaignId,prefetchPlacements),(0,_scheduling.setTimeoutWrapper)(function(){this._endAllRequests(campaignId),campaign.gbi.bids.length>0?this._initAuction(campaignId):this._initRequests(campaignId,!0)}.bind(this),1e3)},_prepareVideo:function(campaignId,settings,onReady){this.log(campaignId,"preparing video ad");var campaign=bouncex.campaigns[campaignId],container=campaign.obj1.find(bouncex.ads._constants.targetSelector),jwplayer=bouncex.ads._integrations.jwplayer,playerWidth=container.width(),playerHeight=container.height(),resizeData=bouncex.ads._getResizeData(campaignId,{width:playerWidth,height:playerHeight});resizeData.scaleRatio<1&&(playerWidth=resizeData.scaledWidth,playerHeight=resizeData.scaledHeight,container.css({width:playerWidth+"px",height:playerHeight+"px"}),campaign.obj1.css({width:playerWidth+"px",marginLeft:"".concat(resizeData.scaledMargin,"px"),marginRight:"".concat(resizeData.scaledMargin,"px")}));var playerConfig=jwplayer.createPlayerConfig({vastData:settings.vast,width:playerWidth,height:playerHeight});jwplayer.createPlayerInstance(campaignId,container,playerConfig,(function(player){campaign.gbi.player=player,campaign.gbi.isVideo=!0,campaign.gbi.config=campaign.gbi.config||{},campaign.gbi.config.playOnImpression=!0,_moat.default.video.loadPlugin(campaignId),campaign.gbi.contentLoaded=!0,onReady()}))},_userSyncRequests:{__isSynced:function(provider){return!!sessionStorage.getItem("bx".concat(provider,"synced"))},__setAsSynced:function(provider){bouncex.ads.log("SYNC","".concat(provider," was synced")),sessionStorage.setItem("bx".concat(provider,"synced"),"1")},__insertSyncElement:function(provider,elementName,endpoint){var element=(0,_helpers2.createElement)(elementName,{style:"display: none;",width:"1",height:"1",src:endpoint}),self=this;element.onload=function(){self.__setAsSynced(provider)},document.body.appendChild(element)},bsw:function(){this.__isSynced("bsw")||this.__insertSyncElement("bsw","img","https://ssp.behave.com/push_sync")},pbm:function(){if(!this.__isSynced("pbm")){var endpoint=bouncex.ads._getProviderConfig("pbm","user_sync_endpoint"),publisherId=bouncex.ads._getProviderConfig("pbm","publisher_id");endpoint?publisherId?this.__insertSyncElement("pbm","iframe","//"+endpoint+"?p="+publisherId):bouncex.ads.error(this.campaignId,"no publisher id found for pubmatic user sync"):bouncex.ads.error(this.campaignId,"no endpoint found for pubmatic user sync")}},acuity:function(){var _bouncex$gdprApplies,_bouncex$compliance,_bouncex$compliance$t;if(!this.__isSynced("acuity")){var UID="".concat(bouncex.website.id,"-").concat(bouncex.cookie.did),gdpr=(null!==(_bouncex$gdprApplies=bouncex.gdprApplies)&&void 0!==_bouncex$gdprApplies?_bouncex$gdprApplies:bouncex.state.gdpr)?1:0,gdprConsent=(null===(_bouncex$compliance=bouncex.compliance)||void 0===_bouncex$compliance||null===(_bouncex$compliance$t=_bouncex$compliance.tcfData)||void 0===_bouncex$compliance$t?void 0:_bouncex$compliance$t.string)||"",url="https://cs.admanmedia.com/ff062a454b79198e17a2ec718ec55e04.gif?puid=".concat(UID,"&gdpr=").concat(gdpr,"&gdpr_consent=").concat(gdprConsent);this.__insertSyncElement("acuity","img",url)}}},_requestIndex:{sharedBehaviors:{rtb:function(){return{createDisplayImpression:function(width,height,overrides){var displayImpression={id:1,banner:{w:width=Number(width),h:height=Number(height)}};return bouncex.ads._compose(displayImpression,overrides)},createVideoImpression:function(width,height,overrides){var videoImpression={id:1,video:{mimes:["video/mp4","application/javascript"],minduration:3,maxduration:150,protocols:[2,3,5,6],linearity:1,api:[1,2],startdelay:0,placement:"overlay"===this.deployment?5:4,playbackmethod:[2]}};return width&&(videoImpression.video.w=Number(width)),height&&(videoImpression.video.h=Number(height)),bouncex.ads._compose(videoImpression,overrides)},getExtraIds:function(){var deviceId=window.bouncex.ads.deviceOptedStatus,eids=[];return deviceId&&eids.push({source:"bxid",uids:[{id:deviceId,atype:1}]}),_identityhub.default.getIDsForBidRequests().forEach((function(eid){eids.push(eid)})),eids}}}},aqbx:function(settings){return new _ssp.SSP_Request(settings,{init:function(){this.startTime=(0,_helpers2.getTimeMs)(),this.done();var override=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content,isOfTypeVast=override&&"vast"===override.type,hasValidUrl=override&&override.value&&bouncex.utils&&bouncex.utils.validate.url(override.value);if(isOfTypeVast&&hasValidUrl&&bouncex.calling_url.indexOf("aqbxovrd")>-1){var self=this,options={url:override.value,complete:function(response,status){self.handleResponse(response,status),self.done()},xhrFields:{withCredentials:!1}};this.fetch(options)}else this.handleResponse()},handleResponse:function(response,status){var campaign=bouncex.campaigns[this.campaignId],vastXml=null;"success"===status&&response&&response.responseText&&(vastXml=response.responseText);var bid=bouncex.ads._createBid({provider:"aqbx",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:0,adHtml:this.getDisplayHtml(this.width,this.height),vastData:this.getVastXml(vastXml),arrivalTime:this.endTime});campaign.gbi.bids.push(bid),bouncex.ads.log(this.campaignId,"bid simulated for force testing")},getDisplayHtml:function(width,height){var override=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content;if(override&&"html"===override.type&&bouncex.calling_url.indexOf("aqbxovrd")>-1)return override.value;var url="https://".concat(bouncex.website.biu,"/assets/global/images/pub/demo").concat(width,"x").concat(height,".gif");return'<a><img src="'.concat(url,'" width="').concat(width,'" height="').concat(height,'"/></a>')},getVastXml:function(returnedVastXML){var override=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content,isOfTypeVast=override&&"vast"===override.type,hasVastXmlContent=override&&override.value&&"vastxml"===_helpers.default.isVastOrTag(override.value);return isOfTypeVast&&hasVastXmlContent&&bouncex.calling_url.indexOf("aqbxovrd")>-1?override.value:returnedVastXML||'<VAST version="2.0">\n  <Ad>\n    <InLine>\n      <AdSystem>Acudeo Compatible</AdSystem>\n      <AdTitle>VAST 2.0 AQBX</AdTitle>\n      <Description>VAST 2.0 AQBX</Description>\n      <Creatives>\n        <Creative>\n          <Linear>\n            <Duration>00:00:21</Duration>\n            <MediaFiles>\n                <MediaFile\n                    delivery="progressive"\n                    type="video/mp4"\n                    bitrate="500"\n                    width="720"\n                    height="480"\n                    scalable="true"\n                    maintainAspectRatio="true">https://'.concat(bouncex.website.biu,"/assets/global/videos/pub/demo/ads_demo_video.mp4</MediaFile>\n            </MediaFiles>\n          </Linear>\n        </Creative>\n      </Creatives>\n    </InLine>\n  </Ad>\n</VAST>")}})},bsw:function(settings){return new _ssp2.SSP_BSW_Request(settings)},index:function(settings){return new _ssp3.SSP_INDEX_Request(settings)},pbm:function(settings){return new _ssp4.SSP_PBM_Request(settings)},revcontent:function(settings){return new _ssp5.SSP_RevContent_Request(settings)},criteo:function(settings){return new _ssp6.SSP_Criteo_Request(settings)},acuity:function(settings){return new _ssp7.SSP_Acuity_Request(settings)}},_reportWinningBids:function(campaignId,winningBids){var _this2=this,campaign=bouncex.campaigns[campaignId],selected_event=this._constants.bidEvents.selected;_logger.default.debug({campaignId,group:"Ads",message:"Winning Bids",metadata:{winningBids}});var selected_bids=Array.from(winningBids).map((function(winningBid){return _this2._selectWinningBid(campaignId,winningBid)})),event_data={auction_number:campaign.gbi.auctionCount,bids:JSON.stringify(selected_bids)};this.report(campaignId,selected_event,event_data)},_selectWinningBid:function(campaignId,winningBid){var campaign=bouncex.campaigns[campaignId],placement=campaign.gbi.placements[winningBid.placementId];return this.log(campaignId,"selecting ".concat(placement.mediaType," bid from ").concat(winningBid.provider)),{media_type:placement.mediaType,partner:winningBid.provider,deployment:placement.deployment,deal_id:winningBid.dealId||"NA",price:bouncex.ads._getReportablePrice(winningBid.price),auction_number:campaign.gbi.auctionCount,ad_unit_id:winningBid.adUnitId}},_setAuctionTimeout:function(campaignId){var delay=this._constants.auctionDelayInMilliseconds,self=this;(0,_scheduling.setTimeoutWrapper)((function(){bouncex.campaigns[campaignId].gbi.bids.length>0||self._allRequestsAreComplete(campaignId)?(self.log(campaignId,"one or more bids received, or all requests have resolved; ending wait period"),self._endAllRequests(campaignId),self._initAuction(campaignId)):(self.log(campaignId,"no bids after first wait period; some requests still pending; trying again"),(0,_scheduling.setTimeoutWrapper)((function(){self.log(campaignId,"ending wait period"),self._endAllRequests(campaignId),self._initAuction(campaignId)}),delay))}),delay)},hasSuppressedLineItem:function(){return bouncex.integrations.gam.hasSuppressedLineItem()},shouldDfpPreventShowing:function(campaignId){return this.isDfpLoaded()?!!this.hasSuppressedLineItem()&&(this.log(campaignId,"GAM Suppressed Lineitem on page",!0),!0):(this.log(campaignId,"GAM not loaded",!0),!0)},canShowPubCampaign:function(type,campaignId,shouldCheckDfp){var campaign=bouncex.campaigns[campaignId];if(!this._isForceTest(campaignId)){if(this._exceedsFrequencyCap())return!1;if(shouldCheckDfp&&this.shouldDfpPreventShowing(campaignId))return!1}if(campaign.dynamic_anchor){if(this._customizations.anchor.updateDynamicAnchor(campaignId),0===campaign.visibleAnchors.length)return this.log(campaignId,"dynamic anchor - no visible anchors",!0),!1;if(!this._customizations.anchor.passesViewabilityTest(campaignId))return this.log(campaignId,"dynamic anchor - fails visibility test",!0),!1}if(campaign.trigger&&campaign.winningBid)return type===campaign.trigger||campaign.activationBid(type)===campaign.winningBid;if(campaign.deployment_type&&!campaign.deployment_type.canShow())return!1;var adActivated=this.readyCampaignAd(type,campaignId);return this.tryPop(campaignId,type),!campaign.failed&&(campaign.gbi.ready?!(!campaign.trypopTriggered||!adActivated)&&(this.log(campaignId,"passes canShowPubCampaign criteria"),!0):(this.log(campaignId,"gbi.ready is false",!0),!1))},readyCampaignAd:function(activationType,campaignId){var campaign=bouncex.campaigns[campaignId],activationBid=campaign.activationBid(activationType);return!!activationBid&&(activationBid!==campaign.winningBid&&(campaign.obj1&&(campaign.obj1.add(campaign.obj2).remove(),delete campaign.video,delete campaign.gbi.isVideo),this._activatePlacement(campaignId,activationBid)),!0)},error:function(campaignId,message){this.log(campaignId,message,!0)},getDeploymentType:function(campaignId){return this._getDeploymentType(campaignId)},getFailedDeployments:function(){return this._failedDeployments},initCampaign:function(campaignId){this.log(campaignId,"initializing campaign");var campaign=bouncex.campaigns[campaignId];if(campaign.adformats=campaign.winningBid=null,campaign.gbi.auctionCount?campaign.gbi.auctionCount++:campaign.gbi.auctionCount=1,this.log(campaignId,"initCampaign run #".concat(campaign.gbi.auctionCount)),campaign.gbi.auctionCount>13&&this._failCampaign(campaignId),_calloutTarget.default.isMissingTarget(campaign))return this.error(campaignId,"no anchor found"),this._failCampaign(campaignId);campaign.activated||(this.report(campaignId,"eligible"),campaign.listeners=new _eventListeners.default,(0,_eventJsEval.event_js_eval)(campaignId,"preactivation"),this.log(campaignId,"activating behavioral triggers"),this._activateBehavioralTriggers(campaignId),campaign.activated=!0),this._initRequests(campaignId)},syncUsers:function(){Object.keys(bouncex.website.sspConfig||{}).forEach((function(provider){"function"==typeof BehavioralAds._userSyncRequests[provider]&&((0,_helpers2.hasFeatureFlag)("DISABLE_USER_SYNC_".concat(provider.toUpperCase()))||BehavioralAds._userSyncRequests[provider]())}),this)},initDfp:function(){bouncex.integrations.gam.init()},isDfpLoaded:function(){return bouncex.integrations.gam.getDfpIsLoaded()},getDfpEndPageViewEvent:function(){return bouncex.integrations.gam.getDfpEndPageViewEvent()},getDfpLineItemIds:function(){return bouncex.integrations.gam.lineItems.getAll()},handleImpression:function(campaignId){this._adjustPosition(campaignId),this._incrementImpressionCounters()},log:function(campaignId,message,isError){var data={group:"Ads",message,campaignId};isError?_logger.default.error(data):_logger.default.info(data)},report:function(campaignId,eventName,metadata){if(0!==eventName.indexOf("bid_")||!bouncex.vars.block_bid_events){var campaign=bouncex.campaigns[campaignId],provider=(metadata=metadata||{}).partner||campaign.winningBid&&campaign.winningBid.provider;switch(provider?this.log(campaignId,"provider ".concat(provider.toUpperCase(),' reporting event "').concat(eventName,'"')):this.log(campaignId,'reporting event "'+eventName+'"'),eventName){case"pop":var bid=campaign.winningBid;metadata.ad_unit_id=campaign.activeAdUnitId||0,bid?(metadata.targeting="NA",metadata.partner=bid.provider,metadata.deal_id=bid.dealId,metadata.deal_name=bid.dealName,metadata.price=this._getReportablePrice(bid.price),metadata.deployment=this._getDeploymentType(campaignId),metadata.auction_number=campaign.gbi.auctionCount,metadata.is_performance_ads=_helpers3.default.bidIsPerformanceAd(bid)):this.error(campaignId,'unable to find bid data to report on "pop"');break;case"trypop":case"eligible":metadata.ad_units=this._getAdUnitIds(campaignId).join(",");break;case"click":campaign.winningBid&&(metadata.deal_id=campaign.winningBid.dealId,metadata.deal_name=campaign.winningBid.dealName),metadata.value=metadata.value||"nonad";break;case"ad_intervention":if(campaign.winningBid){metadata=Object.assign({},campaign.winningBid,{adHtml:null,vastData:null},metadata)}}metadata.source="ads",(0,_report.buildReport)(campaignId,eventName,metadata)}},tryPop:function(campaignId,activationType){var campaign=bouncex.campaigns[campaignId];if(!campaign.trypopTriggered){if("overlay"!==this._getDeploymentType(campaignId)&&!campaign.dynamic_anchor){var anchor=(0,_siteElement.parseSiteElementSelector)(campaign.callout_t);if(!(!!anchor&&!!jQuery(anchor).length))return}this.report(campaignId,"trypop",{activation:activationType}),campaign.trypopTriggered=!0}},schainObject:function(bidRequestId){var schain={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:bouncex.website.id+"",hp:1}]};if(bidRequestId){var node=schain.nodes[0];node.rid=bidRequestId,node.name=bouncex.website.name,node.domain=bouncex.website.domain}return schain},schainObjectString:function(){var schain_obj=this.schainObject();return[schain_obj.ver,schain_obj.complete+"!"+schain_obj.nodes[0].asi,schain_obj.nodes[0].sid,schain_obj.nodes[0].hp].map(encodeURIComponent).join(",")}},_default=BehavioralAds;exports.default=_default},5390:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.Auction=Auction,exports.default=AuctionHandler;var _ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3036)),_ssp2=__webpack_require__(9032),_ssp3=__webpack_require__(2514),_ssp4=__webpack_require__(5432),_ssp5=__webpack_require__(7392),_ssp6=__webpack_require__(2889),_ssp7=__webpack_require__(2678),_debug=_interopRequireDefault(__webpack_require__(4223));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}var SSP_Request_Prototypes={aqbx:_ssp.SSP_Request,bsw:_ssp3.SSP_BSW_Request,index:_ssp4.SSP_INDEX_Request,pbm:_ssp5.SSP_PBM_Request,revcontent:_ssp6.SSP_RevContent_Request,criteo:_ssp7.SSP_Criteo_Request,acuity:_ssp2.SSP_Acuity_Request};function AuctionHandler(settings){this.__init(settings||{})}function Auction(auctionHandler,campaigns){this.auctionHandler=auctionHandler,this.campaigns=campaigns,this.__init()}AuctionHandler.impid=0,AuctionHandler.SSP_factory=function(provider_name,ssp_settings){var Request_Class=SSP_Request_Prototypes[provider_name],provider_instance=new(Request_Class&&Request_Class.__SSP_Class||_ssp.default)(ssp_settings);return provider_instance.provider=provider_name,Request_Class&&(provider_instance.__Request_Class=Request_Class||_ssp.SSP_Request),provider_instance},Object.assign(AuctionHandler.prototype,{activeAuction:null,auctions:null,auctionTimeout:null,auctionCheckpoint:null,__init:function(settings){this.auctions=[],this.auctionTimeout=settings.auctionTimeout||null,this.auctionCheckpoint=settings.auctionCheckpoint||null},getOrCreateAuction:function(){return null===this.activeAuction||this.activeAuction.checkBidRequestsDone()?this.createAndSendNewAuction():this.activeAuction},createAndSendNewAuction:function(){var auction=this.createNewAuction();return null!==auction&&setTimeout(auction.sendBidRequests.bind(auction),100),auction},createNewAuction:function(){var auctionCampaigns=this.getAuctionableCampaigns();return Object.keys(auctionCampaigns).length?(this.activeAuction=new Auction(this,auctionCampaigns),this.auctions.push(this.activeAuction),this.activeAuction):null},getAuctionableCampaigns:function(){var campaigns={};for(var campaign_id in bouncex.campaigns){var campaign=bouncex.campaigns[campaign_id];campaign.isGBI2&&campaign.isReadyForAuction(!0)&&(campaigns[campaign_id]=campaign)}return campaigns}}),Object.assign(Auction.prototype,{campaigns:null,providerCampaigns:null,bidRequests:null,SSPList:null,startTime:null,endTime:null,durationTime:null,__init:function(){this.SSPList={}},__initBidRequests:function(){return null!==this.campaigns&&this.__initCampaigns()&&(this.providerCampaigns=this.getProviderCampaigns(),this.bidRequests=this.createBidRequests()),this.bidRequests&&Object.keys(this.bidRequests).length>0},__initCampaigns:function(){for(var campaign_id in this.campaigns){var campaign=this.campaigns[campaign_id];campaign.isReadyForAuction()?this.__initCampaign(campaign):delete this.campaigns[campaign_id]}return Object.keys(this.campaigns).length>0},__initCampaign:function(campaign){campaign.gbi.hasBegunAuction=!0,campaign.gbi.bids=[],campaign.gbi.requests=[],campaign.adformats=null,campaign.winningBid=null},__initSSP:function(provider_name,campaign_placement_ids){var settings={auction:this,campaign_ids:Object.keys(campaign_placement_ids),campaign_placement_ids};return this.SSPList[provider_name]=AuctionHandler.SSP_factory(provider_name,settings)},getProviderCampaigns:function(){var providerCampaigns={};for(var campaign_id in this.campaigns){var campaign_providers=this.campaigns[campaign_id].getProviders();for(var provider_name in campaign_providers)(providerCampaigns[provider_name]||(providerCampaigns[provider_name]={}))[campaign_id]=campaign_providers[provider_name]}return providerCampaigns},createBidRequests:function(){var bidRequests={};for(var provider_name in this.providerCampaigns){var campaign_placement_ids=this.providerCampaigns[provider_name],ssp=this.__initSSP(provider_name,campaign_placement_ids),requests=ssp.createBidRequests();bidRequests[provider_name]={ssp,campaign_placement_ids,requests}}return bidRequests},sendBidRequests:function(){var timeout=this.auctionHandler.auctionTimeout,checkpoint=this.auctionHandler.auctionCheckpoint;if(null===this.startTime){if(this.startTime=new Date,!this.__initBidRequests())return this.failed=!0,void this.__bidRequestsDone();Object.values(this.bidRequests).forEach(_debug.default.tryCatch((function(bidRequest){bidRequest.ssp.sendBidRequests(bidRequest.requests),bidRequest.timeSent=new Date}))),null!==timeout&&setTimeout(this.__timeout.bind(this),timeout),null!==checkpoint&&setTimeout(this.__checkpoint.bind(this),checkpoint)}},getIncompleteBidRequests:function(){return Object.values(this.bidRequests).filter((function(bidRequest){return bidRequest.timeSent&&!bidRequest.ssp.checkIfDone()}))},checkBidRequestsDone:function(){return null!==this.startTime&&(null!==this.endTime||null===this.bidRequests||0===this.getIncompleteBidRequests().length&&(this.__bidRequestsDone(),!0))},__timeout:function(){null===this.endTime&&(this.__bidRequestsDone(),this.abortFutileRequests())},__checkpoint:function(){this.updateWinningBids(),this.abortFutileRequests()},__bidRequestsDone:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.updateWinningBids())},updateWinningBids:function(){for(var campaign_id in this.campaigns){var campaign=this.campaigns[campaign_id];if(this.endTime||campaign.gbi.bids.length)try{this.updateCampaignWinningBids(campaign)}catch(e){}}},abortFutileRequests:function(){return Object.values(this.bidRequests).reduce((function(arr,bidRequest){return arr.concat(bidRequest.ssp.abortFutileRequests())}),[])},updateCampaignWinningBids:function(campaign){return bouncex.ads._initAuction(campaign.id),campaign.winningBid}}),Object.defineProperties(_ssp.default.prototype,{auctionHandler:{writable:!0}})},6950:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(861)),_default={hasDealId:function(bids){var bidsWithDealIds=bids.filter((function(bid){return!!bid.dealId}));return bidsWithDealIds.length?bidsWithDealIds:bids},hasHighestPriority:function(bids){var priorityRegex=/p([1-9][0-9]?)/i,highestPriority=0;return bids.reduce((function(bidsWithHighestPriority,bid){var dealString=[bid.dealName,bid.dealId].join(),dealMatch=priorityRegex.exec(dealString);if(null===dealMatch)return bidsWithHighestPriority;var priority=Number(dealMatch[1]);return priority>highestPriority?(highestPriority=priority,[bid]):(priority===highestPriority&&bidsWithHighestPriority.push(bid),bidsWithHighestPriority)}),bids)},hasHighestPrice:function(bids){var bidsWithHighestPrice=[],highestPrice=0;return bids.forEach((function(bid){bid.price>highestPrice?(highestPrice=bid.price,bidsWithHighestPrice=[bid]):bid.price==highestPrice&&bidsWithHighestPrice.push(bid)})),bidsWithHighestPrice.length?bidsWithHighestPrice:bids},deprioritizeBackfill:function(bids){var nonBackfillBids=bids.filter((function(bid){return!bid.isBackfill}));if(nonBackfillBids.length)return nonBackfillBids;var sspConfig=bouncex.website.sspConfig,bidPriorities=bids.map((function(bid){var _sspConfig$provider,provider=bid.provider;return null===(_sspConfig$provider=sspConfig[provider])||void 0===_sspConfig$provider?void 0:_sspConfig$provider.ssp_priority})),highestPriority=Math.max.apply(Math,(0,_toConsumableArray2.default)(bidPriorities)),highestPriorityBackfillBids=bids.filter((function(bid){var _sspConfig$provider2,provider=bid.provider;return(null===(_sspConfig$provider2=sspConfig[provider])||void 0===_sspConfig$provider2?void 0:_sspConfig$provider2.ssp_priority)===highestPriority}));return highestPriorityBackfillBids.length?highestPriorityBackfillBids:bids},arrivedFirst:function(bids){var firstBids=[],earliestArrival=0;return bids.forEach((function(bid){0===earliestArrival||bid.arrivalTime<earliestArrival?(earliestArrival=bid.arrivalTime,firstBids=[bid]):bid.arrivalTime==earliestArrival&&firstBids.push(bid)})),firstBids.length?firstBids:bids}};exports.default=_default},9032:(__unused_webpack_module,exports,__webpack_require__)=>{var _typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_Acuity_Request=SSP_Acuity_Request,exports.default=SSP_Acuity;var _ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(8897));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function SSP_Acuity(settings){_ssp.default.call(this,settings)}function SSP_Acuity_Request(requestSettings){_ssp.SSP_CONSOLIDATED_Request.call(this,requestSettings)}Object.assign(SSP_Acuity.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Acuity.prototype,"constructor")}),{__Request_Class:SSP_Acuity_Request,provider:"acuity",getImpressionKey:function(placementSettings){var campaignID=placementSettings.campaignID,placement=placementSettings.placement,mediaType="video"===placementSettings.type?"video":"display",key=[campaignID,mediaType];return"display"===mediaType&&key.push(placement.width,placement.height),key.join("|")},getRequestKey:function(placementSettings){var campaignID=placementSettings.campaignID,placement=this.auction.campaigns[campaignID].gbi.placements[placementSettings.placementID],key=[campaignID,placement.mediaType];return"display"===placement.mediaType&&key.push(placement.width,placement.height),key.join("|")}}),SSP_Acuity_Request.__SSP_Class=SSP_Acuity,Object.assign(SSP_Acuity_Request.prototype=Object.create(_ssp.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Acuity_Request.prototype,"constructor")}),{provider:"acuity",getSiteId:function(){return""},getOptions:function(requestData){var mediaType=/video/.test(this.requestKey)?"video":"banner";return{method:"POST",url:"https://ssp.wknd.ai/acuity/".concat(mediaType),data:JSON.stringify(requestData),dataType:"json",contentType:"application/json",global:!1,crossDomain:!0,xhrFields:{withCredentials:!1},timeout:5e3,context:this,complete:function(response,status){this.handleResponse(response,status),this.done()}}},getRequestData:function(impressionData){var requestId="".concat(bouncex.cookie.vid,"_").concat(bouncex.cookie.sid),site=this.getBaseSite();site.publisher&&(site.publisher.id=bouncex.website.id);var requestData={id:requestId,site,device:this.getDevice(),user:{id:"".concat(bouncex.website.id,"-").concat(bouncex.cookie.did)},imp:impressionData,at:1,tmax:200};return this.appendCompliance(requestData),requestData}})},2678:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_Criteo_Request=SSP_Criteo_Request,exports.Zones=void 0,exports.default=SSP_Criteo;var _ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3036)),_helpers=__webpack_require__(2481),_logger=_interopRequireDefault(__webpack_require__(5754));_interopRequireDefault(__webpack_require__(7686));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}var Zones={display:{global:{"300x250":1668820,"300x600":1639940,"320x480":1639944,"480x320":1639941,"600x500":1639943,"720x480":1639939,"800x1100":1639937,"800x1200":1639942,"900x550":1639936,"900x600":1639935,"970x250":1639934},GB:{"300x250":1684286,"300x600":1684296,"320x480":1684287,"480x320":1684289,"600x500":1684288,"720x480":1684290,"800x1100":1684293,"800x1200":1684294,"900x550":1684295,"900x600":1684292,"970x250":1685692}},video:{global:{default:1699741}}};function SSP_Criteo(settings){_ssp.default.call(this,settings)}function SSP_Criteo_Request(request_settings){_ssp.SSP_Request.call(this,request_settings)}exports.Zones=Zones,Object.assign(SSP_Criteo.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Criteo.prototype,"constructor")}),{__Request_Class:SSP_Criteo_Request,provider:"criteo",__init:function(){var _window,_window$Criteo,_window$Criteo2,_window$Criteo2$event;null!==(_window$Criteo=(_window=window).Criteo)&&void 0!==_window$Criteo||(_window.Criteo={}),document.getElementById("wknd-criteo")||(0,_helpers.createElement)("script",{async:"async",type:"text/javascript",src:"https://static.criteo.net/js/ld/publishertag.js",id:"wknd-criteo"},document.head),null!==(_window$Criteo2$event=(_window$Criteo2=window.Criteo).events)&&void 0!==_window$Criteo2$event||(_window$Criteo2.events=[]),_ssp.default.prototype.__init.apply(this,arguments)}}),SSP_Criteo_Request.__SSP_Class=SSP_Criteo,Object.assign(SSP_Criteo_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Criteo_Request.prototype,"constructor")}),{provider:"criteo",init:function(){var requestData=this.getRequestData(),options=this.getOptions(requestData);return this.fetch(options)},fetch:function(options){this.startTime=Date.now();var handleResponse=this.handleResponse.bind(this);window.Criteo.events.push((function(){_logger.default.debug({group:"Ads",message:"Criteo bids requested",metadata:{request:options.data}}),window.Criteo.RequestBids(options.data,handleResponse,5e3)}))},handleResponse:function(bids){var _this=this,campaign=bouncex.campaigns[this.campaignId],results=bouncex.ads._constants.bidEvents,result=results.error;if(campaign){var eventData={partner:"criteo",partner_site_id:"wunderkind",deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,price:"NA",deal_id:"NA",auction_number:campaign.gbi.auctionCount,ad_unit_id:this.adUnitId};_logger.default.debug({group:"Ads",message:"Criteo bids retrieved",metadata:{impid:"".concat(this.placementId),bids}});var thisBid=bids.filter((function(bid){return bid.impressionId==="".concat(_this.placementId)}));result=thisBid.length?this.handleSuccessfulResponse(thisBid[0]):results.empty,this.reportResult(result,eventData)}else _logger.default.debug({group:"Ads",message:"Criteo Bid Response received for a campaign that is no longer available",metadata:{impid:"".concat(this.placementId),bids,campaignId:this.campaignId}})},handleSuccessfulResponse:function(bidResponse){var campaign=bouncex.campaigns[this.campaignId],results=bouncex.ads._constants.bidEvents,creative=this.getCreativeFromBid(bidResponse),bid=bouncex.ads._createBid({provider:"criteo",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:bidResponse.cpm,adHtml:null,dealId:bidResponse.dealCode,vastData:null,arrivalTime:this.endTime,isBackfill:!1});return"video"===this.type?bid.vastData=creative:bid.adHtml=creative,campaign.gbi.bids.push(bid),results.fill},getCreativeFromBid:function(bidResponse){return"video"===this.type?bidResponse.vastXml||bidResponse.vastUrl:'\n        <script type="text/javascript">\n        var w = window;\n        var doc = window.document;\n        for (i = 0; i < 10; i++) {\n          w = w.parent;\n          if (w.Criteo) {\n            try {\n              w.Criteo.RenderAd("'.concat(bidResponse.id,'", doc);\n              break;\n            } catch (e) {\n              continue;\n            }\n          }\n        }\n        <\/script>\n      ')},getSiteId:function(){return this._getProviderConfig("network_id")},getOptions:function(requestData){var _this2=this;return{data:requestData,timeout:5e3,complete:function(){_this2.handleResponse(),_this2.done()}}},getRequestData:function(){var dimensions="".concat(this.width,"x").concat(this.height),placement={slotid:"".concat(this.placementId),zoneid:this.getZoneID(),publishersubid:"".concat(bouncex.website.id),sizes:[dimensions]};return"video"===this.type&&(placement.mediaTypes={video:{context:"outstream",placement:"overlay"===this.deployment?5:4,playerSize:[this.width,this.height],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],api:[1,2],playbackmethod:[2],skip:0,startdelay:0,maxduration:150,videoCallback:function(){}}}),_logger.default.debug({group:"Ads",message:"Calculating Criteo Request Data",metadata:{placement}}),{network_id:this.getSiteId(),placements:[placement]}},getZoneID:function(){var _zoneMap$dimensions,_zoneMap$dimensions2,zoneMap=this.getZones(),dimensions="".concat(this.width,"x").concat(this.height);return _logger.default.debug({group:"Ads",message:"Calculating Criteo Zone",metadata:{zoneMap,dimensions,result:null!==(_zoneMap$dimensions=zoneMap[dimensions])&&void 0!==_zoneMap$dimensions?_zoneMap$dimensions:zoneMap.default}}),null!==(_zoneMap$dimensions2=zoneMap[dimensions])&&void 0!==_zoneMap$dimensions2?_zoneMap$dimensions2:zoneMap.default},getZones:function(){var _bouncex$state,_bouncex$state$geo,_baseZoneMap$bouncex$,_bouncex$state2,_bouncex$state2$geo,_baseZoneMap$bouncex$2,_bouncex$state3,_bouncex$state3$geo,baseZoneMap=Zones[this.type];return _logger.default.debug({group:"Ads",message:"Calculating Criteo Zones",metadata:{type:this.type,baseZoneMap:Zones[this.type],country:null===(_bouncex$state=bouncex.state)||void 0===_bouncex$state||null===(_bouncex$state$geo=_bouncex$state.geo)||void 0===_bouncex$state$geo?void 0:_bouncex$state$geo.country_code,result:null!==(_baseZoneMap$bouncex$=baseZoneMap[null===(_bouncex$state2=bouncex.state)||void 0===_bouncex$state2||null===(_bouncex$state2$geo=_bouncex$state2.geo)||void 0===_bouncex$state2$geo?void 0:_bouncex$state2$geo.country_code])&&void 0!==_baseZoneMap$bouncex$?_baseZoneMap$bouncex$:baseZoneMap.global}}),null!==(_baseZoneMap$bouncex$2=baseZoneMap[null===(_bouncex$state3=bouncex.state)||void 0===_bouncex$state3||null===(_bouncex$state3$geo=_bouncex$state3.geo)||void 0===_bouncex$state3$geo?void 0:_bouncex$state3$geo.country_code])&&void 0!==_baseZoneMap$bouncex$2?_baseZoneMap$bouncex$2:baseZoneMap.global}})},2889:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_RevContent_Request=SSP_RevContent_Request,exports.default=SSP_RevContent;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3036)),_helpers=__webpack_require__(2481),_logger=_interopRequireDefault(__webpack_require__(5754));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var supportedIABSizes=["120x600","160x600","240x400","250x250","250x300","300x50","300x250","300x600","300x1050","320x50","320x250","320x480","336x280","640x1136","728x90","720x300","750x1334","970x90","970x250","970x550","1080x1920"],resizeRatios={"900x300":300/370,"900x600":600/700,"900x800":800/1040};function SSP_RevContent(settings){_ssp.default.call(this,settings)}function SSP_RevContent_Request(request_settings){_ssp.SSP_Request.call(this,request_settings)}Object.assign(SSP_RevContent.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_RevContent.prototype,"constructor")}),{__Request_Class:SSP_RevContent_Request,provider:"revcontent",__createAllBidRequests:function(providerBidSettings){return(0,_helpers.visitorTestMode)("bxdev")||Math.random()<.03?_ssp.default.prototype.__createAllBidRequests.call(this,providerBidSettings):(_logger.default.debug({group:"Ads",message:"Skipped RevContent due to sampling"}),[])}}),SSP_RevContent_Request.__SSP_Class=SSP_RevContent,Object.assign(SSP_RevContent_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_RevContent_Request.prototype,"constructor")}),{provider:"revcontent",init:function(){var requestData=this.getRequestData(),options=this.getOptions(requestData);return this.fetch(options)},handleResponse:function(response,status){var campaign=bouncex.campaigns[this.campaignId],results=bouncex.ads._constants.bidEvents,result=results.error,eventData={partner:"revcontent",partner_site_id:"wunderkind",deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,price:"NA",deal_id:"NA",auction_number:campaign.gbi.auctionCount,ad_unit_id:this.adUnitId};"success"===status&&response?result=this.handleSuccessfulResponse(response):"nocontent"===status?result=results.empty:"abort"!==status&&"timeout"!==status||(result=results.none),this.reportResult(result,eventData)},handleSuccessfulResponse:function(response){var _responseJSON$content,campaign=bouncex.campaigns[this.campaignId],results=bouncex.ads._constants.bidEvents,responseJSON=response.responseJSON||JSON.parse(response.responseText);if((null==responseJSON||null===(_responseJSON$content=responseJSON.content)||void 0===_responseJSON$content?void 0:_responseJSON$content.length)>0){var bid=bouncex.ads._createBid({provider:"revcontent",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:0,adHtml:this.getDisplayHtml(),vastData:null,arrivalTime:this.endTime,isBackfill:!0,isMultiPanel:this.isMultiPanel()});return campaign.gbi.bids.push(bid),results.fill}return results.empty},getOptions:function(requestData){var _this=this;return{url:"https://".concat(this._getProviderConfig("endpoint")),data:requestData,method:"GET",type:"GET",dataType:"jsonp",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(response,status){_this.handleResponse(response,status),_this.done()}}},getRequestData:function(){return{api_key:"144586f6b9f546fae65143148bf147c9cd0d519c",widget_id:this.getWidgetID(),pub_id:167485,domain:this.getDomain()}},getScalingRatio:function(){var _resizeRatios$;return null!==(_resizeRatios$=resizeRatios["".concat(this.width,"x").concat(this.height)])&&void 0!==_resizeRatios$?_resizeRatios$:1},getDisplayHtml:function(){var dimensions="".concat(this.width,"x").concat(this.height),widget_id=this.getWidgetID(),iabString="";supportedIABSizes.includes(dimensions)&&(iabString='data-banner-size="'.concat(dimensions,'"'));var widgetTypeAttribute="data-widget-placement";this.isMultiPanel()&&(widgetTypeAttribute="data-rc-widget");var subwidgetIds={campaign_ad_unit_id:this.placementId};return'\n        <div id="widget-pl-'.concat(widget_id,'"\n          data-wknd-height="').concat(this.height,'"\n          data-wknd-width="').concat(this.width,'"\n          ').concat(widgetTypeAttribute,'\n          data-widget-host="habitat"\n          data-endpoint="trends.revcontent.com"\n          data-widget-id="').concat(widget_id,"\"\n          data-sub-ids='").concat(JSON.stringify(subwidgetIds),"'\n          ").concat(iabString,'\n          style="transform: scale(').concat(this.getScalingRatio(),'); transform-origin: 50% 0;"\n        ></div>\n        <script type="text/javascript"\n          src="https://assets.revcontent.com/master/delivery.js" defer="defer"><\/script>\n      ')},isMultiPanel:function(){var widget_id=this.getWidgetID();return Object.values(this.getMultiPanelWidgets()).includes(widget_id)},getWidgets:function(){var multiPanelWidgets=this.getMultiPanelWidgets();return _objectSpread(_objectSpread({},this.getSingularWidgets()),{},{"900x300":multiPanelWidgets["3x1"],"900x600":multiPanelWidgets["3x2"],"900x800":multiPanelWidgets["3x3"],"800x1200":multiPanelWidgets["3x4"]})},getDomain:function(){return{no_cbd_no_gambling:"nocbd.gambling.wunderkind.co",no_cbd_yes_gambling:"nocbd.wunderkind.co",yes_cbd_yes_gambling:"wunderkind.co"}[this._getProviderConfig("content_filter")]},getSingularWidgets:function(){return{no_cbd_no_gambling:{"970x250":270863,"300x600":270861,"300x250":270862},no_cbd_yes_gambling:{"970x250":270866,"300x600":270864,"300x250":270865},yes_cbd_yes_gambling:{"970x250":267637,"300x600":268438,"300x250":269300}}[this._getProviderConfig("content_filter")]},getMultiPanelWidgets:function(){return{no_cbd_no_gambling:{"3x1":270618,"3x2":270582,"3x3":270583,"3x4":275601},no_cbd_yes_gambling:{"3x1":270620,"3x2":270580,"3x3":270581},yes_cbd_yes_gambling:{"3x1":269299,"3x2":269312,"3x3":269313}}[this._getProviderConfig("content_filter")]},getWidgetID:function(){var _widgetMap$,widgetMap=this.getWidgets(),defaultWidget=widgetMap["300x600"];return null!==(_widgetMap$=widgetMap["".concat(this.width,"x").concat(this.height)])&&void 0!==_widgetMap$?_widgetMap$:defaultWidget}})},6487:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSSPStyles=function(provider){var _sspStyleRules$provid;return null!==(_sspStyleRules$provid=sspStyleRules[provider])&&void 0!==_sspStyleRules$provid?_sspStyleRules$provid:""};var sspStyleRules={revcontent:'\n    [data-ssp="revcontent"][data-multipanel] .bx-group-placeholder {\n      padding: 15px 15px 5px;\n    }\n\n    [data-ssp="revcontent"] .bx-group-placeholder {\n      background-color: #FFF !important;\n    }\n  '}},2514:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_BSW_Request=SSP_BSW_Request,exports.default=SSP_BSW;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3036)),_contextual=_interopRequireDefault(__webpack_require__(3723));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function SSP_BSW(settings){this.__init(settings||{})}function SSP_BSW_Request(request_settings){_ssp.SSP_Request.apply(this,arguments)}Object.assign(SSP_BSW.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_BSW.prototype,"constructor")}),{__Request_Class:SSP_BSW_Request,provider:"bsw",deployment_campaigns:null,__createAllBidRequests:function(providerBidSettings){var request_settings=Object.assign({campaigns:{},campaign_settings:{},lookup_campaign_ids:{}},providerBidSettings);for(var campaign_id in this.auction.campaigns)this.__createCampaignBidRequests(request_settings,campaign_id);return[this.__instantiateBidRequest(request_settings)]},__createCampaignBidRequests:function(request_settings,campaign_id){for(var campaign=request_settings.campaigns[campaign_id]=this.auction.campaigns[campaign_id],campaign_settings=request_settings.campaign_settings[campaign_id]={campaign,deployment:campaign.deployment,placement_settings:{},lookup_placement_ids:{video:{},display:{}}},campaign_placement_ids=this.campaign_placement_ids[campaign_id],i=0;i<campaign_placement_ids.length;i++){var placement_id=campaign_placement_ids[i];this.__createPlacementBidRequest(request_settings,campaign_settings,placement_id)}return request_settings.lookup_campaign_ids[campaign.deployment]=campaign_id,campaign_settings},__createPlacementBidRequest:function(request_settings,campaign_settings,placement_id){var placement=campaign_settings.campaign.gbi.placements[placement_id],placement_settings=campaign_settings.placement_settings[placement_id]={placement,placementId:placement_id,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat};return this.lookupPlacementID(campaign_settings.lookup_placement_ids,placement_settings,placement_id),placement_settings},lookupPlacementID:function(placementLookupTable,placementSettings,placementID){if(placementLookupTable&&placementSettings){var mediaType="video"===placementSettings.type?"video":"display",width=placementSettings.width||"0",height=placementSettings.height||"0",placementTypeLookup=placementLookupTable[mediaType]||(placementLookupTable[mediaType]={}),placementLookupKey="".concat(width,"x").concat(height);return void 0===placementID?placementTypeLookup[placementLookupKey]||Object.values(placementTypeLookup)[0]:placementTypeLookup[placementLookupKey]=placementID}}}),SSP_BSW_Request.__SSP_Class=SSP_BSW,Object.assign(SSP_BSW_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_BSW_Request.prototype,"constructor")}),{provider:"bsw",init:function(){var requestData=this.getRequestData(),options=this.getOptions(requestData);return this.fetch(options)},getOptions:function(requestData){return{url:this._getProviderConfig("endpoint"),data:JSON.stringify(requestData),dataType:"json",contentType:"text/plain; charset=UTF-8",method:"POST",type:"POST",timeout:5e3,context:this,complete:function(response,status){this.handleResponse(response,status),this.done()}}},getSiteId:function(){var site_id=this._getProviderConfig("site_id"),qa_site_id=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&qa_site_id||site_id},getContextData:function(){return _contextual.default.GetData()},getRequestData:function(){var siteId=this.getSiteId(),segments=(bouncex.segments||[]).map(String),deviceInfo=this.getDevice();bouncex.state.deviceSua&&(deviceInfo=_objectSpread(_objectSpread({},deviceInfo),{},{sua:bouncex.state.deviceSua}));var requestData={publisher_id:Number(siteId)||0,placements:[],schain:this.schainObject(),segments,context:this.getContextData(),device:deviceInfo};for(var campaign_id in requestData.eids=this.getExtraIds(),this.campaign_settings)this.__getCampaignRequestData(requestData,this.campaign_settings[campaign_id]);return requestData},__getCampaignRequestData:function(requestData,campaign_settings){var campaignData={code:campaign_settings.deployment};for(var placement_id in campaign_settings.placement_settings)this.__getPlacementRequestData(campaignData,campaign_settings.placement_settings[placement_id]);return requestData.placements.push(campaignData),campaignData},__getPlacementRequestData:function(campaignData,placement_settings){var impressonType="display"===placement_settings.type?"banner":"video",placementData=campaignData[impressonType]||(campaignData[impressonType]={sizes:[]});if("video"===impressonType&&placementData.sizes.length>0)return null;var size={w:Number(placement_settings.width),h:Number(placement_settings.height)};return placementData.sizes.push(size),placement_settings.moat&&!placementData.va&&(placementData.va=placement_settings.moat.v,"video"===impressonType&&(placementData.cr=Math.min(placement_settings.moat.c,100))),placementData},schainObject:function(){return{ver:"1.0",complete:1,nodes:[{asi:"behave.com",sid:this.getSiteId()+"",hp:1}]}},handleResponse:function(response,statusText){var results=bouncex.ads._constants.bidEvents,result=results.error,providerData={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};if(200===response.status){var bidResponse=response.responseJSON||JSON.parse(response.responseText);if(bidResponse.placement_bid&&bidResponse.placement_bid.length){var handleResponseCampaign=this.handleResponseCampaign.bind(this,providerData);return bidResponse.placement_bid.map(handleResponseCampaign)}result=results.empty}else"abort"===statusText||"timeout"===statusText?result=results.none:0===response.status?result=results.cancelled:204===response.status&&(result=results.empty);this.reportResult(result,providerData)},getBidCampaignId:function(bidObj){if(!this.lookup_campaign_ids)return this.getCampaignId();var campaign_lookup_key=bidObj.code;return this.lookup_campaign_ids[campaign_lookup_key]||Object.values(this.lookup_campaign_ids)[0]},getBidPlacementId:function(bidObj,campaign_id){var placementLookupTable=this.campaign_settings&&this.campaign_settings[campaign_id]&&this.campaign_settings[campaign_id].lookup_placement_ids,placementSettings={type:bidObj.media_type,width:bidObj.w,height:bidObj.h};return this.ssp.lookupPlacementID(placementLookupTable,placementSettings)},handleResponseCampaign:function(providerData,bidObj){var result=bouncex.ads._constants.bidEvents.fill,campaign_id=this.getBidCampaignId(bidObj),campaign=this.campaigns[campaign_id],placement_id=this.getBidPlacementId(bidObj,campaign_id),placement=campaign.gbi.placements[placement_id]||{},price=this.convertPrice(bidObj.price,bidObj.dealid);bouncex.ads.log(campaign_id,"placement #"+placement_id+" received a bid from bidswitch");var bid=bouncex.ads._createBid({provider:this.provider,campaignId:campaign_id,placementId:placement_id,adUnitId:placement.adUnitId,arrivalTime:this.endTime,adHtml:bidObj.adm,vastData:bidObj.adm,dealId:bidObj.dealid,dealName:bidObj.deal_name,price:Number(price)});campaign.gbi.bids.push(bid);var eventData=Object.assign({campaign_id,deployment:campaign.deployment||"unknown",requested_ad_units:placement.width+"x"+placement.height,deal_id:bidObj.dealid,deal_name:bidObj.deal_name,price,auction_number:campaign.gbi.auctionCount,ad_unit_id:placement.adUnitId},providerData);return this.reportResult(result,eventData),bid},convertPrice:function(grossPrice,dealId){return dealId?(.96*grossPrice).toFixed(5):(.85*grossPrice).toFixed(5)}})},5432:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_INDEX_Request=SSP_INDEX_Request,exports.default=SSP_INDEX;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_helpers=__webpack_require__(2481),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3036)),_contextual=_interopRequireDefault(__webpack_require__(3723));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function SSP_INDEX(settings){this.__init(settings||{})}function SSP_INDEX_Request(request_settings){_ssp.SSP_Request.apply(this,arguments)}Object.assign(SSP_INDEX.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_INDEX.prototype,"constructor")}),{__Request_Class:SSP_INDEX_Request,provider:"index",__createAllBidRequests:function(providerBidSettings){var requests=[];return this.__groupBidRequests().forEach((function(requestGroup){var requestSettings=Object.assign(requestGroup,providerBidSettings),bidRequest=this.__instantiateBidRequest(requestSettings);requests.push(bidRequest)}),this),requests},__groupBidRequests:function(){var _this=this,requestGroups=new Map,_loop=function(campaignID){(_this.campaign_placement_ids[campaignID]||[]).forEach((function(placementID){var placementSettings={campaignID,placementID};this.addRequestGroupPlacement(requestGroups,placementSettings)}),_this)};for(var campaignID in this.auction.campaigns)_loop(campaignID);return requestGroups},addRequestGroupPlacement:function(requestGroups,placementSettings){var campaignID=placementSettings.campaignID,placementID=placementSettings.placementID,requestGroup=this.getRequestGroup(requestGroups,placementSettings);if(void 0!==requestGroup){var campaign=(0,_helpers.getOrSet)(requestGroup.campaigns,campaignID,this.auction.campaigns[campaignID]),placement=campaign.gbi.placements[placementID],campaignSettings=(0,_helpers.getOrSet)(requestGroup.campaignSettings,campaignID,{campaignID,deployment:campaign.deployment,placementSettings:{}});Object.assign(placementSettings,this.__createPlacementBidRequest(campaignID,placement,placementID)),campaignSettings.placementSettings[placementID]=placementSettings;var placementLookupKey=this.getPlacementLookupKey(placementSettings);requestGroup.lookupPlacementSettings[placementLookupKey]=placementSettings}},getRequestGroup:function(requestGroups,placementSettings){var requestKey=this.getRequestKey(placementSettings);return(0,_helpers.getOrSet)(requestGroups,requestKey,{requestKey,campaigns:{},campaignSettings:{},lookupPlacementSettings:{}})},getRequestKey:function(placementSettings){var campaignID=placementSettings.campaignID;return[campaignID,this.auction.campaigns[campaignID].gbi.placements[placementSettings.placementID].mediaType].join("|")},getPlacementLookupKey:function(placementSettings){var campaignID=placementSettings.campaignID;return this.auction.campaigns[campaignID],[placementSettings.impid].join("|")},__createPlacementBidRequest:function(campaignID,placement,placementID){return{impid:this.getUniqueImpressionID(),campaignID,placement,placementID,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat}}}),SSP_INDEX_Request.__SSP_Class=SSP_INDEX,Object.assign(SSP_INDEX_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_INDEX_Request.prototype,"constructor")}),{provider:"index",intermediaryId:"869cff86d1c453c1",init:function(){var requestData=this.getRequestData(),options=this.getOptions(requestData);return this.fetch(options)},getOptions:function(requestData){var isVideo=this.isVideo(),options={url:bouncex.ssl?"https://as-sec.casalemedia.com/cygnus":"http://as.casalemedia.com/cygnus",data:{v:isVideo?"8.8":"7",cb:Date.now(),s:this.getSiteId(),r:JSON.stringify(requestData)},dataType:"text",contentType:"application/x-www-form-urlencoded",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(response,status){this.handleResponse(response,status),this.done()}};return isVideo&&(options.data.fn="jsonp"),options},isVideo:function(){var campaignSettings=Object.values(this.campaignSettings)[0];return"video"===Object.values(campaignSettings.placementSettings)[0].type},getSiteId:function(){var site_id=this._getProviderConfig("s"),qa_site_id=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&qa_site_id||site_id},getRequestData:function(){var _site$ext,site=this.getBaseSite(),segment=(bouncex.segments||[]).map((function(segment){return"".concat(segment)}));site.ext=_objectSpread(_objectSpread({},null==site?void 0:site.ext),{},{data:_objectSpread(_objectSpread({},null==site||null===(_site$ext=site.ext)||void 0===_site$ext?void 0:_site$ext.data),{},{segment})}),site.page=this.getUrlWithParams();var requestData={id:String((0,_helpers.getEpochSeconds)()),imp:[],site,device:this.getDevice(),source:{pchain:"".concat(this.intermediaryId,":").concat(bouncex.website.id),ext:{schain:this.schainObject()}}};for(var campaignID in this.campaignSettings)this.__getCampaignRequestData(requestData,this.campaignSettings[campaignID]);this.appendCompliance(requestData);var _requestData$site,_requestData$site$ext,_requestData$site$ext2,_requestData$site$ext3,_contextual$iab,contextual=_contextual.default.GetData();return null!=contextual&&contextual.dataAvailable&&(null!==(_requestData$site$ext=(_requestData$site=requestData.site).ext)&&void 0!==_requestData$site$ext||(_requestData$site.ext={}),null!==(_requestData$site$ext3=(_requestData$site$ext2=requestData.site.ext).data)&&void 0!==_requestData$site$ext3||(_requestData$site$ext2.data={}),contextual.keywords&&(requestData.site.ext.data.keywords=contextual.keywords),null!==(_contextual$iab=contextual.iab)&&void 0!==_contextual$iab&&_contextual$iab.v1&&(requestData.site.ext.data.iab=contextual.iab.v1.map((function(iab){return iab.id})))),requestData},getUrlWithParams:function(){var campaign_type=this.getCampaign().type,pageUrl=document.location.protocol+"//"+document.location.hostname+document.location.pathname,device=bouncex.state.mobile?"mobile":"desktop",segments=(bouncex.segments||[]).map((function(segment){return"(".concat(segment,")")}));return pageUrl+"?deployment=".concat(campaign_type,"&device=").concat(device,"&segments=").concat(segments.join(","))},__getCampaignRequestData:function(requestData,campaignSettings){var campaignImpressions=requestData.imp;for(var placement_id in campaignSettings.placementSettings){var imp=this.__getPlacementRequestData(campaignSettings,campaignSettings.placementSettings[placement_id]);campaignImpressions.push(imp)}return campaignImpressions},__getPlacementRequestData:function(campaignData,placementSettings){return"video"===placementSettings.type?this.createVideoImpression(placementSettings):this.createDisplayImpression(placementSettings)},schainObject:function(bidRequestId){var schain={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:bouncex.website.id+"",hp:1}]};if(bidRequestId){var node=schain.nodes[0];node.rid=bidRequestId,node.name=bouncex.website.name,node.domain=bouncex.website.domain}return schain},handleResponse:function(response,statusText){var results=bouncex.ads._constants.bidEvents,result=results.error,providerData={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};if(200===response.status){var bids=this.getBidsFromResponse(response);if(bids&&bids.length){var responseBid=this.handleResponseBid.bind(this,providerData);return bids.map(responseBid)}result=results.empty}else"abort"===statusText||"timeout"===statusText?result=results.none:0===response.status?result=results.cancelled:204===response.status&&(result=results.empty);this.reportResult(result,providerData)},getBidsFromResponse:function(response){try{var responseJSON=response.responseJSON;if(!responseJSON&&response.responseText){var responseText=response.responseText,jsonString=responseText.substring(responseText.indexOf("(")+1,responseText.lastIndexOf(")"));responseJSON=JSON.parse(jsonString)}return responseJSON.seatbid[0].bid}catch(e){return!1}},getBidPlacementSettings:function(bidObj){return this.lookupPlacementSettings[bidObj.impid]},handleResponseBid:function(providerData,bidObj){var result=bouncex.ads._constants.bidEvents.fill,placementSettings=this.getBidPlacementSettings(bidObj),placement_id=placementSettings.placementID,placement=placementSettings.placement,campaignID=placementSettings.campaignID,campaign=this.auction.campaigns[campaignID];bouncex.ads.log(campaignID,"placement #".concat(placement_id," received a bid from ").concat(this.provider));var bidExt=bidObj.ext||{},dealId=bidExt.dealid||bidObj.dealid,dealName=bidExt.dealname||bidObj.dealname,price=this.convertPrice(bidExt.pricelevel)||bidObj.price||0,vastData=bidExt.vasturl||bidObj.adm,requested_ad_units="display"===placementSettings.type?placementSettings.width+"x"+placementSettings.height:"video",bid=bouncex.ads._createBid({provider:this.provider,campaignId:campaignID,placementId:placement_id,adUnitId:placement.adUnitId,arrivalTime:this.endTime,adHtml:bidObj.adm,vastData,dealId,dealName,price:Number(price)});campaign.gbi.bids.push(bid);var eventData=Object.assign({campaign_id:campaignID,deployment:campaign.deployment||"unknown",requested_ad_units,deal_id:dealId||"NA",deal_name:dealName||"NA",price:this._getReportablePrice(price)||"NA",auction_number:campaign.gbi.auctionCount,ad_unit_id:placement.adUnitId},providerData);return this.reportResult(result,eventData),bid},convertPrice:function(priceString){if(!priceString)return 0;var decimalIndex=priceString.length-2,charArray=priceString.split("");charArray.splice(decimalIndex,0,".");var formattedString=charArray.join("").replace(/[^0-9.]/g,"");return Number(formattedString).toFixed(5)}})},7392:(__unused_webpack_module,exports,__webpack_require__)=>{var _typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_PBM_Request=SSP_PBM_Request,exports.default=SSP_PBM;__webpack_require__(2481);var _ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(8897));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function SSP_PBM(settings){_ssp.default.call(this,settings)}function SSP_PBM_Request(request_settings){_ssp.SSP_CONSOLIDATED_Request.call(this,request_settings)}Object.assign(SSP_PBM.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_PBM.prototype,"constructor")}),{__Request_Class:SSP_PBM_Request,provider:"pbm"}),SSP_PBM_Request.__SSP_Class=SSP_PBM,Object.assign(SSP_PBM_Request.prototype=Object.create(_ssp.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_PBM_Request.prototype,"constructor")}),{provider:"pbm",getOptions:function(requestData){var _this=this;return{url:document.location.protocol+"//"+this._getProviderConfig("endpoint"),data:JSON.stringify(requestData),method:"POST",type:"POST",contentType:"text/plain; charset=utf-8",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(response,status){_this.handleResponse(response,status),_this.done()}}},getSiteId:function(){var siteIdKey=bouncex.state.mobile?"mobile_id":"desktop_id",site_id=this._getProviderConfig(siteIdKey),qa_site_id=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&qa_site_id||site_id},getRequestData:function(impressionData){var requestId=bouncex.cookie.vid+"_"+bouncex.cookie.sid,publisherId=this._getProviderConfig("publisher_id"),site=this.getBaseSite();site.id=this.getSiteId(),site.publisher.id=publisherId;var requestData={id:requestId,site,device:this.getDevice(),imp:impressionData,source:{pchain:this.pchainString(),ext:{schain:this.schainObject(requestId)}},user:{eids:this.getExtraIds()},at:1,tmax:200};return this.appendCompliance(requestData),requestData},getPlacementRequestData:function(placementSettings){var overrides={secure:bouncex.ssl?1:0,tagid:this.getSiteId()||""};return this.__getPlacementRequestData(placementSettings,overrides)},createDisplayImpression:function(placementSettings,overrides){var imp=this.__createDisplayImpression(placementSettings,overrides);return imp.banner.format=[{w:imp.banner.w,h:imp.banner.h}],imp}})},8897:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_CONSOLIDATED_Request=SSP_CONSOLIDATED_Request,exports.default=SSP_CONSOLIDATED;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_helpers=__webpack_require__(2481),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3036));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function SSP_CONSOLIDATED(settings){_ssp.default.call(this,settings)}function SSP_CONSOLIDATED_Request(request_settings){_ssp.SSP_Request.call(this,request_settings)}Object.assign(SSP_CONSOLIDATED.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_CONSOLIDATED.prototype,"constructor")}),{__Request_Class:SSP_CONSOLIDATED_Request,provider:null,__createAllBidRequests:function(providerBidSettings){var requests=[];return this.__groupBidRequests().forEach((function(requestGroup){var requestSettings=Object.assign(requestGroup,providerBidSettings),bidRequest=this.__instantiateBidRequest(requestSettings);requests.push(bidRequest)}),this),requests},__groupBidRequests:function(){var _this=this,requestGroups=new Map,_loop=function(campaignID){(_this.campaign_placement_ids[campaignID]||[]).forEach((function(placementID){var placementSettings={campaignID,placementID};this.addRequestGroupPlacement(requestGroups,placementSettings)}),_this)};for(var campaignID in this.auction.campaigns)_loop(campaignID);return requestGroups},addRequestGroupPlacement:function(requestGroups,placementSettings){var campaignID=placementSettings.campaignID,placementID=placementSettings.placementID,requestGroup=this.getRequestGroup(requestGroups,placementSettings);if(void 0!==requestGroup){var campaign=(0,_helpers.getOrSet)(requestGroup.campaigns,campaignID,this.auction.campaigns[campaignID]),placement=campaign.gbi.placements[placementID];(0,_helpers.getOrSet)(requestGroup.campaignSettings,campaignID,{campaignID,deployment:campaign.deployment}),Object.assign(placementSettings,this.__createPlacementBidRequest(campaignID,placement,placementID)),this.getImpressionGroup(requestGroup,placementSettings).placementSettings[placementID]=placementSettings;var placementLookupKey=this.getPlacementLookupKey(placementSettings);requestGroup.lookupPlacementSettings[placementLookupKey]=placementSettings}},getRequestGroup:function(requestGroups,placementSettings){var requestKey=this.getRequestKey(placementSettings);return(0,_helpers.getOrSet)(requestGroups,requestKey,{requestKey,campaigns:{},campaignSettings:{},lookupPlacementSettings:{},impressionGroups:{},lookupImpressionGroups:{}})},getRequestKey:function(placementSettings){var campaignID=placementSettings.campaignID;return[campaignID,this.auction.campaigns[campaignID].gbi.placements[placementSettings.placementID].mediaType].join("|")},getImpressionGroup:function(requestGroup,placementSettings){var _this2=this,impressionGroups=requestGroup.impressionGroups,impid=this.getImpressionID(requestGroup,placementSettings);return(0,_helpers.getOrSet)(impressionGroups,impid,(function(){var campaignID=placementSettings.campaignID,impressionKey=_this2.getImpressionKey(placementSettings);return{impid,impressionKey,campaignID,placementSettings:{}}}))},getImpressionID:function(requestGroup,placementSettings){var impressionKey=this.getImpressionKey(placementSettings),impid=placementSettings.impid;if(impid)return requestGroup.lookupImpressionGroups[impressionKey]=impid,impid;var impressionID=(0,_helpers.getOrSet)(requestGroup.lookupImpressionGroups,impressionKey,this.getUniqueImpressionID);return placementSettings.impid=impressionID},getImpressionKey:function(placementSettings){var campaignID=placementSettings.campaignID;return placementSettings.placement,[campaignID,"video"===placementSettings.type?"video":"display"].join("|")},getPlacementLookupKey:function(placementSettings){var dimensions="video"===placementSettings.type?["video"]:[placementSettings.width,placementSettings.height];return[placementSettings.impid].concat(dimensions).join("|")},__createPlacementBidRequest:function(campaignID,placement,placementID){return{campaignID,placement,placementID,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat}}}),SSP_CONSOLIDATED_Request.__SSP_Class=SSP_CONSOLIDATED,Object.assign(SSP_CONSOLIDATED_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_CONSOLIDATED_Request.prototype,"constructor")}),{provider:null,intermediaryId:"869cff86d1c453c1",init:function(){var impressionData=this.__getImpressionRequestData(),requestData=this.getRequestData(impressionData),options=this.getOptions(requestData);return this.fetch(options)},getOptions:function(requestData){throw new Error("Must be implemented in subclass")},getSiteId:function(){throw new Error("Must be implemented in subclass")},getRequestData:function(impressionData){throw new Error("Must be implemented in subclass")},__getImpressionRequestData:function(){return Object.values(this.impressionGroups).map(this.__mergeImpressionGroupData,this)},__mergeImpressionGroupData:function(impressionGroup){return this.getImpressionGroupData(impressionGroup).reduce(this.mergeImpressionGroupData.bind(this))},mergeImpressionGroupData:function(impressionGroupData,placementImpression){var _impressionGroupData$,_impressionGroupData$2,_placementImpression$,_placementImpression$2;return(null===(_impressionGroupData$=impressionGroupData.banner)||void 0===_impressionGroupData$||null===(_impressionGroupData$2=_impressionGroupData$.format)||void 0===_impressionGroupData$2?void 0:_impressionGroupData$2.length)&&(null===(_placementImpression$=placementImpression.banner)||void 0===_placementImpression$||null===(_placementImpression$2=_placementImpression$.format)||void 0===_placementImpression$2?void 0:_placementImpression$2.length)&&Array.prototype.push.apply(impressionGroupData.banner.format,placementImpression.banner.format),_objectSpread(_objectSpread({},placementImpression),impressionGroupData)},getImpressionGroupData:function(impressionGroup){return Object.values(impressionGroup.placementSettings).map(this.getPlacementRequestData,this)},getPlacementRequestData:function(placementSettings){return this.__getPlacementRequestData(placementSettings)},__getPlacementRequestData:function(placementSettings,overrides){return this["video"===placementSettings.type?"createVideoImpression":"createDisplayImpression"](placementSettings,overrides)},pchainString:function(){return"".concat(this.intermediaryId,":").concat(bouncex.website.id)},schainObject:function(bidRequestId){var schain={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:String(bouncex.website.id),hp:1}]};if(bidRequestId){var node=schain.nodes[0];node.rid=bidRequestId,node.name=bouncex.website.name,node.domain=bouncex.website.domain}return schain},handleResponse:function(response,statusText){var results=bouncex.ads._constants.bidEvents,result=results.error;if(200===response.status){var bids=this.getBidsFromResponse(response);if(bids&&bids.length)try{return bids.map(this.handleResponseBid,this)}catch(e){result=results.error}else result=results.empty}else"abort"===statusText||"timeout"===statusText?result=results.none:0===response.status?result=results.cancelled:204===response.status&&(result=results.empty);var providerData={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};this.reportResult(result,providerData)},getBidsFromResponse:function(response){try{return(response.responseJSON||JSON.parse(response.responseText)).seatbid.flatMap((function(seatbid){return seatbid.bid}))}catch(e){return!1}},getImpressionGroup:function(bidObj){var impressionID=this.getImpressionID(bidObj);return this.impressionGroups[impressionID]},getImpressionID:function(bidObj){var impid=bidObj.impid;if(impid)return impid;var impressionKey=this.getImpressionKey(bidObj);return this.lookupImpressionGroups[impressionKey]},getMediaType:function(bidObj){var _bidObj$ext,_bidObj$ext2;return 1===(null===(_bidObj$ext=bidObj.ext)||void 0===_bidObj$ext?void 0:_bidObj$ext.bidtype)||(null===(_bidObj$ext2=bidObj.ext)||void 0===_bidObj$ext2?void 0:_bidObj$ext2.video)||!bidObj.w?"video":"display"},getImpressionKey:function(bidObj){return[bidObj.campaignID,this.getMediaType(bidObj)].join("|")},getPlacementLookupKey:function(bidObj){var dimensions="video"===this.getMediaType(bidObj)?["video"]:[bidObj.w,bidObj.h];return[bidObj.impid].concat(dimensions).join("|")},getBidPlacementSettings:function(bidObj,impressionGroup){var placementLookupKey=this.getPlacementLookupKey(bidObj),placementSettings=this.lookupPlacementSettings[placementLookupKey],placementSettingsFallback=impressionGroup&&Object.values(impressionGroup.placementSettings)[0];return placementSettings||placementSettingsFallback},handleResponseBid:function(bidObj){var bidFilled=bouncex.ads._constants.bidEvents.fill,bidData=this.getResponseBidData(bidObj),campaign=this.auction.campaigns[bidData.campaignId],eventData={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime,campaign_id:bidData.campaignId,deployment:bidData.deployment||"unknown",requested_ad_units:bidData.requestedAdUnits,deal_id:bidData.dealId||"NA",deal_name:bidData.dealName||"NA",price:this._getReportablePrice(bidData.price)||"NA",auction_number:bidData.auctionNumber,ad_unit_id:bidData.adUnitId};this.reportResult(bidFilled,eventData);var bid=bouncex.ads._createBid(bidData);return campaign.gbi.bids.push(bid),campaign.log("placement #".concat(bid.placementId," received a bid from ").concat(bid.provider)),bid},getResponseBidData:function(bidObj){var impressionGroup=this.getImpressionGroup(bidObj),placementSettings=this.getBidPlacementSettings(bidObj,impressionGroup),placementID=placementSettings.placementID,placement=placementSettings.placement,campaignID=placementSettings.campaignID,campaign=this.auction.campaigns[campaignID],isVideo="video"===placementSettings.type,adDimensions="".concat(placementSettings.width,"x").concat(placementSettings.height);return{provider:this.provider,campaignId:campaignID,placementId:placementID,adUnitId:placement.adUnitId,price:Number(bidObj.price||0),adHtml:bidObj.adm,vastData:bidObj.adm,dealId:bidObj.dealid,dealName:bidObj.dealname,arrivalTime:this.endTime,requestedAdUnits:isVideo?"video":adDimensions,deployment:campaign.deployment||"unknown",auctionNumber:campaign.gbi.auctionCount}}})},3036:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_Request=SSP_Request,exports.default=SSP;var _helpers=__webpack_require__(2481),_language=__webpack_require__(5295),_logger=_interopRequireDefault(__webpack_require__(5754)),_contextual=_interopRequireDefault(__webpack_require__(3723)),_identityhub=_interopRequireDefault(__webpack_require__(1634));function SSP(settings){this.__init(settings||{})}function SSP_Request(){var request_settings=Array.prototype.slice.call(arguments);request_settings.forEach((function(settings){settings&&Object.assign(this,settings)}),this),this.__init()}SSP.PRELOAD_ENABLED=!0,SSP.PRELOAD_PROVIDERS=["aqbx","bsw"],SSP.PRERENDER_ENABLED=(0,_helpers.hasFeatureFlag)("PRELOAD_BSW_ADS"),SSP.getUniqueImpressionID=function(){return String(++SSP.getUniqueImpressionID.counter)},SSP.getUniqueImpressionID.counter=0,Object.assign(SSP.prototype,{__Request_Class:SSP_Request,provider:null,requests:null,startTime:null,endTime:null,durationTime:null,campaign_ids:null,campaign_placement_ids:null,__init:function(settings){Object.assign(this,settings)},sendBidRequests:function(requests){return this.startTime=Date.now(),requests.map((function(request){return request.send()}))},createBidRequests:function(){var providerBidSettings={auction:this.auction,ssp:this,provider:this.provider};return this.requests=this.__createAllBidRequests(providerBidSettings)},__createAllBidRequests:function(providerBidSettings){var requests=[];return this.campaign_ids.forEach((function(campaign_id){var campaign_requests=this.__createCampaignBidRequests(providerBidSettings,campaign_id);campaign_requests&&campaign_requests.length&&Array.prototype.push.apply(requests,campaign_requests)}),this),requests},__createCampaignBidRequests:function(providerBidSettings,campaign_id){var campaignBidSettings={campaign:this.auction.campaigns[campaign_id],campaignId:campaign_id},campaign_placement_ids=this.campaign_placement_ids[campaign_id],createPlacementBidRequestFn=this.__createPlacementBidRequest.bind(this,providerBidSettings,campaignBidSettings);return campaign_placement_ids.map(createPlacementBidRequestFn)},__createPlacementBidRequest:function(providerBidSettings,campaignBidSettings,placement_id){var placement=campaignBidSettings.campaign.gbi.placements[placement_id],placementBidSettings=Object.assign({placement,placementId:placement_id,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat},campaignBidSettings,providerBidSettings);return this.__instantiateBidRequest(placementBidSettings)},__instantiateBidRequest:function(bidSettings){return SSP_Request.factory(this,bidSettings)},getIncompleteRequests:function(){return this.requests.filter((function(request){return!request.isComplete()}))},checkIfDone:function(){return null!==this.endTime||null===this.requests||0===this.getIncompleteRequests().length&&(this.__done(),!0)},abortFutileRequests:function(){var incompleteRequests=this.getIncompleteRequests();if(0===incompleteRequests.length)return[];var auctionEnded=!!this.auction.endTime;return incompleteRequests.filter((function(request){return!(!auctionEnded&&request.isViable()||(request.abort(),0))}))},__done:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.auction.checkBidRequestsDone())},getUniqueImpressionID:SSP.getUniqueImpressionID}),Object.defineProperties(SSP.prototype,{__Request_Prototype:{writable:!0},auction:{writable:!0}}),SSP_Request.__SSP_Class=SSP,SSP_Request.factory=function(ssp,request_settings){var provider_name=ssp.provider,request=bouncex.ads._requestIndex[provider_name](Object.assign({provider:provider_name},request_settings));return request instanceof SSP_Request?request:new(ssp.__Request_Class||SSP_Request)(request,request_settings)},Object.assign(SSP_Request.prototype,{aborted:!1,startTime:null,endTime:null,duration:null,__init:function(){this.auction||(this.auction=bouncex),this.ssp||(this.ssp=Object.create(this.constructor.__SSP_Class.prototype)),this.__initCampaigns()},__initCampaigns:function(){this.campaigns?Object.values(this.campaigns).forEach(this.__initCampaign,this):(this.campaign||this.campaignId)&&(this.campaign?this.campaignId||(this.campaignId=this.campaign.id):this.campaign=this.auction.campaigns[this.campaignId]||{},(this.campaigns={})[this.campaignId]=this.campaign,this.__initCampaign(this.campaign))},__initCampaign:function(campaign){campaign.gbi||(campaign.gbi={}),campaign.gbi.requests||(campaign.gbi.requests=[]),campaign.gbi.requests.push(this)},send:function(){return this.init()},fetch:function(options){return this.startTime=Date.now(),this.request=bouncex.utils.doAjaxRequest(options),this.request},done:function(){this.endTime||(this.endTime=Date.now(),this.duration=this.endTime-this.startTime,this.ssp&&this.ssp.checkIfDone())},reportResult:function(result,eventData){eventData||(eventData={}),eventData.partner||(eventData.partner=this.provider);var campaign_id=eventData.campaign_id||this.getCampaignId();_logger.default.debug({message:"Reporting Result (".concat(result,")"),group:"Ads Auction (".concat(eventData.partner,")"),campaignId:campaign_id,metadata:eventData}),bouncex.ads.report(campaign_id,result,eventData)},end:function(){this.request&&!this.endTime&&(this.aborted=!0,this.request.abort())},abort:function(){this.end()},getCampaignId:function(){return this.campaignId||Object.keys(this.campaigns||this.campaignSettings)[0]||null},getCampaign:function(campaignId){var campaign_id=campaignId||this.getCampaignId();return campaign_id&&(this.campaigns||this.auction.campaigns)[campaign_id]},getCampaigns:function(){return this.campaigns?Object.values(this.campaigns):this.campaignSettings?Object.keys(this.campaignSettings).map((function(campaignID){return this.auction.campaigns[campaignID]}),this):[this.auction.campaigns[this.campaignId]]},_getProviderConfig:function(key){return bouncex.ads._getProviderConfig(this.provider,key)},getUniqueImpressionID:SSP.getUniqueImpressionID,createDisplayImpression:function(placement_settings,overrides){return this.__createDisplayImpression(placement_settings,overrides)},__createDisplayImpression:function(placement_settings,overrides){return Object.assign({id:placement_settings.impid||this.getUniqueImpressionID(),banner:{w:Number(placement_settings.width),h:Number(placement_settings.height)}},overrides||{})},createVideoImpression:function(placement_settings,overrides){return this.__createVideoImpression(placement_settings,overrides)},__createVideoImpression:function(placement_settings,overrides){var interstitial="overlay"===placement_settings.deployment,videoImpression={id:placement_settings.impid||this.getUniqueImpressionID(),video:{mimes:["video/mp4","application/javascript"],minduration:3,maxduration:150,protocols:[2,3,5,6],linearity:1,api:[1,2],startdelay:0,placement:interstitial?5:4,playbackmethod:[2]}};return placement_settings.width&&(videoImpression.video.w=Number(placement_settings.width)),placement_settings.height&&(videoImpression.video.h=Number(placement_settings.height)),Object.assign(videoImpression,overrides||{})},appendCompliance:function(requestData){var _requestData$regs,_requestData$regs2,_requestData$regs2$ex,_bouncex$compliance,_bouncex$compliance2,_bouncex$compliance2$,_requestData$user,_requestData$user2,_requestData$user2$ex,_bouncex$compliance$t;null!==(_requestData$regs=requestData.regs)&&void 0!==_requestData$regs||(requestData.regs={}),null!==(_requestData$regs2$ex=(_requestData$regs2=requestData.regs).ext)&&void 0!==_requestData$regs2$ex||(_requestData$regs2.ext={}),null!==(_bouncex$compliance=bouncex.compliance)&&void 0!==_bouncex$compliance&&_bouncex$compliance.tcfData&&(requestData.regs.ext.gdpr=bouncex.compliance.tcfData.gdpr?1:0,null!==(_requestData$user=requestData.user)&&void 0!==_requestData$user||(requestData.user={}),null!==(_requestData$user2$ex=(_requestData$user2=requestData.user).ext)&&void 0!==_requestData$user2$ex||(_requestData$user2.ext={}),requestData.user.ext.consent=bouncex.compliance.tcfData.string,requestData.user.ext.consented_providers_settings={consented_providers:(null!==(_bouncex$compliance$t=bouncex.compliance.tcfData.consented_providers)&&void 0!==_bouncex$compliance$t?_bouncex$compliance$t:[]).map(Number)}),null!==(_bouncex$compliance2=bouncex.compliance)&&void 0!==_bouncex$compliance2&&null!==(_bouncex$compliance2$=_bouncex$compliance2.uspData)&&void 0!==_bouncex$compliance2$&&_bouncex$compliance2$.uspString&&(requestData.regs.ext.us_privacy=bouncex.compliance.uspData.uspString)},getExtraIds:function(){var deviceId=window.bouncex.ads.deviceOptedStatus,eids=[];return deviceId&&eids.push({source:"bxid",uids:[{id:deviceId,atype:1}]}),_identityhub.default.getIDsForBidRequests().forEach((function(eid){eids.push(eid)})),eids},getDevice:function(){return{ua:navigator.userAgent,ip:bouncex.state.vip,js:1,language:(0,_language.getDeviceLanguage)().toUpperCase()}},getBaseSite:function(){var site={mobile:bouncex.state.mobile?1:0,page:decodeURIComponent(bouncex.calling_url),name:bouncex.website.name,domain:window.location.hostname,privacypolicy:1};bouncex.referrer&&(site.ref=decodeURIComponent(bouncex.referrer));var _contextual$iab,contextual=_contextual.default.GetData();return null!=contextual&&contextual.dataAvailable&&(contextual.keywords&&(site.keywords=contextual.keywords.map((function(keyword){return(null!=keyword?keyword:"").replace(/_/g," ")})).join(",")),null!==(_contextual$iab=contextual.iab)&&void 0!==_contextual$iab&&_contextual$iab.v1&&(site.pagecat=contextual.iab.v1.map((function(iab){return iab.id})))),site.publisher={domain:site.domain,name:site.name},site},_getReportablePrice:function(price){return price&&Number(price).toFixed(5)},isComplete:function(){return!(!this.endTime&&!this.aborted)},isViable:function(){if(this.isComplete())return!1;for(var requestCampaigns=this.getCampaigns(),i=0;i<requestCampaigns.length;i++){var campaign=requestCampaigns[i];if(!campaign.failed&&!campaign.winningBid)return!0}return!1}}),Object.defineProperties(SSP_Request.prototype,{auction:{writable:!0},ssp:{writable:!0},campaign:{writable:!0},campaigns:{writable:!0},placement:{writable:!0}})},7504:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.displayAd=void 0;__webpack_require__(4544);var _helpers=__webpack_require__(2481);exports.displayAd=function(campaign,displayFrame,container){var slab=campaign.getElementSlab(),deploymentInstance=campaign.deployment_type;"floater"===campaign.deployment&&prepareSmartHeaderAnimation(slab),container.append(displayFrame),"floater"===campaign.deployment&&animateSmartHeaderIntoViewport(slab,deploymentInstance)};var prepareSmartHeaderAnimation=function(slab){slab.style.transition="margin-top .5s ease";var offsetAdPositionAmount=Math.ceil(.2*(new _helpers.WindowProps).height);slab.style.marginTop="-".concat(offsetAdPositionAmount,"px")},animateSmartHeaderIntoViewport=function(slab,deploymentInstance){var endSmartHeaderAnimationIfPinnedID=setInterval((function(){return endSmartHeaderAnimationIfPinned(slab,deploymentInstance)}),10);setTimeout((function(){clearInterval(endSmartHeaderAnimationIfPinnedID),slab.style.marginTop="0"}),400)},endSmartHeaderAnimationIfPinned=function(slab,deploymentInstance){deploymentInstance.getIsPinned()&&(slab.style.transition="",slab.style.marginTop="0")}},2501:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={bidIsPerformanceAd:function(bid){return!(!bid||!bid.dealName||-1===bid.dealName.indexOf("PerformanceAds"))||(!(!bid||!bid.dealId||0!==bid.dealId.indexOf("PA"))||!(null==bid||!bid.adHtml)&&-1!==bid.adHtml.indexOf("wkndSegment.audienceID"))}};exports.default=_default},7975:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var _window$bouncex,_window$bouncex$produ,_interopRequireDefault=__webpack_require__(4836),_recirc=_interopRequireDefault(__webpack_require__(134)),_ads=_interopRequireDefault(__webpack_require__(8660)),_video=_interopRequireDefault(__webpack_require__(1697)),_domHelpers=__webpack_require__(7874),_segmentation=_interopRequireDefault(__webpack_require__(1871)),_pubs=_interopRequireDefault(__webpack_require__(2233));null!==(_window$bouncex$produ=(_window$bouncex=window.bouncex).products)&&void 0!==_window$bouncex$produ||(_window$bouncex.products={}),window.bouncex.products.ads={init_public_functions:function(){bouncex.recirc=_recirc.default,bouncex.seg=_segmentation.default,bouncex.ads=bouncex.gbi2=_ads.default,bouncex.pubs=_pubs.default,bouncex.video=_video.default,bouncex.gbi={shrinkToFitWindow:_domHelpers.shrinkToFitWindow,shrinkToFitParent:_domHelpers.shrinkToFitParent,wrapContentInIframe:_domHelpers.wrapContentInIframe,log:function(ca_id,msg,fail){bouncex.ads.log(ca_id,msg,fail)},doAjaxRequest:function(ca_id,options){bouncex.campaigns[ca_id].gbi.ajaxRequest=bouncex.utils.doAjaxRequest(options)}}},preCampaignFunctions:function(){bouncex.ads.init(),bouncex.seg.init(),bouncex.pubs.init()}}},3723:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_typeof2=_interopRequireDefault(__webpack_require__(8698)),_ajax=_interopRequireDefault(__webpack_require__(9974)),_logger=_interopRequireDefault(__webpack_require__(5754)),_url=__webpack_require__(1847);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var Contextual={BaseURL:"https://contextual-analytics.wunderkind.co/api/contextual",Cache:{},determineURL:function(){var url=decodeURIComponent(bouncex.calling_url),canonical=(0,_url.getCanonicalURL)();return null!=canonical?canonical:url},supportsContextual:function(){return"object"===(0,_typeof2.default)(bouncex.website.sspConfig)&&("bsw"in bouncex.website.sspConfig||"index"in bouncex.website.sspConfig)},GetData:function(){var _Contextual$Cache$pag,pageURL=Contextual.determineURL();return null!==(_Contextual$Cache$pag=Contextual.Cache[pageURL])&&void 0!==_Contextual$Cache$pag?_Contextual$Cache$pag:null},Fetch:function(){var pageURL=Contextual.determineURL();Contextual.GetData()||_ajax.default.get({url:Contextual.BaseURL,data:{url:pageURL,website_id:bouncex.website.id},error:function(xhr){var data,responseText=null==xhr?void 0:xhr.responseText;if(responseText)try{data=JSON.parse(responseText)}catch(_unused){}data&&void 0!==data.dataAvailable?(Contextual.Cache[pageURL]=data,_logger.default.info({group:"Ads",message:"No contextual data was available for this URL"})):_logger.default.warn({group:"Ads",message:"There was an error retrieving the contextual data for this page"})},success:function(data){var _dataToSave$threats,dataToSave=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({dataAvailable:data.dataAvailable},data.verityData);null!==(_dataToSave$threats=dataToSave.threats)&&void 0!==_dataToSave$threats||(dataToSave.threats=[]),dataToSave.keywords&&(dataToSave.keywords=dataToSave.keywords.map((function(keyword){return keyword.replace(/\s+/g,"_")}))),Contextual.Cache[pageURL]=dataToSave,_logger.default.debug({group:"Ads",message:"Retrieved contextual data for this page",metadata:{originalContext:data,transformedContext:dataToSave}})}})}},_default=Contextual;exports.default=_default},8066:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_url=(__webpack_require__(2481),__webpack_require__(1847)),_constants=_interopRequireDefault(__webpack_require__(4460));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var IAS={shouldTrackImpression:function(){return Math.random()<.5},createQueryString:function(params,extras){return(0,_url.qs)(function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({anId:931508,advId:params.trigger,campId:params.placement,pubId:params.websiteId,chanId:params.ssp,placementId:params.adUnitId},extras))},display:{scriptSrc:"https://pixel.adsafeprotected.com/jload?",getScriptTag:function(params){if(!IAS.shouldTrackImpression())return bouncex.ads.log(null,"SAMPLE: IAS script blocked"),"";var queryString=IAS.createQueryString(params,{ias_adpath:params.adsPath});return"".concat(IAS.display.scriptSrc).concat(queryString)}},video:{wrapVastURL:function(params,vastURL){if(!IAS.shouldTrackImpression())return bouncex.ads.log(null,"SAMPLE: IAS script blocked"),vastURL;params.trigger=_constants.default.wkndTriggerPlaceholder;var queryString=IAS.createQueryString(params,{originalVast:vastURL});return"https://vast.adsafeprotected.com/vast?".concat(queryString)}}},_default=IAS;exports.default=_default},1634:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_helpers=_interopRequireDefault(__webpack_require__(2481)),_logger=_interopRequireDefault(__webpack_require__(5754)),_complianceChecks=_interopRequireDefault(__webpack_require__(5216)),IdentityHub={supportsIdentityHub:function(){var _bouncex$state,_bouncex$state2,_bouncex$compliance$u,_bouncex$compliance;if([4925,4923,5212,5213,5442,4924,4894,5204,4926,5205,5460,5206,5163,5210,5214,5211,5208,5209,5162,5207].includes(bouncex.website.id))return!1;if("object"!==(0,_typeof2.default)(bouncex.website.sspConfig))return!1;var supportedSsp="bsw"in bouncex.website.sspConfig||"pbm"in bouncex.website.sspConfig,supportedRegions="US"===(null===(_bouncex$state=bouncex.state)||void 0===_bouncex$state?void 0:_bouncex$state.geo.country_code)||"CA"===(null===(_bouncex$state2=bouncex.state)||void 0===_bouncex$state2?void 0:_bouncex$state2.geo.country_code),ccpaOptOut=_complianceChecks.default._integrations.ccpa.hasOptedOut(null!==(_bouncex$compliance$u=null===(_bouncex$compliance=bouncex.compliance)||void 0===_bouncex$compliance?void 0:_bouncex$compliance.uspData)&&void 0!==_bouncex$compliance$u?_bouncex$compliance$u:{});return supportedSsp&&supportedRegions&&!ccpaOptOut},injectIntoPage:function(){IdentityHub.supportsIdentityHub()&&(bouncex.ads.identityHubFrame=_helpers.default.createElement("iframe",{srcdoc:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <script type="text/javascript" async src="//ads.pubmatic.com/AdServer/js/pwt/156512/6397/pwt.js"><\/script>\n  </head>\n  <body></body>\n</html>',id:"bcx_identityhub_frame",title:"empty",style:"display:none"},document.body),_logger.default.debug({group:"Ads",message:"Added IdentityHub Iframe"}))},getIDsForBidRequests:function(){var _bouncex$ads$identity,_bouncex,_bouncex$ads,_bouncex$ads$identity2,_bouncex$ads$identity3,_bouncex$ads$identity4;return null!==(_bouncex$ads$identity=null===(_bouncex=bouncex)||void 0===_bouncex||null===(_bouncex$ads=_bouncex.ads)||void 0===_bouncex$ads||null===(_bouncex$ads$identity2=_bouncex$ads.identityHubFrame)||void 0===_bouncex$ads$identity2||null===(_bouncex$ads$identity3=_bouncex$ads$identity2.contentWindow)||void 0===_bouncex$ads$identity3||null===(_bouncex$ads$identity4=_bouncex$ads$identity3.ihowpbjs)||void 0===_bouncex$ads$identity4?void 0:_bouncex$ads$identity4.getUserIdsAsEids())&&void 0!==_bouncex$ads$identity?_bouncex$ads$identity:[]}},_default=IdentityHub;exports.default=_default},9152:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=_interopRequireDefault(__webpack_require__(2481)),_url=__webpack_require__(1847),_ajax=_interopRequireDefault(__webpack_require__(9974)),MOAT={shouldSampleMoatPixel:function(){var deviceID=bouncex.cookie&&bouncex.cookie.did;if(MOAT.hasOwnProperty("shouldSample"))return MOAT.shouldSample;if(_helpers.default.visitorTestMode("bxtest"))return MOAT.shouldSample=!0;var shouldSample=(deviceID?Number(deviceID.slice(-2)):Math.floor(100*Math.random()))<30;return MOAT.shouldSample=shouldSample},display:{scriptSrc:document.location.protocol+"//z.moatads.com/bounceexchangedisplay18031701869/moatad.js",getScriptTag:function(params){if(!MOAT.shouldSampleMoatPixel())return bouncex.ads.log(null,"SAMPLE: MOAT script blocked"),"";var queryString=(0,_url.qs)({moatClientLevel1:params.website,moatClientLevel2:params.deviceType,moatClientLevel3:params.trigger,moatClientLevel4:params.adSize,zMoatPlacement:params.placement,zMoatSSP:params.ssp});return"".concat(this.scriptSrc,"?").concat(queryString)}},video:{scriptSrc:document.location.protocol+"//z.moatads.com/jwplayerplugin0938452/moatplugin.js",partnerCode:"bouncexjsvideojwplayer997111196347",loadPlugin:function(campaignId){if(!MOAT.shouldSampleMoatPixel())return bouncex.ads.log(campaignId,"SAMPLE: MOAT script blocked"),"";var self=this;_ajax.default.getScript(self.scriptSrc,(function(){self.addImpressionListener(campaignId)}))},addImpressionListener:function(campaignId){var campaign=bouncex.campaigns[campaignId],self=this;campaign.gbi.player.on("adImpression",(function(eventData){window.moatjw.add({partnerCode:self.partnerCode,player:this,adImpressionEvent:eventData,ids:{level1:window.location.host+" ("+bouncex.website.id+")",level2:bouncex.state.mobile?"mobile":"desktop",level3:campaign.trigger,level4:"video",slicer1:"overlay"===campaign.type?campaign.type:campaign.subtype,zMoatSSP:campaign.winningBid?campaign.winningBid.provider:""},duration:30})}))}}},_default=MOAT;exports.default=_default},4460:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={wkndTriggerPlaceholder:"wunderkind-trigger-placeholder"};exports.default=_default},9224:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _node_parsers=_interopRequireDefault(__webpack_require__(8559)),_element_parsers=_interopRequireDefault(__webpack_require__(2451)),_validations=_interopRequireDefault(__webpack_require__(4546)),DataProcessor={getAd:function(campaignId,vastXml){var mediaFile=vastXml.getElementsByTagName("MediaFile"),vastAd=DataProcessor.addMetaData(campaignId,vastXml),adRecord=bouncex.campaigns[campaignId].video.vast;_validations.default.checkMediaExists(campaignId,vastXml,mediaFile),_element_parsers.default.init(campaignId,vastAd,vastXml,adRecord)},getNodeTextOrFalse:function(vastAd,elementName){return _node_parsers.default.parseNodeText(vastAd.getElementsByTagName(elementName)[0])||!1},addMetaData:function(campaignId,vastXml){var vastAd=_node_parsers.default.getXmlNode(campaignId,vastXml,"Ad",2),adMetaData={};return null!==vastAd&&(adMetaData.adId=vastAd.getAttribute("id")||null,adMetaData.type=vastAd.nodeName||null,adMetaData.system=DataProcessor.getNodeTextOrFalse(vastAd,"AdSystem"),adMetaData.title=DataProcessor.getNodeTextOrFalse(vastAd,"AdTitle"),adMetaData.description=DataProcessor.getNodeTextOrFalse(vastAd,"Description"),adMetaData.system=DataProcessor.getNodeTextOrFalse(vastAd,"AdSystem"),adMetaData.title=DataProcessor.getNodeTextOrFalse(vastAd,"AdTitle"),adMetaData.description=DataProcessor.getNodeTextOrFalse(vastAd,"Description"),adMetaData.advertiser=DataProcessor.getNodeTextOrFalse(vastAd,"Advertiser"),adMetaData.pricing=DataProcessor.getNodeTextOrFalse(vastAd,"Pricing"),adMetaData.category=DataProcessor.getNodeTextOrFalse(vastAd,"Category"),0===bouncex.campaigns[campaignId].video.vast.wrapperLevel&&(bouncex.campaigns[campaignId].video.vast.metaData=adMetaData),vastAd)}},_default=DataProcessor;exports.default=_default},2451:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _node_parsers=_interopRequireDefault(__webpack_require__(8559)),_tracking=_interopRequireDefault(__webpack_require__(2783)),_helpers=_interopRequireDefault(__webpack_require__(1618)),_load_player=_interopRequireDefault(__webpack_require__(4601)),_init=_interopRequireDefault(__webpack_require__(6468)),ElementParsers={init:function(campaignId,vastAd,vastXml,adRecord){var impressions,trackingEvents,wrapper,inline,video,companion,error,nonLinear;impressions=_node_parsers.default.getXmlNode(campaignId,vastAd,"Impression",1),trackingEvents=_node_parsers.default.getXmlNode(campaignId,vastAd,"Tracking",1),wrapper=_node_parsers.default.getXmlNode(campaignId,vastXml,"Wrapper",0),inline=null!==_node_parsers.default.getXmlNode(campaignId,vastAd,"InLine",0)&&_node_parsers.default.getXmlNode(campaignId,vastAd,"InLine",0),video=_node_parsers.default.getXmlNode(campaignId,inline,"Linear",0)||_node_parsers.default.getXmlNode(campaignId,inline,"Video",0),error=_node_parsers.default.getXmlNode(campaignId,vastAd,"Error",1),video||inline||(nonLinear=_node_parsers.default.getXmlNode(campaignId,inline,"NonLinear",0),companion=_node_parsers.default.getXmlNode(campaignId,vastAd,"Companion",0)),companion&&bouncex.video.log(campaignId,"SKIP -> [parseVastElements]: companion ads not currently supported","warning"),nonLinear&&bouncex.video.log(campaignId,"SKIP -> [parseVastElements]: nonlinear ads not currently supported","warning"),error&&_tracking.default.recordErrorPixels(campaignId,adRecord,error),impressions&&_tracking.default.recordImpressionPixels(adRecord,impressions),trackingEvents&&_tracking.default.recordEventPixels(adRecord,trackingEvents),wrapper&&(ElementParsers.handleWrapper(campaignId,wrapper),bouncex.campaigns[campaignId].video.vast.handlingWrapper=!1,bouncex.campaigns[campaignId].video.vast.wrapperLevel+=1),video&&ElementParsers.handleVideo(campaignId,adRecord,video)},handleVideo:function(campaignId,adRecord,video){_tracking.default.recordVideoClickTrackingPixels(campaignId,adRecord,video),ElementParsers.handleDuration(campaignId,adRecord,video),ElementParsers.handleMediaFiles(campaignId,adRecord,video)},handleDuration:function(campaignId,adRecord,video){var seconds,parsedDuration,duration=_node_parsers.default.getXmlNode(campaignId,video,"Duration",0);null!==duration&&_node_parsers.default.nodeExists(duration)&&"string"!=typeof duration&&(seconds=(duration=(duration=_node_parsers.default.getNodeValue(duration)).split(".")[0]).split(":"),parsedDuration=parseInt(60*seconds[0]*60)+parseInt(60*seconds[1])+parseInt(seconds[2]),adRecord.duration=parsedDuration,bouncex.video.log(campaignId,"media duration -> "+adRecord.duration+"s","vast"))},handleMediaFiles:function(campaignId,adRecord,video){var path,mediaFiles=_node_parsers.default.getXmlNode(campaignId,video,"MediaFile",1),nonMp4File=null,foundMp4=!1;if(mediaFiles&&0!==mediaFiles.length){for(var j=0;j<mediaFiles.length;j++){if(adRecord.width=mediaFiles[j].getAttribute("width"),adRecord.height=mediaFiles[j].getAttribute("height"),adRecord.aspectRatio=adRecord.height/adRecord.width*100,adRecord.apiFramework=mediaFiles[j].getAttribute("apiFramework")||!1,adRecord.type=mediaFiles[j].getAttribute("type"),adRecord.aspectRatio=_helpers.default.calculateAspectRatioData(adRecord.width,adRecord.height),adRecord.isVPAID=!(!adRecord.apiFramework||"vpaid"!==adRecord.apiFramework.toLowerCase()||"application/javascript"!==adRecord.type),adRecord.offsetAspectRatio=bouncex.campaigns[campaignId].video.player.offsetHeight/bouncex.campaigns[campaignId].video.player.offsetWidth*100,path=null!==_node_parsers.default.getNodeValue(mediaFiles[j])?_node_parsers.default.getNodeValue(mediaFiles[j]):this.handleUrlSources(campaignId,mediaFiles[j]),adRecord.type.toLowerCase().indexOf("mp4")>-1){adRecord.src=path,foundMp4=!0;break}if(adRecord.type.toLowerCase().indexOf("application/javascript")>-1)return _load_player.default.handleVPAID(campaignId,adRecord,video,path);nonMp4File={path,type:adRecord.type}}!1!==foundMp4||adRecord.vpaidUrl||null===nonMp4File||(adRecord.src=nonMp4File.path,adRecord.type=nonMp4File.type,adRecord.vpaidUrl=!1)}else bouncex.video.log(campaignId,"0 media files found","error")},handleUrlSources:function(campaignId,video){var path,sources=_node_parsers.default.getXmlNode(campaignId,video,"URL",1);if(sources)for(var k=0;k<sources.length;k++)path=_node_parsers.default.getNodeValue(sources[k]);return path},handleWrapper:function(campaignId,wrapper){var urlNode,vastUrl;_tracking.default.processWrapperEventPixels(campaignId,wrapper),(vastUrl=null!==(urlNode=_node_parsers.default.getXmlNode(campaignId,wrapper,"VASTAdTagURL",0)||_node_parsers.default.getXmlNode(campaignId,wrapper,"VASTAdTagURI",0)).textContent?urlNode.textContent.trim():urlNode.firstChild.nodeValue&&""!==urlNode.firstChild.nodeValue.trim()?urlNode.firstChild.nodeValue.trim():!(!urlNode.firstChild.constructor||!urlNode.firstChild.constructor.name||"Text"!=urlNode.firstChild.constructor.name)&&urlNode.firstChild.wholeText.trim())?(bouncex.campaigns[campaignId].video.vast.handlingWrapper=!0,_init.default.extractVastData(campaignId,vastUrl)):bouncex.video.fail(campaignId,"failed to extract a VAST URL node from the XML Wrapper element")}},_default=ElementParsers;exports.default=_default},1618:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(5754)),_default={isVastOrTag:function(data){return-1!==data.indexOf("<?xml")&&(data=data.replace(/^<\?xml[^>]*>/i,"")),/^[\s]*<VAST/i.test(data)?"vastxml":"tag"},toCamelCase:function(str){return str.charAt(0).toLowerCase()+str.slice(1)},calculateAspectRatioData:function(width,height){var data={},ratio=parseInt(width)/parseInt(height);switch(ratio){case 4/3:data.paddingTop="75%";break;case 1.5:data.paddingTop="66.6666666667%";break;case 16/9:data.paddingTop="56.25%";break;case 1:data.paddingTop=!1;break;case 1.6:data.paddingTop="62.5%"}return data.ratio=ratio,data},groupCollapsed:function(campaignId,msg,fail){_logger.default.groupCollapsed({campaignId,message:msg,group:"Vast Parser",logType:fail?"error":"info"})},groupEnd:function(campaignId,msg,fail){_logger.default.groupEnd({campaignId,message:msg,group:"Vast Parser",logType:fail?"error":"info"})}};exports.default=_default},3411:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _validations=_interopRequireDefault(__webpack_require__(4546)),HTTP={call:function(campaignId,url,method,body,callback,secondTry){bouncex.video.log(campaignId,"making HTTP request ".concat(url),"vast"),_validations.default.checkHttpRequest(campaignId,url,callback);var xml=HTTP.createXMLRequest();xml.onreadystatechange=function(){if(4==xml.readyState)if(200===xml.status)callback&&callback(campaignId,xml);else if(secondTry){if(0!==xml.status)return bouncex.video.fail(campaignId,"XML request to parse vast data failed"),!1}else HTTP.call(campaignId,url,method,body,callback,!0)},xml.open(method,_validations.default.checkUrl(url).href,!0),secondTry&&(xml.withCredentials=!0);try{body?xml.send(body):xml.send()}catch(err){var logSecondTryMsg=!0===secondTry?" on second try":".";bouncex.video.fail(campaignId,"VAST [httpCall]: XHR request failed"+logSecondTryMsg+err.message),secondTry||HTTP.call(campaignId,url,method,body,callback,!0,"vast")}},success:function(status){return status>=200&&status<300},createXMLRequest:function(){var xml;return window.XMLHttpRequest?xml=new XMLHttpRequest:window.ActiveXObject&&(xml=new ActiveXObject("Microsoft.XMLHTTP")),xml}},_default=HTTP;exports.default=_default},9940:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=_interopRequireDefault(__webpack_require__(1618)),_init=_interopRequireDefault(__webpack_require__(6468)),_default={beginParse:function(campaignId,vastData,completeCallback){_init.default.buildVastEnv(campaignId,vastData,completeCallback)},endParse:function(campaignId){_helpers.default.groupEnd(campaignId,"vast parser exit",!1)}};exports.default=_default},6468:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=_interopRequireDefault(__webpack_require__(1618)),_validations=_interopRequireDefault(__webpack_require__(4546)),_http=_interopRequireDefault(__webpack_require__(3411)),_response=_interopRequireDefault(__webpack_require__(2114)),Init={buildVastEnv:function(campaignId,vastData,completeCallback){_helpers.default.groupCollapsed(campaignId,"init vast parser",!1),bouncex.campaigns[campaignId].video.vast={handlingWrapper:!1,wrapperLevel:0,tracking:{},completeCallback};var vastKey=_helpers.default.isVastOrTag(vastData);Init.kickoffVastParse(campaignId,vastKey,vastData)},kickoffVastParse:function(campaignId,key,vastData){switch(key){case"tag":return Init.extractVastData(campaignId,vastData);case"vastxml":return _response.default.vastResponse(campaignId,vastData)}},extractVastData:function(campaignId,vastUrl){bouncex.video.log(campaignId,"extract vast url: "+vastUrl,"vast");var validatedVastUrl=_validations.default.checkVastUrl(vastUrl);_http.default.call(campaignId,validatedVastUrl,"GET",null,_response.default.vastResponse)}},_default=Init;exports.default=_default},4601:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _debug=_interopRequireDefault(__webpack_require__(4223)),_node_parsers=_interopRequireDefault(__webpack_require__(8559)),_vpaid=_interopRequireDefault(__webpack_require__(7234)),_helpers=__webpack_require__(2481),_default={vastMedia:function(campaignId,vastRecord){if(bouncex.video.canPlayMedia(campaignId)){var src=vastRecord.src&&"string"!=typeof vastRecord.src?JSON.stringify(vastRecord.src):vastRecord.src?vastRecord.src:"";bouncex.video.log(campaignId,"found compatible media file ("+src+")","vast"),bouncex.campaigns[campaignId].video.status.vastDataLoaded=!0,bouncex.video.configPlayer(campaignId)}},vpaidMedia:function(campaignId,adRecord){bouncex.campaigns[campaignId].video.status.vastDataLoaded=!0;var objDefineProperty=Object.defineProperty;Object.defineProperty=_debug.default.tryCatch(objDefineProperty),(0,_helpers.createElement)("script",{type:"text/javascript",src:adRecord.vpaidUrl,onload:function(){Object.defineProperty=objDefineProperty,_vpaid.default.generateVPAIDManager(campaignId)}},window.top.document.body)},handleVPAID:function(campaignId,adRecord,video,path){var adParams=_node_parsers.default.getXmlNode(campaignId,video,"AdParameters",0);adRecord.vpaidWidth=jQuery("#bx-creative-"+campaignId+" .bx-video-wrapper").css("width").replace(/[^0-9.]/g,""),adRecord.vpaidHeight=jQuery("#bx-creative-"+campaignId+" .bx-video-wrapper").css("height").replace(/[^0-9.]/g,""),adRecord.vpaidUrl="https:"===window.location.protocol&&0===path.indexOf("http:")?"https:"+path.substring(5):path,adRecord.isVPAID=!0,bouncex.campaigns[campaignId].video.isVPAID=!0,adParams&&(adParams=_node_parsers.default.getNodeValue(adParams),adRecord.vpaidAdParams=adParams)}};exports.default=_default},8559:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_default={getXmlNode:function(campaignId,xml,node,which){var elements,logMsg,randomFactor,randomNumber;return null==xml||xml.length<1?(bouncex.video.log(campaignId,"Failed to extract node -> "+node+". XML is null. Searched node: "+node,"warning"),null):null===(elements="object"===(0,_typeof2.default)(xml)&&xml.getElementsByTagName(node))||elements.length<1?("Companion"!==node&&"NonLinear"!==node&&bouncex.video.log(campaignId,"Failed to find node -> "+node,"vast"),null):0===which?(bouncex.video.log(campaignId,"Extracted first occurrence of node -> "+node,"vast"),elements[0]):1===which?(logMsg=elements.length>1?"Extracted "+elements.length+" occurrences of node -> "+node:"Extracted "+elements.length+" occurrence of node -> "+node,bouncex.video.log(campaignId,logMsg,"vast"),elements):(randomFactor=elements.length-1,randomNumber=Math.round(Math.random()*randomFactor),bouncex.video.log(campaignId,"Extracted random element["+randomNumber+"] out of "+elements.length+" "+node+" nodes","vast"),elements[randomNumber])},parseNodeText:function(node){return node&&(node.textContent||node.text)},nodeExists:function(node){return null!==node&&null!==node.firstChild},getNodeValue:function(node){var firstChildExist=!(!node||!node.firstChild),firstChild=!!firstChildExist&&node.firstChild;if("MediaFile"===node.nodeName&&node&&node.childNodes&&node.childNodes.length>1&&"#text"===firstChild.nodeName)for(var i=0;i<node.childNodes.length;i++)"URL"===node.childNodes[i].nodeName&&(firstChild=node.childNodes[i],firstChildExist=!0);if(firstChildExist){if(firstChild.nodeValue&&""!==firstChild.nodeValue.trim())return firstChild.nodeValue;if(firstChild.nextSibling&&firstChild.nextSibling.data&&""!==firstChild.nextSibling.data.trim())return firstChild.nextSibling.data;if(firstChild.wholeText&&""!==firstChild.wholeText&&""!==firstChild.wholeText.trim())return firstChild.wholeText.trim()}return null}};exports.default=_default},2114:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _validations=_interopRequireDefault(__webpack_require__(4546)),_load_player=_interopRequireDefault(__webpack_require__(4601)),_data_processor=_interopRequireDefault(__webpack_require__(9224)),_helpers=_interopRequireDefault(__webpack_require__(1618)),_default={vastResponse:function(campaignId,response){var vastXml,adRecord,ca=bouncex.campaigns[campaignId];if(ca.video.vast.wrapperLevel>0&&!ca.video.vast.handlingWrapper){var loop=ca.video.vast.wrapperLevel;_helpers.default.groupCollapsed(campaignId,"re-init vast parser, wrapper found - on loop: "+loop,!1)}else bouncex.video.log(campaignId,"init vast parser","vast");vastXml=_validations.default.checkXml(response,campaignId),adRecord=ca.video.vast,_data_processor.default.getAd(campaignId,vastXml,response),!ca.failed&&adRecord.vpaidUrl?(bouncex.video.log(campaignId," -> Found VPAID","vast"),_load_player.default.vpaidMedia(campaignId,adRecord),adRecord.completeCallback&&adRecord.completeCallback(adRecord)):ca.failed||(bouncex.video.log(campaignId,"vast parse complete","vast"),ca.video.vast.handlingWrapper||_load_player.default.vastMedia(campaignId,adRecord)),ca.video.vast.handlingWrapper||_helpers.default.groupEnd(campaignId,"exit vast parser",!1)}};exports.default=_default},2783:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _node_parsers=_interopRequireDefault(__webpack_require__(8559)),_element_parsers=_interopRequireDefault(__webpack_require__(2451)),Tracking={recordEventPixels:function(adRecord,trackingEvents){for(var videoEvent,k=0;k<trackingEvents.length;k++){var trackingNode=trackingEvents[k];_node_parsers.default.nodeExists(trackingNode)&&(trackingNode=_node_parsers.default.getNodeValue(trackingNode),videoEvent=trackingEvents[k].getAttribute("event"),adRecord.tracking[videoEvent]=adRecord.tracking[videoEvent]||[],-1===adRecord.tracking[videoEvent].indexOf(trackingNode)&&adRecord.tracking[videoEvent].push(trackingNode))}},recordVideoClickTrackingPixels:function(campaignId,adRecord,video){var clickTracking,clickTrackingUrl,clickThrough,videoClicks=_node_parsers.default.getXmlNode(campaignId,video,"VideoClicks",0);null!==videoClicks&&(null!==(clickThrough=_node_parsers.default.getXmlNode(campaignId,videoClicks,"ClickThrough",0))&&null!==clickThrough.firstChild&&(adRecord.clickThrough=_node_parsers.default.getNodeValue(clickThrough)),clickTrackingUrl=(clickTracking=_node_parsers.default.getXmlNode(campaignId,videoClicks,"ClickTracking",0))?_node_parsers.default.getNodeValue(clickTracking):null,adRecord.tracking.clickTracking=adRecord.tracking.clickTracking||[],clickTrackingUrl&&-1===adRecord.tracking.clickTracking.indexOf(clickTrackingUrl)&&adRecord.tracking.clickTracking.push(clickTrackingUrl))},recordErrorPixels:function(adRecord,error){for(var i=0;i<error.length;i++){var node=error[i];_node_parsers.default.nodeExists(node)&&(node=_node_parsers.default.getNodeValue(node),adRecord.tracking.error=adRecord.tracking.error||[],null!==node&&-1===adRecord.tracking.error.indexOf(node)&&adRecord.tracking.error.push(node))}},recordImpressionPixels:function(adRecord,impressions){for(var i=0;i<impressions.length;i++){var node=impressions[i];_node_parsers.default.nodeExists(node)&&(node=_node_parsers.default.getNodeValue(node),adRecord.tracking.impression=adRecord.tracking.impression||[],null!==node&&-1===adRecord.tracking.impression.indexOf(node)&&adRecord.tracking.impression.push(node))}},processWrapperEventPixels:function(campaignId,wrapper){bouncex.video.log(campaignId,"WRAPPER: init extraction","vast");var adRecord=bouncex.campaigns[campaignId].video.vast,impressions=_node_parsers.default.getXmlNode(campaignId,wrapper,"Impression",1),trackingEvents=_node_parsers.default.getXmlNode(campaignId,wrapper,"Tracking",1),video=_node_parsers.default.getXmlNode(campaignId,wrapper,"Linear",0),error=_node_parsers.default.getXmlNode(campaignId,wrapper,"Error",1);impressions&&(bouncex.video.log(campaignId,"WRAPPER: handling impressions","vast"),Tracking.recordImpressionPixels(adRecord,impressions)),error&&(bouncex.video.log(campaignId,"WRAPPER: handling error pixels","vast"),Tracking.recordErrorPixels(campaignId,adRecord,error)),trackingEvents&&(bouncex.video.log(campaignId,"WRAPPER: handling tracking events","vast"),Tracking.recordEventPixels(adRecord,trackingEvents)),video&&(bouncex.video.log(campaignId,"WRAPPER: handling inline ad click tracking","vast"),_element_parsers.default.handleVideo(campaignId,adRecord,video))}},_default=Tracking;exports.default=_default},4546:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _macros=__webpack_require__(7352),_node_parsers=_interopRequireDefault(__webpack_require__(8559)),_xml=_interopRequireDefault(__webpack_require__(1434)),Validations={checkMediaExists:function(campaignId,vastXml,mediaFile){if(null===mediaFile||mediaFile.length<1){var xmlWrapper=_node_parsers.default.getXmlNode(campaignId,vastXml,"Wrapper",0),xmlStatus=_node_parsers.default.getXmlNode(campaignId,vastXml,"status",0);xmlStatus&&"NO_AD"===xmlStatus.innerHTML&&bouncex.video.fail(campaignId,"vastResponse with no ad - status: "+xmlStatus.innerHTML+", campaign failed."),null===xmlWrapper&&bouncex.video.fail(campaignId,"vastResponse without video, campaign failed")}},checkVastUrl:function(vastUrl){var vastUrlCheck=Validations.checkUrl(vastUrl),validatedVastUrl=vastUrlCheck.href||null;return"https:"===window.location.protocol&&"https"!==vastUrlCheck.protocol&&(validatedVastUrl="https:"+validatedVastUrl.substring(5)),validatedVastUrl},checkHttpRequest:function(campaignId,url,callback){"function"!=typeof callback&&bouncex.video.fail(campaignId,"VAST [validateHttpCall]: callback is not a function",!0),"string"!=typeof url&&bouncex.video.fail(campaignId,"VAST [validateHttpCall]: not a valid url",!0)},checkUrl:function(url){var quirksMode=document.documentMode,urlNode=document.createElement("a");return quirksMode&&(urlNode.setAttribute("href",url),url=urlNode.href),urlNode.setAttribute("href",url),{href:urlNode.href,protocol:urlNode.protocol?urlNode.protocol.replace(/:$/,""):"",hostname:urlNode.hostname,path:"/"===urlNode.pathname.charAt(0)?urlNode.pathname:"/"+urlNode.pathname}},checkXml:function(response,campaignId){var vastXmlResponse;if("string"==typeof response){vastXmlResponse=Validations.parseStringToXMLWithMacroReplacement(response,campaignId)}else{if(null===response&&null===response.responseXML&&null===response.responseText){var params=response?{url:encodeURIComponent(response.responseURL)}:{};return bouncex.video.log(campaignId,"vast url returned null response | "+params,"error"),!1}var xmlResponse=response.responseXML||response.responseText||response.response;if("string"==typeof xmlResponse)try{vastXmlResponse=Validations.parseStringToXMLWithMacroReplacement(xmlResponse,campaignId)}catch(err){return bouncex.video.log(campaignId,"vastResponse returned null from url "+params,"error"),!1}else vastXmlResponse=xmlResponse}return vastXmlResponse},parseStringToXMLWithMacroReplacement:function(xmlString,campaignId){var campaign=bouncex.campaigns[campaignId],macroReplacedXMLString=(0,_macros.ReplaceMacros)(xmlString,campaign);return _xml.default.convertStringToXML(macroReplacedXMLString)}},_default=Validations;exports.default=_default},1434:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(__webpack_require__(1618));var XML={convertStringToXML:function(xmlString){if(void 0===window.DOMParser){var internetExplorerXML=new ActiveXObject("Microsoft.XMLDOM");return internetExplorerXML.loadXML(xmlString),internetExplorerXML}var parsedXML,xmlParser=new DOMParser;try{(parsedXML=xmlParser.parseFromString(xmlString,"application/xml"))&&""!==parsedXML&&!XML.parsingError(parsedXML)||bouncex.log("error parsing XML string")}catch(err){bouncex.log("error parsing XML string")}return parsedXML},parsingError:function(xml){try{var xmlErrorMsg=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return xml.getElementsByTagNameNS(xmlErrorMsg,"parsererror").length>0}catch(err){bouncex.log("xml parsing error: ",err)}},parseXmlText:function(text){return/^\s*$/.test(text)?null:/^(?:true|false)$/i.test(text)?"true"===text.toLowerCase():text.trim()}},_default=XML;exports.default=_default},1697:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _browser=_interopRequireDefault(__webpack_require__(8646)),_vast=_interopRequireDefault(__webpack_require__(9940)),_vpaid=_interopRequireDefault(__webpack_require__(7234)),_eventBinding=__webpack_require__(9476),_logger=_interopRequireDefault(__webpack_require__(5754)),_moat=_interopRequireDefault(__webpack_require__(9152)),_ias=_interopRequireDefault(__webpack_require__(8066)),_helpers=_interopRequireDefault(__webpack_require__(1618));function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _default={constants:{completionThresholdInSeconds:2},init:function(campaignId,vastData,provider,placement){var _placement$deployment,_campaign$winningBid$,_campaign$winningBid,_campaign$winningBid$2,_campaign$winningBid2,campaign=bouncex.campaigns[campaignId];campaign.video=campaign.video||{};var vastDataToParse=vastData;"vastxml"===_helpers.default.isVastOrTag(vastDataToParse)&&(vastDataToParse="https://dfp.bouncex.net/pub/vast/".concat(bouncex.lz.compressToEncodedURIComponent(vastData))),vastDataToParse=_ias.default.video.wrapVastURL({trigger:campaign.trigger,placement:null!==(_placement$deployment=null==placement?void 0:placement.deployment)&&void 0!==_placement$deployment?_placement$deployment:"",ssp:null!==(_campaign$winningBid$=null===(_campaign$winningBid=campaign.winningBid)||void 0===_campaign$winningBid?void 0:_campaign$winningBid.provider)&&void 0!==_campaign$winningBid$?_campaign$winningBid$:"",websiteId:bouncex.website.id,adUnitId:null!==(_campaign$winningBid$2=null===(_campaign$winningBid2=campaign.winningBid)||void 0===_campaign$winningBid2?void 0:_campaign$winningBid2.adUnitId)&&void 0!==_campaign$winningBid$2?_campaign$winningBid$2:""},vastDataToParse),bouncex.video.buildEnv(campaignId,provider,placement);try{_vast.default.beginParse(campaignId,vastDataToParse)}catch(err){bouncex.video.fail(campaignId,err)}},buildEnv:function(campaignId,provider,placement){var self=bouncex.campaigns[campaignId].video;self.player=document.getElementById("bx-video-player-"+campaignId),self.player&&jQuery(self.player).closest(".bx-group").addClass("bx-group-placeholder"),self.uniqueEventPixels=[],self.vast={},self.vpaid={},self.integrations={},self.integrations.moatApiReference={dispatchEvent:function(){}},self.config={},self.config.provider=provider,self.creative={},self.creative.requestWidth=placement.width,self.creative.requestHeight=placement.height,self.status={ready:!1,passedCompletionThreshold:!1,qOne:!1,midpoint:!1,qThree:!1,vastDataLoaded:!1,stopped:!1}},canPlayMedia:function(campaignId){var dummyPlayer=document.createElement("VIDEO"),mediaType=bouncex.campaigns[campaignId].video.vast.type;if("maybe"===dummyPlayer.canPlayType(mediaType)||"probably"===dummyPlayer.canPlayType(mediaType))return bouncex.video.log(campaignId,"media file supported","player"),!0;var wrapperLevel=bouncex.campaigns[campaignId].video.vast.wrapperLevel||!1;_vast.default.endParse(campaignId),wrapperLevel&&!mediaType?bouncex.video.log(campaignId,"no media found on wrapper level "+wrapperLevel,"warning"):bouncex.video.log(campaignId,"video player does not support "+mediaType,"error")},bxPlayerPop:function(campaignId,type){var playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,bouncex.campaigns[campaignId].video.player);bouncex.report(campaignId,"pop",{"pop:activation":type,video_type:playerSnapshot.isVPAID?"VPAID":"VAST",media_type:playerSnapshot.type,media_size:playerSnapshot.dimensions.videoWidth+"x"+playerSnapshot.dimensions.videoHeight})},onPlay:function(campaignId){var ca=bouncex.campaigns[campaignId],player=ca.video.player,provider=ca.video.config.provider,staticVastTag=bouncex.campaigns[campaignId].video.config.src.indexOf("/demo/ads_demo_video.mp4")>-1,playerState=bouncex.video.getPlayerSnapshot(campaignId,player);bouncex.off(jQuery(player),"onplay"),ca.video.videoResponseLoaded=!0,"aqbx"===provider&&staticVastTag&&bouncex.video.aqbxStyleFix(campaignId,player);try{player.play()}catch(err){bouncex.video.log(campaignId,"error: "+err,"error")}bouncex.video.toggleMute(campaignId,!0),bouncex.video.fireTrackingEvents(campaignId,"start");var moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoStart",playerState.volume);ca.video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},play:function(campaignId){var campaign=bouncex.campaigns[campaignId],playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,campaign.video.player);playerSnapshot.isVPAID&&playerSnapshot.ready&&campaign.video.videoResponseLoaded?campaign.video.vpaid.ad.startAd():!playerSnapshot.playing&&playerSnapshot.ready&&campaign.video.videoResponseLoaded&&campaign.video.player.play()},playVideo:function(campaignId,playBeforeImpression,type){var campaign=bouncex.campaigns[campaignId];if(_browser.default.currentTab.isVisible()){if(campaign.isGBI2&&!campaign.getClientVisibility())return campaign.onClientVisible(bouncex.video.playVideo.bind(this,campaignId,playBeforeImpression,type));campaign.listeners.onTabVisibilityChange((function(){bouncex.video.playPauseVisibility(campaignId)})),campaign.listeners.onScroll((function(){bouncex.video.playPauseVisibility(campaignId)}));var player=campaign.video&&campaign.video.player||campaign.gbi&&campaign.gbi.player;player&&(player.muted=player.playsInline=!0,player.autoplay="0"!==player.getAttribute("data-wknd-autoplay")),playBeforeImpression?bouncex.isBxPlayerCampaign(campaignId)?bouncex.video.playVideoBeforeImpression(type,campaignId):_logger.default.deprecated({group:"gbi",message:"gbi.playVideoBeforeImpression would have been called",campaignId}):campaign&&campaign.gbi&&campaign.gbi.player?campaign.gbi.player.play():bouncex.isBxPlayerCampaign(campaignId)&&bouncex.video.play(campaignId)}else campaign.listeners.onTabVisible(bouncex.video.playVideo.bind(this,campaignId,playBeforeImpression,type))},isPlayableVideoCampaign:function(campaignId,playBeforeImpression){var campaign=bouncex.campaigns[campaignId],isGbiVideo=campaign.gbi&&campaign.gbi.isVideo;if(playBeforeImpression||!1){if(!campaign.video&&isGbiVideo&&campaign.gbi.playBeforeImpression&&!campaign.gbi.videoResponseLoaded)return!0;if(bouncex.isBxPlayerCampaign(campaignId)&&bouncex.video.ready(campaignId))return campaign.video.status.isPlayable=!0,!0}else{if(!bouncex.isBxPlayerCampaign(campaignId)&&isGbiVideo&&campaign.gbi.config.playOnImpression&&campaign.gbi.player&&"playing"!==campaign.gbi.player.getState())return!0;if(bouncex.isBxPlayerCampaign(campaignId)&&isGbiVideo&&!campaign.ad_shown)return campaign.video.status.isPlayable=!0,!0}return!1},playVideoBeforeImpression:function(type,campaignId){var campaign=bouncex.campaigns[campaignId];this._integrations.moat.init(campaignId,campaign.video.vast);var player=campaign.video.player,playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,campaign.video.player),moatDispatch=this._integrations.moat.apiReference;_moat.default.shouldSampleMoatPixel()&&(campaign.video.integrations.moatApiReference=bouncex.video._integrations.moat.initMoatTracking(moatDispatch.container,moatDispatch.ids,moatDispatch.duration,moatDispatch.partnerCode,moatDispatch.url)),playerSnapshot.isVPAID?_vpaid.default.playVPAIDBeforeImpression(type,campaignId):(bouncex.on(jQuery(player),"onplay",bouncex.video.onPlay(campaignId)),bouncex.on(jQuery(player),"onerror",(function(data){jQuery(player).off("onerror"),player.pause(),bouncex.campaigns[campaignId].video.status.stopped=!0,bouncex.video.fail(campaignId,data.message?data.message:"error loading video response")})),campaign.video.videoResponseLoaded&&(bouncex.show_ad(type,campaignId),bouncex.video.fireTrackingEvents(campaignId,"impression")))},configPlayer:function(campaignId){var campaign=bouncex.campaigns[campaignId],playerConfig=campaign.video.config||{},vastConfig=campaign.video.vast,playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,campaign.video.player);if(playerSnapshot.isVPAID||(playerConfig.src=vastConfig.src||"//"+bouncex.website.biu+"/assets/global/videos/pub/demo/ads_demo_video.mp4",playerConfig.clickThroughUrl=vastConfig.clickThrough||!1),playerConfig.aspectRatio=vastConfig.aspectRatio,playerConfig.offsetAspectRatio=vastConfig.offsetAspectRatio,playerSnapshot.isVPAID?(playerConfig.width=vastConfig.vpaidWidth,playerConfig.height=vastConfig.vpaidHeight):(playerConfig.width=vastConfig.width,playerConfig.height=vastConfig.height),bouncex.video.stylePlayer(campaignId),playerSnapshot.isVPAID)bouncex.video.addVpaidEventTrackingListeners(campaignId);else{var videoPlayer=document.getElementById("bx-video-player-"+campaignId);jQuery(videoPlayer).attr("src",bouncex.campaigns[campaignId].video.config.src),bouncex.video.setClickThroughUrl(campaignId,playerConfig.clickThroughUrl),bouncex.video.addVideoEventTrackingListeners(campaignId)}bouncex.ads.watchVideoLoad(campaignId),campaign.video.config=playerConfig},setClickThroughUrl:function(campaignId,url){var player=bouncex.campaigns[campaignId].video.player;""!==url&&!1!==url&&jQuery(player).attr("href",url)},clickThroughHelper:function(campaignId,url){window.open(url,"_blank").focus()},toggleMute:function(campaignId,forceMute){var player=bouncex.campaigns[campaignId].video.player;player.muted=!!forceMute||!player.muted,player.muted||0!==player.volume||(player.volume=.75),this.updatePlayerButtons(player)},playPausePlayer:function(campaignId){try{var video=bouncex.campaigns[campaignId].video,player=video.player;player.paused||player.ended?(player.play(),video.manuallyPaused=!1):(player.pause(),video.manuallyPaused=!0),this.updatePlayerButtons(player)}catch(e){null!=e&&e.message&&_logger.default.error({group:"Ads",message:"playPauseVisibility error: ".concat(e.message.toString()),campaignId})}},playPauseVisibility:function(campaignId){try{var video=bouncex.campaigns[campaignId].video,player=video.player;if(video.status.passedCompletionThreshold)return void(player.paused||bouncex.video.log(campaignId,"player left alone due to not meeting the completion threshold","player"));_browser.default.currentTab.isVisible()?_browser.default.viewport.elementInViewport(player)?video.manuallyPaused||!player.paused&&!player.ended||player.play():(player.paused||bouncex.video.log(campaignId,"player paused because video out of viewport","player"),player.pause()):(player.paused||bouncex.video.log(campaignId,"player paused on tab hide","player"),player.pause())}catch(e){null!=e&&e.message&&_logger.default.error({group:"Ads",message:"playPauseVisibility error: ".concat(e.message.toString()),campaignId})}},updateProgressPlayer:function(campaignId){var progressWrapper=document.getElementById("bx-video-progress-wrapper-"+campaignId);if(null!==progressWrapper){var playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,bouncex.campaigns[campaignId].video.player),currentTime=!1!==playerSnapshot.time.inSeconds?playerSnapshot.time.inSeconds:0,adDuration=Math.floor(playerSnapshot.time.durationRounded),currentFormatted=bouncex.video.getFormattedTime(currentTime),durationFormatted=bouncex.video.getFormattedTime(adDuration);jQuery(".bx-video-progress-time-left",progressWrapper).text(currentFormatted),jQuery(".bx-video-progress-time-total",progressWrapper).text(durationFormatted)}},toMinutes:function(time){return(time/60).toFixed(2).replace(".",":")},toSeconds:function(time){return time<10&&(time=("0"+time).slice(-2)),time="0:"+time},getFormattedTime:function(time){return time<60?bouncex.video.toSeconds(time):bouncex.video.toMinutes(time)},canPlay:function(campaignId){if(!bouncex.campaigns[campaignId].video.isVPAID){var playerState=bouncex.campaigns[campaignId].video.status;playerState.ready=!0,playerState.canPlayEvent=!0,bouncex.video.playerReady(campaignId),jQuery(bouncex.campaigns[campaignId].video.player).unbind("canplay.bx-"+campaignId)}},ready:function(campaignId){var campaign=bouncex.campaigns[campaignId];return campaign.video.status&&campaign.video.status.ready&&!campaign.video.videoResponseLoaded},playerReady:function(campaignId){var campaign=bouncex.campaigns[campaignId];campaign.video.status.ready?(campaign.video.isVPAID||bouncex.video.updateProgressPlayer(campaignId),bouncex.ads._activateCampaign(campaignId),campaign.trigger&&!campaign.ad_visible&&bouncex.show_ad(campaign.trigger,campaignId)):bouncex.video.log(campaignId,"player not ready","player")},getPlayerSnapshot:function(campaignId,player){var adRecord=bouncex.campaigns[campaignId].video.vast,duration=player.duration||adRecord.duration,firstQuartile=Math.floor(.25*duration),midpoint=Math.floor(2*firstQuartile),thirdQuartile=Math.floor(3*firstQuartile),status=bouncex.campaigns[campaignId].video.status,campaignVast=bouncex.campaigns[campaignId].video.vast,creative=bouncex.campaigns[campaignId].video.creative;return{ended:player.ended,playing:!player.paused,paused:player.paused,type:player.currentType||adRecord.type,src:player.currentSrc||campaignVast.vpaidUrl,clickThroughUrl:adRecord.clickThrough,muted:player.muted,volume:player.volume,ready:status.ready||!1,playbackRate:player.playbackRate,seeking:player.seeking,isVPAID:bouncex.campaigns[campaignId].video.vast.isVPAID,vastDataLoaded:status.vastDataLoaded,dimensions:{offsetWidth:player.offsetWidth,offsetHeight:player.offsetHeight,videoWidth:player.videoWidth||adRecord.vpaidWidth,videoHeight:player.videoHeight||adRecord.vpaidHeight,requestWidth:creative.requestWidth,requestHeight:creative.requestHeight},time:{duration,durationRounded:Math.floor(duration),currentUnformatted:player.currentTime||!1,inSeconds:parseInt(player.currentTime%60)||!1,firstQuartile:{value:firstQuartile,passed:status.qOne||!1},midpoint:{value:midpoint,passed:status.midpoint||!1},thirdQuartile:{value:thirdQuartile,passed:status.qThree||!1}}}},stylePlayer:function(campaignId){var creative=bouncex.campaigns[campaignId].video.creative;creative.dynamicHeight=bouncex.campaigns[campaignId].obj1.find(".bx-creative-"+campaignId+" .bx-row-video").width(),creative.dynamicWidth=bouncex.campaigns[campaignId].obj1.find(".bx-creative-"+campaignId+" .bx-row-video").height(),jQuery(".bxc.bx-campaign-"+campaignId).addClass("bx-width-full-content"),jQuery("body").on("focus","#bx-video-btns-"+campaignId+" .bx-video-btn",(function(){jQuery("#bx-video-wrapper-"+campaignId).addClass("bx-video-wrapper-has-focus")})).on("blur","#bx-video-btns-"+campaignId+" .bx-video-btn",(function(){jQuery(".bx-video-wrapper-"+campaignId).removeClass("bx-video-wrapper-has-focus")})),bouncex.campaigns[campaignId].video.vast.isVPAID||bouncex.video.adjustAspectRatio(campaignId)},adjustAspectRatio:function(campaignId){var video=bouncex.campaigns[campaignId].video,mediaPadding=video.vast.aspectRatio.paddingTop,mediaAspectRatio=video.vast.aspectRatio.ratio,creativeAspectRatio=video.creative.dynamicWidth/video.creative.dynamicHeight,staticAqbxVastTag=video.config.src.indexOf("/demo/ads_demo_video.mp4")>-1&&"aqbx"===bouncex.campaigns[campaignId].video.config.provider,threeToFourRatio="300"===video.config.height&&"400"===video.config.width&&"75%"===mediaPadding;!mediaPadding||mediaAspectRatio===creativeAspectRatio||staticAqbxVastTag||threeToFourRatio||(jQuery("#bx-video-wrapper-"+campaignId).addClass("bx-video-aspectRatio-fix-"+campaignId),jQuery(".bx-video-aspectRatio-fix-"+campaignId).css("padding-top",mediaPadding))},aqbxStyleFix:function(campaignId,player){var mediaHeight=jQuery(player)[0].videoHeight,mediaWidth=jQuery(player)[0].videoWidth,newHeight=(Number(jQuery(".bx-creative-"+campaignId+" .bx-row-video").css("width").split("px")[0])/(mediaWidth/mediaHeight)).toString()+"px";jQuery(".bx-creative-"+campaignId+" .bx-video-wrapper").css("height",newHeight)},detectVideoProgress:function(campaignId,qOne,mid,qThree){var moatEventData,playerState=bouncex.campaigns[campaignId].video.status,playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,bouncex.campaigns[campaignId].video.player),seconds=playerSnapshot.time.inSeconds;qOne!==seconds||playerSnapshot.time.firstQuartile.passed?mid!==seconds||playerSnapshot.time.midpoint.passed?qThree!==seconds||playerSnapshot.time.thirdQuartile.passed?bouncex.video.constants.completionThresholdInSeconds<=seconds&&!playerState.passedCompletionThreshold&&(playerState.passedCompletionThreshold=!0,bouncex.video.log(campaignId,"player made it to completion threshold","player")):(moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoThirdQuartile",playerSnapshot.volume),bouncex.video.fireTrackingEvents(campaignId,"thirdQuartile"),playerState.qThree=!0):(moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoMidpoint",playerSnapshot.volume),bouncex.video.fireTrackingEvents(campaignId,"midpoint"),playerState.midpoint=!0):(moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoFirstQuartile",playerSnapshot.volume),bouncex.video.fireTrackingEvents(campaignId,"firstQuartile"),playerState.qOne=!0),moatEventData&&bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},addVideoEventTrackingListeners:function(campaignId){var player=document.getElementById("bx-video-player-"+campaignId),playerEvents=" volumechange.bx-"+campaignId+" canplay.bx-"+campaignId+" durationchange.bx-"+campaignId+" ended.bx-"+campaignId+" pause.bx-"+campaignId+" play.bx-"+campaignId+" playing.bx-"+campaignId+" timeupdate.bx-"+campaignId+" loadeddata.bx-"+campaignId+" error.bx-"+campaignId+" canplaythrough.bx-"+campaignId+" onplay.bx-"+campaignId+" loadedmetadata.bx-"+campaignId,playerClickEvents=" touchend.bx-"+campaignId+" click.bx-"+campaignId,campaign=bouncex.campaigns[campaignId];bouncex.campaigns[campaignId].video.player=player,(0,_eventBinding.bxBind)(player,playerEvents,(function(event){bouncex.video.handleVideoEvents(campaignId,player,event)})),(0,_eventBinding.bxBind)(player,playerClickEvents,(function(event){campaign.video.isInClickState||(campaign.video.isInClickState=!0,bouncex.video.handleVideoEvents(campaignId,player,event),setTimeout((function(){campaign.video.isInClickState=!1}),350))})),this.handleVideoClose(campaignId)},addVpaidEventTrackingListeners:function(campaignId){var player=document.getElementById("bx-video-player-"+campaignId),playerEvents=" volumechange.bx-"+campaignId+" ended.bx-"+campaignId+" pause.bx-"+campaignId+" play.bx-"+campaignId;(0,_eventBinding.bxBind)(player,playerEvents,(function(event){bouncex.video.updatePlayerButtons(player)}))},handleVideoEvents:function(campaignId,player,event){var type=event.type,playerState=bouncex.campaigns[campaignId].video.status,playerMetadata=bouncex.video.getPlayerSnapshot(campaignId,player);if("canplaythrough"!==type||playerState.canPlayEvent)if("loadedmetadata"===type&&bouncex.browser.ios)player.setAttribute("playsinline",""),bouncex.video.canPlay(campaignId);else if("canplay"===type)bouncex.video.canPlay(campaignId);else if("play"===type)this.handlePlayEvent(campaignId,playerMetadata);else if("volumechange"===type)this.handleVolumechangeEvent(campaignId,playerMetadata,player);else if("timeupdate"!==type||playerMetadata.isVPAID)if("pause"!==type||bouncex.campaigns[campaignId].video.status.stopped||bouncex.campaigns[campaignId].video.player.ended)if("ended"===type)this.handleEndEvent(campaignId,playerMetadata);else if("error"===type){var errorMessage=event.data&&event.data.message?event.data.message:"an error has occurred, campaign failed";bouncex.video.fail(campaignId,errorMessage)}else"click"!==type&&"touchend"!==type||this.handleClickEvent(campaignId,playerMetadata);else this.handlePauseEvent(campaignId,playerMetadata);else this.handleTimeUpdateEvent(campaignId,playerMetadata);else bouncex.video.canPlay(campaignId);["play","pause","ended","volumechange"].indexOf(type)>=0&&this.updatePlayerButtons(player)},handleVideoClose:function(campaignId){var player=document.getElementById("bx-video-player-"+campaignId),closeBtn=document.getElementById("bx-creative-"+campaignId).getElementsByClassName("bx-close-link");bouncex.campaigns[campaignId].video.player=player,jQuery(closeBtn).on("click.bx-"+campaignId,(function(){var playerMetadata=bouncex.video.getPlayerSnapshot(campaignId,player),moatEventData=bouncex.video._integrations.moat.getDispatchEventParams("AdStopped",playerMetadata.volume);!1===bouncex.campaigns[campaignId].video.vast.isVPAID&&(bouncex.campaigns[campaignId].video.status.stopped=!0,player.pause()),player.ended=!0,bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)}))},handlePlayEvent:function(campaignId,playerMetadata){var moatEventData=this._integrations.moat.getDispatchEventParams("AdPlaying",playerMetadata.volume);bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},handleVolumechangeEvent:function(campaignId,playerMetadata,player){var moatEventData=this._integrations.moat.getDispatchEventParams("AdVolumeChange",playerMetadata.volume);player.muted&&bouncex.video.fireTrackingEvents(campaignId,"mute"),bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},handleTimeUpdateEvent:function(campaignId,playerMetadata){bouncex.video.updateProgressPlayer(campaignId),bouncex.video.detectVideoProgress(campaignId,playerMetadata.time.firstQuartile.value,playerMetadata.time.midpoint.value,playerMetadata.time.thirdQuartile.value)},handlePauseEvent:function(campaignId,playerMetadata){var moatEventData=bouncex.video._integrations.moat.getDispatchEventParams("AdPaused",playerMetadata.volume);bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},handleClickEvent:function(campaignId,playerMetadata){if(playerMetadata.clickThroughUrl)try{bouncex.video.clickThroughHelper(campaignId,playerMetadata.clickThroughUrl)}catch(e){}bouncex.video.report(campaignId,"click"),bouncex.video.fireTrackingEvents(campaignId,"click"),bouncex.video.fireTrackingEvents(campaignId,"clickTracking")},handleEndEvent:function(campaignId,playerMetadata){var moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoComplete",playerMetadata.volume);bouncex.video.fireTrackingEvents(campaignId,"complete"),bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId),bouncex.off(bouncex.window," volumechange.bx-"+campaignId+" canplay.bx-"+campaignId+" durationchange.bx-"+campaignId+" ended.bx-"+campaignId+" pause.bx-"+campaignId+" play.bx-"+campaignId+" playing.bx-"+campaignId+" timeupdate.bx-"+campaignId+" loadeddata.bx-"+campaignId+" error.bx-"+campaignId+" click.bx-"+campaignId+" canplaythrough.bx-"+campaignId+"touchend.bx-"+campaignId+"onplay.bx-"+campaignId)},updatePlayerButtons:function(player){var buttonToggle={ended:player.ended,paused:!player.ended&&player.paused,playing:!player.ended&&!player.paused,muted:player.muted,unmuted:!player.muted},wrapper=jQuery(player).closest(".bx-video-wrapper");Object.keys(buttonToggle).forEach((function(buttonName){wrapper.toggleClass("bx-video-player-"+buttonName,!!buttonToggle[buttonName])}))},getEventUrls:function(campaignId,event){var eventUrls;return!(!(eventUrls=bouncex.campaigns[campaignId].video.vast.vpaidUrl?bouncex.campaigns[campaignId].video.vpaid.vastConfig.tracking[event]:bouncex.campaigns[campaignId].video.vast.tracking[event])||0===eventUrls.length)&&("string"==typeof eventUrls&&(eventUrls=[eventUrls]),eventUrls)},fireTrackingEvents:function(campaignId,event){var alreadyCalled=!1,calledEvents=bouncex.campaigns[campaignId].video.uniqueEventPixels||[],eventUrls=this.getEventUrls(campaignId,event);if("boolean"!=typeof eventUrls){var _step,_iterator=_createForOfIteratorHelper(eventUrls);try{for(_iterator.s();!(_step=_iterator.n()).done;){var eventPixelUrl=_step.value;null==eventPixelUrl||eventPixelUrl.length<1||-1===eventPixelUrl.indexOf("http")||(calledEvents.includes(eventPixelUrl)?alreadyCalled=!0:(calledEvents.push(eventPixelUrl),bouncex.video.log(campaignId,alreadyCalled?"already fired event pixel for "+event:"firing event pixel "+eventPixelUrl+" for "+event,"eventpixel"),document.createElement("img").src=eventPixelUrl))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},_integrations:{moat:{apiReference:{},init:function(campaignId,vastData){bouncex.video.log(campaignId,"init moat integration","moat"),bouncex.video._integrations.moat.apiReference=this.getMoatApiReference(campaignId,vastData)},initMoatTracking:function(a,c,d,h,k){var e,g,f=document.createElement("script"),b=[];c={adData:{ids:c,duration:d,url:k},dispatchEvent:function(a,id){id&&bouncex.video.log(id,a.type,"moat"),this.sendEvent?(b&&(b.push(a),a=b,b=!1),this.sendEvent(a)):b.push(a)}},d="_moatApi"+Math.floor(1e8*Math.random());try{g=(e=a.ownerDocument).defaultView||e.parentWindow}catch(l){e=document,g=window}return g[d]=c,f.type="text/javascript",a&&a.insertBefore(f,a.childNodes[0]||null),f.src="https://z.moatads.com/"+h+"/moatvideo.js#"+d,c},getMoatApiReference:function(campaignId,vastData){var _campaign$winningBid$3,_campaign$winningBid3,campaign=bouncex.campaigns[campaignId];return{partnerCode:"bouncexjsvideo854426616072",container:bouncex.campaigns[campaignId].video.player,url:vastData.src,duration:vastData.duration,ids:{level1:window.location.host+"("+bouncex.website.id+")",level2:bouncex.ads.getDeploymentType(campaignId),level3:vastData.isVPAID?"VPAID":"VAST",level4:"video",slicer1:bouncex.state.mobile?"mobile":"desktop",slicer2:campaign.trigger,zMoatSSP:null!==(_campaign$winningBid$3=null===(_campaign$winningBid3=campaign.winningBid)||void 0===_campaign$winningBid3?void 0:_campaign$winningBid3.provider)&&void 0!==_campaign$winningBid$3?_campaign$winningBid$3:""}}},getDispatchEventParams:function(eventName,volume){return{type:eventName,adVolume:volume}}}},report:function(campaignId,eventName,metadata){bouncex.video.log(campaignId,'reporting event "'+eventName+'"',"player");var playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,bouncex.campaigns[campaignId].video.player);(metadata=metadata||{}).source="ads",metadata.agent="js",metadata.video_type=playerSnapshot.isVPAID?"VPAID":"VAST",metadata.media_type=playerSnapshot.type,metadata.media_size=playerSnapshot.dimensions.videoWidth+"x"+playerSnapshot.dimensions.videoHeight,metadata.video_length=playerSnapshot.time.duration,"video_pause"===eventName&&(metadata.pause_location=playerSnapshot.time.currentUnformatted),bouncex.buildReport(campaignId,eventName,metadata)},log:function(campaignId,msg,job){var color,loggerCommand="info";switch(job){case"vast":color="#09AF59";break;case"vpaid":color="#226666";break;case"player":default:color="#8E29D4";break;case"moat":color="#A13647";break;case"error":color="#FF0000",loggerCommand="error";break;case"warning":color="#F67917",loggerCommand="warn";break;case"eventpixel":color="#956843"}_logger.default[loggerCommand]({color,campaignId,group:"vast"===job?"VAST":"Video [".concat(job,"]"),message:msg})},fail:function(campaignId,msg){bouncex.campaigns[campaignId].failed=!0,bouncex.video.log(campaignId,msg,"error")}};exports.default=_default},2113:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _browser=_interopRequireDefault(__webpack_require__(8646)),_integrations=_interopRequireDefault(__webpack_require__(3125)),_tracking=_interopRequireDefault(__webpack_require__(4026)),_wknd_events=_interopRequireDefault(__webpack_require__(2358)),_default={onAdLoaded:function(){_wknd_events.default.adLoaded(this.campaignId,this),_tracking.default.fireTrackingRequests(this.campaignId,"AdLoaded",this.vastConfig.tracking.loaded),this.ad.unsubscribe(this.callbacks.AdLoaded,"AdLoaded")},onAdStarted:function(){var vol=this.ad.getAdVolume();_tracking.default.fireTrackingRequests(this.campaignId,"AdStarted",this.vastConfig.tracking.creativeView),this.adUnit.lastVolume=vol,_wknd_events.default.adStarted(this.campaignId)},onAdUserClose:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdUserClose",this.vastConfig.tracking.close)},onAdUserMinimize:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdUserMinimize",this.vastConfig.tracking.collapse)},onAdUserAcceptInvitation:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdUserAcceptInvitation",this.vastConfig.tracking.acceptInvitation)},onAdSkippableStateChange:function(){this.ad.getAdSkippableState()},onAdStopped:function(){var vol=this.ad.getAdVolume();bouncex.campaigns[this.campaignId].video.status.stopped=!0,_integrations.default.Moat.dispatch(this.campaignId,"AdStopped",vol)},onAdPaused:function(){var vol=this.ad.getAdVolume(),video=bouncex.campaigns[this.campaignId].video;video.manuallyPaused=video.manuallyPaused||_browser.default.currentTab.isVisible(),_tracking.default.fireTrackingRequests(this.campaignId,"AdPaused",this.vastConfig.tracking.pause),_integrations.default.Moat.dispatch(this.campaignId,"AdPaused",vol)},onAdPlaying:function(){var vol=this.ad.getAdVolume();bouncex.campaigns[this.campaignId].video.manuallyPaused=!1,_tracking.default.fireTrackingRequests(this.campaignId,"AdPlaying",this.vastConfig.tracking.resume),_integrations.default.Moat.dispatch(this.campaignId,"AdPlaying",vol)},onAdVolumeChange:function(){var vol=this.ad.getAdVolume(),lastVolume=this.adUnit.lastVolume;0===vol&&lastVolume>0?_tracking.default.fireTrackingRequests(this.campaignId,"AdVolumeChange",this.vastConfig.tracking.mute,"volumechange"):vol>0&&0===lastVolume&&_tracking.default.fireTrackingRequests(this.campaignId,"AdVolumeChange",this.vastConfig.tracking.unmute,"volumechange"),_integrations.default.Moat.dispatch(this.campaignId,"AdVolumeChange",vol),this.adUnit.lastVolume=vol},onAdImpression:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdImpression",this.vastConfig.tracking.impression)},onAdVideoStart:function(){bouncex.video.toggleMute(this.campaignId,!0);var vol=this.ad.getAdVolume();this.adUnit.started=!0,_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoStart",this.vastConfig.tracking.start),_integrations.default.Moat.dispatch(this.campaignId,"AdVideoStart",vol)},onAdSkipped:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdSkipped",this.vastConfig.tracking.skip),bouncex.close_ad(this.campaignId)},onAdVideoFirstQuartile:function(){var campaignId=this.campaignId,vol=this.ad.getAdVolume();_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoFirstQuartile",this.vastConfig.tracking.firstQuartile),bouncex.campaigns[campaignId].video.status.qOne=!0,_integrations.default.Moat.dispatch(this.campaignId,"AdVideoFirstQuartile",vol)},onAdVideoMidpoint:function(){var campaignId=this.campaignId,vol=this.ad.getAdVolume();_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoMidpoint",this.vastConfig.tracking.midpoint),bouncex.campaigns[campaignId].video.status.midpoint=!0,_integrations.default.Moat.dispatch(this.campaignId,"AdVideoMidpoint",vol)},onAdVideoThirdQuartile:function(){var campaignId=this.campaignId,vol=this.ad.getAdVolume();_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoThirdQuartile",this.vastConfig.tracking.thirdQuartile),bouncex.campaigns[campaignId].video.status.qThree=!0,_integrations.default.Moat.dispatch(this.campaignId,"AdVideoThirdQuartile",vol)},onAdClickThru:function(url,id,playerHandles){var campaignId=this.campaignId;bouncex.campaigns[campaignId].video.vast.clickThrough=url,void 0!==playerHandles&&1==playerHandles&&url&&window.open(url),_tracking.default.fireTrackingRequests(this.campaignId,"AdClickThru",this.vastConfig.tracking.clickTracking)},onAdDurationChange:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdDurationChange",this.vastConfig.tracking.durationchange)},onAdSizeChange:function(){(document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement)&&_tracking.default.fireTrackingRequests(this.campaignId,"AdSizeChange",this.vastConfig.tracking.fullscreen)},onAdVideoComplete:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoComplete",this.vastConfig.tracking.complete),_integrations.default.Moat.dispatch(this.campaignId,"AdVideoComplete",this.ad.getAdVolume())},onAdError:function(msg){_tracking.default.fireTrackingRequests(this.campaignId,"AdError",this.vastConfig.tracking.error)}};exports.default=_default},2846:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.adjustCreative=function(campaignId){},exports.validateAd=function(ad){for(var _i=0,_vpaidFunctions=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];_i<_vpaidFunctions.length;_i++){var functionName=_vpaidFunctions[_i];if("function"!=typeof ad[functionName])return!1;ad[functionName]=_debug.default.tryCatch(ad[functionName])}return!0},exports.versionCheck=function(campaignId){var version=bouncex.campaigns[campaignId].video.vpaid.ad.handshakeVersion("2.0");if(version&&"2.0"!==version)return bouncex.video.log(campaignId,"generateVPAIDManager -> Ad VPAID version ("+version+") is not supported","error"),!1;return!0};var _debug=_interopRequireDefault(__webpack_require__(4223))},7234:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(__webpack_require__(8646));var _helpers=__webpack_require__(2846),_init=_interopRequireDefault(__webpack_require__(2777)),_default={generateVPAIDManager:function(campaignId){bouncex.video.configPlayer(campaignId),bouncex.campaigns[campaignId].video.vpaid=bouncex.campaigns[campaignId].vpaid||{};try{bouncex.video.log(campaignId,"getVPAIDAd() called","vpaid"),bouncex.campaigns[campaignId].video.vpaid.ad=window.getVPAIDAd(),(0,_helpers.versionCheck)(campaignId)}catch(err){bouncex.campaigns[campaignId].video.vpaid.ad=document.getVPAIDAd()}_init.default.initializeVPAID(campaignId)},playVPAIDBeforeImpression:function(type,campaignId){var videoCampaign=bouncex.campaigns[campaignId].video;videoCampaign.videoResponseLoaded=!0,videoCampaign.triggerType=type,videoCampaign.vpaid.ad.startAd()}};exports.default=_default},2777:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=__webpack_require__(2846),_event_callbacks=_interopRequireDefault(__webpack_require__(2113)),Init={buildEnvironment:function(campaignId,vpaidObj,player,playerWrapper){bouncex.video.log(campaignId,"building VPAID environment","vpaid");var self=vpaidObj,slot=playerWrapper;return self.campaignId=campaignId,self.ad=bouncex.campaigns[campaignId].video.vpaid.ad,self.vastConfig=bouncex.campaigns[campaignId].video.vast,self.config={},slot&&((slot=slot.appendChild(document.createElement("div"))).className="bx-vpaid-slot bx-row-html"),self.callbacks={AdClickThru:_event_callbacks.default.onAdClickThru,AdDurationChange:_event_callbacks.default.onAdDurationChange,AdError:_event_callbacks.default.onAdError,AdImpression:_event_callbacks.default.onAdImpression,AdLoaded:_event_callbacks.default.onAdLoaded,AdPaused:_event_callbacks.default.onAdPaused,AdPlaying:_event_callbacks.default.onAdPlaying,AdSizeChange:_event_callbacks.default.onAdSizeChange,AdSkippableStateChange:_event_callbacks.default.onAdSkippableStateChange,AdSkipped:_event_callbacks.default.onAdSkipped,AdStarted:_event_callbacks.default.onAdStarted,AdStopped:_event_callbacks.default.onAdStopped,AdUserAcceptInvitation:_event_callbacks.default.onAdUserAcceptInvitation,AdUserClose:_event_callbacks.default.onAdUserClose,AdUserMinimize:_event_callbacks.default.onAdUserMinimize,AdVideoComplete:_event_callbacks.default.onAdVideoComplete,AdVideoFirstQuartile:_event_callbacks.default.onAdVideoFirstQuartile,AdVideoMidpoint:_event_callbacks.default.onAdVideoMidpoint,AdVideoStart:_event_callbacks.default.onAdVideoStart,AdVideoThirdQuartile:_event_callbacks.default.onAdVideoThirdQuartile,AdVolumeChange:_event_callbacks.default.onAdVolumeChange},self.adUnit={lastVolume:""},self.config.creativeData={},self.config.environmentVars={},self.config.viewMode="normal",self.config.desiredBitrate=-1,self.config.environmentVars.slot=slot,self.config.environmentVars.videoSlot=player,self.config.environmentVars.autoPlay=!1,self.config.environmentVars.videoSlotCanAutoPlay=!0,self},initializeVPAID:function(campaignId){bouncex.video.log(campaignId,"init VPAID","vpaid");var player=bouncex.document[0].getElementById("bx-video-player-"+campaignId),playerWrapper=bouncex.document[0].getElementById("bx-video-wrapper-"+campaignId),self=Init.buildEnvironment(campaignId,bouncex.campaigns[campaignId].video.vpaid,player,playerWrapper),ad=self.ad,progressComponent=document.getElementById("bx-video-progress-wrapper-"+campaignId);for(var eventName in progressComponent&&progressComponent.parentNode.removeChild(progressComponent),self.callbacks)ad.unsubscribe(self.callbacks[eventName],eventName),ad.subscribe(self.callbacks[eventName],eventName,self);self.vastConfig.vpaidAdParams&&(self.config.creativeData={AdParameters:self.vastConfig.vpaidAdParams}),(0,_helpers.validateAd)(ad)||bouncex.video.log(campaignId,"_validateVPAID Error: VPAID interface check failed","error"),(0,_helpers.adjustCreative)(campaignId),ad.initAd(self.vastConfig.vpaidWidth,self.vastConfig.vpaidHeight,self.config.viewMode,self.config.desiredBitrate,self.config.creativeData,self.config.environmentVars)}},_default=Init;exports.default=_default},3125:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={Moat:{dispatch:function(campaignId,type,adVolume){bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent({type,adVolume},campaignId)}}};exports.default=_default},4026:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _constants=_interopRequireDefault(__webpack_require__(4460));function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Tracking={fireTrackingRequests:function(campaignId,event,storedURLs){var campaign=bouncex.campaigns[campaignId],trigger=campaign.trigger,calledTrackingEvents=campaign.video.uniqueEventPixels||[],ad=campaign.video.vpaid.ad,urls=Tracking.normalizeURLs(storedURLs);if(null!==urls&&!bouncex.video.disableTrackingEvents){urls=(urls=Tracking.filterURLs(urls)).map((function(url){return url.replace(_constants.default.wkndTriggerPlaceholder,trigger)}));var _step,_iterator=_createForOfIteratorHelper(urls);try{for(_iterator.s();!(_step=_iterator.n()).done;){var url=_step.value;if(!calledTrackingEvents.includes(url)){calledTrackingEvents.push(url);var urlToRequest=url;"true"!==ad.allowCacheBusting&&!0!==ad.allowCacheBusting||(url.indexOf("?")>-1?urlToRequest+="&rnd="+Math.random():urlToRequest+="?rnd="+Math.random()),bouncex.video.log(campaignId,"firing event pixel "+urlToRequest+" for "+event,"eventpixel"),document.createElement("img").src=urlToRequest}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},normalizeURLs:function(storedURLs){return storedURLs&&0!==storedURLs.length?"string"==typeof storedURLs?[storedURLs]:storedURLs:null},filterURLs:function(storedURLs){return storedURLs.filter((function(url){return!(null===url||url.length<1||-1===url.indexOf("http"))}))}},_default=Tracking;exports.default=_default},2358:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={adLoaded:function(campaignId,vpaidAd){bouncex.campaigns[campaignId].video.status.ready=!0,bouncex.video.playerReady(campaignId)},adStarted:function(campaignId){if(bouncex.campaigns[campaignId].video.videoResponseLoaded){var type=bouncex.campaigns[campaignId].video.triggerType;bouncex.show_ad(type,campaignId)}}};exports.default=_default},3513:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _eventHelpers=__webpack_require__(9046),_domHelpers=__webpack_require__(7874),_dataCapture=_interopRequireDefault(__webpack_require__(1164)),_logger=_interopRequireDefault(__webpack_require__(5754)),AffiliateOnsite={_affiliateLinkClicked:!1,_affiliateLinksFoundBySelector:{},_pageChangeListenerAdded:!1,_articleData:null,registerAffiliateOnsite:function(selectorData){var _selectorData$affilia;AffiliateOnsite._affiliateLinkClicked=!1,AffiliateOnsite._affiliateLinksFoundBySelector={},AffiliateOnsite._articleData=null,null!=selectorData&&null!==(_selectorData$affilia=selectorData.affiliateLinkSelectors)&&void 0!==_selectorData$affilia&&_selectorData$affilia.length&&("string"==typeof selectorData.affiliateLinkSelectors&&(selectorData.affiliateLinkSelectors=[selectorData.affiliateLinkSelectors]),selectorData.affiliateLinkSelectors.forEach((function(linkSelector){if("string"==typeof linkSelector){var affiliateLinks=document.querySelectorAll(linkSelector);if(AffiliateOnsite._affiliateLinksFoundBySelector[linkSelector]=affiliateLinks.length,AffiliateOnsite._affiliateLinksFoundBySelector[linkSelector])AffiliateOnsite._addClickListenersToAffiliateLinks(affiliateLinks),AffiliateOnsite._addPageChangeListener(),AffiliateOnsite._articleData=AffiliateOnsite.getArticleData(selectorData);else{(0,_domHelpers.waitForNodesInserted)(linkSelector,(function(event,insertNodeHandlerRef){document.removeEventListener("animationstart",insertNodeHandlerRef);var insertedAffiliateLinks=document.querySelectorAll(linkSelector);AffiliateOnsite._affiliateLinksFoundBySelector[linkSelector]=insertedAffiliateLinks.length,AffiliateOnsite._addClickListenersToAffiliateLinks(insertedAffiliateLinks),AffiliateOnsite._addPageChangeListener(),AffiliateOnsite._articleData=AffiliateOnsite.getArticleData(selectorData)}))}}})))},_addPageChangeListener:function(){var _bouncex,_bouncex$website;if(!AffiliateOnsite._pageChangeListenerAdded){var pageChangeEventHandler=function(){Object.values(AffiliateOnsite._affiliateLinksFoundBySelector).some((function(n){return n>0}))&&(AffiliateOnsite._affiliateLinkClicked||AffiliateOnsite._articleData&&AffiliateOnsite.pushArticle(AffiliateOnsite._articleData))};null!==(_bouncex=bouncex)&&void 0!==_bouncex&&null!==(_bouncex$website=_bouncex.website)&&void 0!==_bouncex$website&&_bouncex$website.spa&&bouncex.shouldCheckSpa()?window.addEventListener("spaPageChangeEvent.bx",pageChangeEventHandler):(0,_eventHelpers.addEndPageViewEventListener)(pageChangeEventHandler),AffiliateOnsite._pageChangeListenerAdded=!0}},_addClickListenersToAffiliateLinks:function(affiliateLinks){affiliateLinks.forEach((function(link){link.addEventListener("click",(function(event){AffiliateOnsite._affiliateLinkClicked=!0,AffiliateOnsite.clearArticles()}))}))},getArticleData:function(selectorData){var article=_dataCapture.default.captureArticle();if(null!=selectorData&&selectorData.titleSelector){var titleElement=document.querySelector(selectorData.titleSelector);null!=titleElement&&titleElement.textContent&&(article.title=titleElement.textContent)}if(null!=selectorData&&selectorData.imageSelector){var imageElement=document.querySelector(selectorData.imageSelector);null!=imageElement&&imageElement.src&&(article.image=imageElement.src)}return article.url||(article.url=window.location.href),article},getAllArticles:function(){var storageKey=AffiliateOnsite.getStorageKey(),articles=window.sessionStorage.getItem(storageKey);return bouncex.parseJSON(articles,[])},setArticles:function(articles){if(Array.isArray(articles)){var validArticles=articles.filter((function(a){return"article"===(null==a?void 0:a["@type"])}));validArticles.forEach((function(a){var _a$image;if((null==a||null===(_a$image=a.image)||void 0===_a$image?void 0:_a$image.indexOf("//"))>=0){var imageParts=a.image.split(/\/\/([\s\S]*)/);a.image=imageParts[1]?imageParts[1]:null}}));var storageKey=AffiliateOnsite.getStorageKey();try{window.sessionStorage.setItem(storageKey,JSON.stringify(validArticles))}catch(e){_logger.default.error(e)}}},pushArticle:function(article){if("article"===(null==article?void 0:article["@type"])){var articles=AffiliateOnsite.getAllArticles();articles.push(article),AffiliateOnsite.setArticles(articles)}},clearArticles:function(){AffiliateOnsite.setArticles([])},getStorageKey:function(){return"wkndAffiliateArticles"+bouncex.website.id},getLatestArticle:function(){var articles=AffiliateOnsite.getAllArticles();return articles.length?articles[articles.length-1]:{}},hasArticlesStored:function(){return!!AffiliateOnsite.getAllArticles().length}},_default=AffiliateOnsite;exports.default=_default},1200:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(4687)),_defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_slicedToArray2=_interopRequireDefault(__webpack_require__(7424)),_toConsumableArray2=_interopRequireDefault(__webpack_require__(861)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(7156)),_helpers=__webpack_require__(2481),_logger=_interopRequireDefault(__webpack_require__(5754)),_userRegistration=_interopRequireDefault(__webpack_require__(189)),_pageCounter=_interopRequireDefault(__webpack_require__(7989)),cpIntegrations=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(6127));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var _getProfileProps,_getProfileSegments,_init,loggerWarn=function(message){_logger.default.warn({group:"customer registration",message})},integrationsReadingSegments=[],CustomerRegistration={init:(_init=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(){var _bouncex2,_bouncex2$website,_bouncex$website$crs,pageCount,promiseData,profileSegments,profileProps,integrationNames,updateUserInfoCalls;return _regenerator.default.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_bouncex=void 0,_bouncex$website=void 0,(0,_helpers.hasFeatureFlag)("CUSTOMER_REGISTRATION_ENABLED")?null!==(_bouncex=bouncex)&&void 0!==_bouncex&&null!==(_bouncex$website=_bouncex.website)&&void 0!==_bouncex$website&&_bouncex$website.crs||(loggerWarn('Failed to init, configuration "bouncex.website.crs" not found.'),0):(loggerWarn("Failed to init, CUSTOMER_REGISTRATION_ENABLED feature flag not found."),0)){_context.next=2;break}return _context.abrupt("return");case 2:if(_bouncex$website$crs=null===(_bouncex2=bouncex)||void 0===_bouncex2||null===(_bouncex2$website=_bouncex2.website)||void 0===_bouncex2$website?void 0:_bouncex2$website.crs,pageCount=_bouncex$website$crs.pageCount,_pageCounter.default.init({interval:null==pageCount?void 0:pageCount.interval,pageTypesToCount:null==pageCount?void 0:pageCount.pageTypes}),bouncex.website.crs.integrations){_context.next=7;break}return loggerWarn('"bouncex.website.crs.integrations" to read FE props not found.'),_context.abrupt("return");case 7:return _context.prev=7,_context.next=10,Promise.allSettled([CustomerRegistration.getProfileSegments(),CustomerRegistration.getProfileProps()]);case 10:promiseData=_context.sent,_context.next=17;break;case 13:return _context.prev=13,_context.t0=_context.catch(7),loggerWarn("Failed to read props or segments ".concat(JSON.stringify(_context.t0))),_context.abrupt("return");case 17:return profileSegments="fulfilled"===promiseData[0].status?promiseData[0].value:{},profileProps="fulfilled"===promiseData[1].status?promiseData[1].value:{},bouncex.updateBounceCookie((function(cookie){cookie.cr={l:!!profileProps.login,r:!!profileProps.registration,p:!!profileProps.paidSubs,ly:!!profileProps.loyalty},cookie.sg=profileSegments})),bouncex.reload_campaigns(),integrationNames=CustomerRegistration.getIntegrationNames(),updateUserInfoCalls=integrationNames.filter((function(vendorName){var _cpIntegrations$vendo;return null==cpIntegrations||null===(_cpIntegrations$vendo=cpIntegrations[vendorName])||void 0===_cpIntegrations$vendo?void 0:_cpIntegrations$vendo.shouldSendUpdates})).map((function(vendorName){return _userRegistration.default.updateUserInfo(vendorName,profileProps)})),_context.prev=23,_context.next=26,Promise.allSettled(updateUserInfoCalls);case 26:_context.next=31;break;case 28:_context.prev=28,_context.t1=_context.catch(23),loggerWarn("Failed to update user status");case 31:case"end":return _context.stop()}var _bouncex,_bouncex$website}),_callee,null,[[7,13],[23,28]])}))),function(){return _init.apply(this,arguments)}),getProfileSegments:(_getProfileSegments=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee2(){var getProfileSegmentsCalls,foundProfileSegments;return _regenerator.default.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return getProfileSegmentsCalls=CustomerRegistration.getProfileSegmentsByIntegration(),_context2.prev=1,_context2.next=4,Promise.allSettled(getProfileSegmentsCalls);case 4:return foundProfileSegments=_context2.sent,_context2.abrupt("return",CustomerRegistration.parseFoundProfileSegments(foundProfileSegments));case 8:_context2.prev=8,_context2.t0=_context2.catch(1),loggerWarn("Failed to read the profile segments ".concat(JSON.stringify(_context2.t0)));case 11:case"end":return _context2.stop()}}),_callee2,null,[[1,8]])}))),function(){return _getProfileSegments.apply(this,arguments)}),getProfileSegmentsByIntegration:function(){var _integrationsReadingS,integrationsWithSegments=CustomerRegistration.getIntegrationNames().filter((function(integrationName){var _cpIntegrations$integ;return!(null==cpIntegrations||null===(_cpIntegrations$integ=cpIntegrations[integrationName])||void 0===_cpIntegrations$integ||!_cpIntegrations$integ.getProfileSegments)})),getProfileSegmentsCalls=integrationsWithSegments.map((function(integrationName){return cpIntegrations[integrationName].getProfileSegments()}));return(_integrationsReadingS=integrationsReadingSegments).push.apply(_integrationsReadingS,(0,_toConsumableArray2.default)(integrationsWithSegments)),getProfileSegmentsCalls},getIntegrationNames:function(){var integrationNames=Object.values(bouncex.website.crs.integrations).map((function(v){return v.int}));return(0,_toConsumableArray2.default)(new Set(integrationNames))},parseFoundProfileSegments:function(foundProfileSegments){var profileSegmentsByIntegration={};return integrationsReadingSegments.forEach((function(integrationName,index){"fulfilled"===foundProfileSegments[index].status&&(profileSegmentsByIntegration[integrationName]=foundProfileSegments[index].value)})),integrationsReadingSegments=[],profileSegmentsByIntegration},getProfileProps:(_getProfileProps=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee3(){var getProfilePropsCalls,foundProfileProps;return _regenerator.default.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return getProfilePropsCalls=CustomerRegistration.getProfilePropsByIntegration(),_context3.prev=1,_context3.next=4,Promise.allSettled(getProfilePropsCalls);case 4:return foundProfileProps=_context3.sent,_context3.abrupt("return",CustomerRegistration.parseFoundProfileProps(foundProfileProps));case 8:_context3.prev=8,_context3.t0=_context3.catch(1),loggerWarn("Failed to read the profile props ".concat(JSON.stringify(_context3.t0)));case 11:case"end":return _context3.stop()}}),_callee3,null,[[1,8]])}))),function(){return _getProfileProps.apply(this,arguments)}),getProfilePropsByIntegration:function(){var propNamesByIntegration=CustomerRegistration.getPropNamesByIntegration(bouncex.website.crs.integrations),getProfilePropsCalls=[];return Object.entries(propNamesByIntegration).forEach((function(_ref){var _cpIntegrations$integ2,_ref2=(0,_slicedToArray2.default)(_ref,2),integrationName=_ref2[0],propNames=_ref2[1];null!=cpIntegrations&&null!==(_cpIntegrations$integ2=cpIntegrations[integrationName])&&void 0!==_cpIntegrations$integ2&&_cpIntegrations$integ2.getProfileProps&&getProfilePropsCalls.push(cpIntegrations[integrationName].getProfileProps(propNames,!0,"".concat(integrationName,"-")))})),getProfilePropsCalls},parseFoundProfileProps:function(profileProps){var retrievedProfileProps=profileProps.reduce((function(a,v){return"fulfilled"===v.status&&a.push(v.value),a}),[]);return CustomerRegistration.buildStandardProfileProps(retrievedProfileProps)},buildStandardProfileProps:function(retrievedProfileProps){var integrations=bouncex.website.crs.integrations,profileProps={},allProfileProps=retrievedProfileProps.reduce((function(a,v){return _objectSpread(_objectSpread({},a),v)}),{});return Object.entries(allProfileProps).forEach((function(_ref3){var _ref4=(0,_slicedToArray2.default)(_ref3,2),key=_ref4[0],value=_ref4[1];key.indexOf("-profileId")>-1&&(profileProps[key]=value)})),Object.entries(integrations).forEach((function(_ref5){var _allProfileProps$pref,_ref6=(0,_slicedToArray2.default)(_ref5,2),propName=_ref6[0],propConfig=_ref6[1],prefixedPropName="".concat(propConfig.int,"-").concat(propConfig.prop);void 0!==allProfileProps[prefixedPropName]&&("email"===propName&&bouncex.utils.validate.email(allProfileProps[prefixedPropName])&&(profileProps.email=allProfileProps[prefixedPropName]),"email"!==propName&&(profileProps[propName]=!((null===(_allProfileProps$pref=allProfileProps[prefixedPropName])||void 0===_allProfileProps$pref?void 0:_allProfileProps$pref.toString())!==propConfig.val)))})),profileProps},getPropNamesByIntegration:function(integrationSettings){var propNamesByIntegration={};return Object.values(integrationSettings).forEach((function(v){propNamesByIntegration[v.int]||(propNamesByIntegration[v.int]=[]),propNamesByIntegration[v.int].push(v.prop)})),propNamesByIntegration}},_default=CustomerRegistration;exports.default=_default},2437:(__unused_webpack_module,exports)=>{function Article(){this["@type"]="article",this.type=null,this.title=null,this.url=null,this.image=null,this.pubdate=null,this.description=null,this.author=null,this.keywords=null,this.section=null,this.breadcrumbs=null,this.wordCount=null,this.language=null,this.lastmod=null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Article,Article.prototype.properties=["type","title","url","image","pubdate","lastmod","description","author","keywords","section","breadcrumbs","wordCount","language"]},9491:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var getField=function getField(fieldName){var element=document.querySelector('head meta[name="'.concat(fieldName,'"]'));if(element)return element.getAttribute("content");switch(fieldName){case"language":return document.documentElement.getAttribute("lang");case"pubdate":return getField("dateCreated");case"lastmod":return getField("dateModified")}return null},_default={populate:function(data){data.properties.forEach((function(property){data[property]=data[property]||getField(property)})),"string"==typeof data.keywords&&(data.keywords=data.keywords.split(","))}};exports.default=_default},1023:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _opengraph=_interopRequireDefault(__webpack_require__(9576)),_generalMetadata=_interopRequireDefault(__webpack_require__(9491)),_default={JSONLD:_interopRequireDefault(__webpack_require__(6358)).default,OpenGraph:_opengraph.default,GeneralMetadata:_generalMetadata.default};exports.default=_default},6358:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var JSONLD={populate:function(data){var entities=document.querySelectorAll('head script[type="application/ld+json"]'),completeGraph=[];entities.forEach((function(entity){var entityData=JSON.parse(entity.innerHTML),graph=entityData["@graph"];graph&&Array.isArray(graph)?graph.forEach((function(item){completeGraph.push(item)})):entityData&&Array.isArray(entityData)?entityData.forEach((function(item){completeGraph.push(item)})):entityData&&completeGraph.push(entityData)})),completeGraph.forEach((function(item){populateFromEntity(data,item)}))}},populateFromEntity=function(data,entityData){var entityType=entityData["@type"],dataType=data["@type"];if(entityType&&(entityType=entityType.charAt(0).toLowerCase()+entityType.slice(1),"article"===dataType))return"function"==typeof ArticleParser[entityType]?ArticleParser[entityType](data,entityData):void 0},ArticleParser={breadcrumbList:function(data,entityData){if(Array.isArray(entityData.itemListElement)){var breadcrumbs=[];entityData.itemListElement.forEach((function(itemElement){var item=itemElement.item;item&&item.name&&breadcrumbs.push(item.name)})),data.breadcrumbs=data.breadcrumbs||breadcrumbs}},imageObject:function(data,entityData){entityData.url&&(data.image=data.image||entityData.url)},webPage:function(data,entityData){if(data.title=data.title||entityData.headline||entityData.name,data.description=data.description||entityData.description,data.pubdate=data.pubdate||entityData.datePublished,data.lastmod=data.lastmod||entityData.dateModified,data.wordCount=data.wordCount||entityData.wordCount,data.section=data.section||entityData.articleSection,entityData.keywords&&Array.isArray(entityData.keywords)&&(data.keywords=data.keywords||entityData.keywords),entityData.author&&Array.isArray(entityData.author)){var authors=[];entityData.author.forEach((function(author){author&&author.name&&authors.push(author.name)})),authors.length>0&&(data.author=data.author||authors.join(","))}entityData.image&&"ImageObject"===entityData.image["@type"]&&ArticleParser.imageObject(data,entityData.image)}};ArticleParser.blogPosting=ArticleParser.webPage,ArticleParser.newsArticle=ArticleParser.webPage,ArticleParser.article=ArticleParser.webPage;var _default=JSONLD;exports.default=_default},9576:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var getField=function getField(fieldName){var element=document.querySelector('\n    head meta[name="og:'.concat(fieldName,'"],\n    head meta[property="og:').concat(fieldName,'"],\n    head meta[property="article:').concat(fieldName,'"]\n  '));if(element)return element.getAttribute("content");switch(fieldName){case"lastmod":return getField("modified_time");case"pubdate":return getField("published_time")}return null},_default={populate:function(data){data.properties.forEach((function(property){data[property]=data[property]||getField(property)}))}};exports.default=_default},1164:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _capturers=_interopRequireDefault(__webpack_require__(1023)),_article=_interopRequireDefault(__webpack_require__(2437)),_logger=_interopRequireDefault(__webpack_require__(5754)),_helpers=__webpack_require__(2481),DataCapture={isValidURL:function(source){try{return new URL(source),!0}catch(_unused){return!1}},unsetAuthorIfValidURL:function(article){DataCapture.isValidURL(article.author)&&(article.author=null)},captureArticle:function(){var article=new _article.default;return DataCapture.capture(article),article.language=article.language||"en",article},capture:function(item){Object.values(_capturers.default).forEach((function(capturer){try{capturer.populate(item),DataCapture.unsetAuthorIfValidURL(item)}catch(error){_logger.default.error(error)}})),DataCapture.sanitizeObject(item)},sanitizeObject:function(item){item.properties.forEach((function(property){"string"==typeof item[property]&&(item[property]=item[property].trim()),Array.isArray(item[property])&&(item[property]=item[property].map((function(value){return"string"==typeof value?value.trim():value}))),null!==item[property]&&void 0!==item[property]&&""!==item[property]||delete item[property]}))},convertArticleToProduct:function(article){var product={"item:id":article.url,"item:copy":article.title,"item:url":article.url,"item:imageurl":article.image,"item:instock":!0,"item:type":"article","item:lang":article.language||"en","item:description":article.description};if(bouncex&&bouncex.pubs&&"function"==typeof bouncex.pubs.convertArticleURLToItemID)product["item:id"]=bouncex.pubs.convertArticleURLToItemID(product["item:id"]);else try{var id=new URL(article.url).pathname;id=(id=id.replace(/(\/index)?\.html$/,"")).replace(/^\//,""),product["item:id"]=id}catch(error){bouncex.err(error)}try{var date=new Date(article.pubdate);product["item:date"]=date.toISOString().substring(0,10)}catch(_unused2){product["item:date"]=new Date(Date.now()).toISOString().substring(0,10)}try{var _date=new Date(article.lastmod||article.pubdate);product["item:modify_date"]=_date.toISOString().substring(0,10)}catch(_unused3){product["item:modify_date"]=new Date(Date.now()).toISOString().substring(0,10)}product["item:category"]=article.section,product["item:category"]||Array.isArray(article.breadcrumbs)&&article.breadcrumbs.length>0&&(product["item:category"]=article.breadcrumbs[article.breadcrumbs.length-1]);var allFieldsAreFilledIn=Object.keys(product).reduce((function(previous,current){return previous&&!!product[current]}),!0);return _logger.default.debug({group:"PUBS",message:"Newsletter in a Box",metadata:{allFieldsAreFilledIn,article,product}}),allFieldsAreFilledIn&&(0,_helpers.hasFeatureFlag)("NEWSLETTER_IN_A_BOX")?product:null}},_default=DataCapture;exports.default=_default},2233:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _eventStream=_interopRequireDefault(__webpack_require__(7686)),_affiliateOnsite=_interopRequireDefault(__webpack_require__(3513)),_customerRegistration=_interopRequireDefault(__webpack_require__(1200)),_dataCapture=_interopRequireDefault(__webpack_require__(1164)),_default={init:function(){var article=_dataCapture.default.captureArticle();if(article&&"article"===article.type){var _articleData$article,articleData={};if(Object.keys(article).forEach((function(key){["type","@type"].includes(key)||(articleData["article:".concat(key)]=article[key])})),articleData["article:keywords"]=JSON.stringify(null!==(_articleData$article=articleData["article:keywords"])&&void 0!==_articleData$article?_articleData$article:[]),_eventStream.default.report("article_view",articleData),bouncex.website.gbi_enabled||bouncex.website.gbi2Enabled){var product=_dataCapture.default.convertArticleToProduct(article);product&&0===product["item:lang"].indexOf("en")&&(_eventStream.default.report("item",product),_eventStream.default.report("view item",{"item:id":product["item:id"]}))}}_customerRegistration.default.init()},affiliateOnsite:_affiliateOnsite.default};exports.default=_default},7989:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_logger=_interopRequireDefault(__webpack_require__(5754)),getInitPageCounterData=function(interval,intervalUnit,intervalStart){return{count:0,expiration:PageCounter.getIntervalEndDate(interval,intervalUnit,intervalStart),pagesVisited:{}}},isIntervalExpired=function(expirationTimestamp){var expirationDate=new Date(expirationTimestamp);return new Date>expirationDate},loggerWarn=function(message){_logger.default.warn({group:loggerGroup,message})},loggerGroup="page counter",PageCounter={init:function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$interval=_ref.interval,interval=void 0===_ref$interval?0:_ref$interval,_ref$intervalUnit=_ref.intervalUnit,intervalUnit=void 0===_ref$intervalUnit?"days":_ref$intervalUnit,_ref$intervalStart=_ref.intervalStart,intervalStart=void 0===_ref$intervalStart?"":_ref$intervalStart,_ref$pageTypesToCount=_ref.pageTypesToCount,pageTypesToCount=void 0===_ref$pageTypesToCount?[]:_ref$pageTypesToCount,_ref$countEachVisit=_ref.countEachVisit,countEachVisit=void 0!==_ref$countEachVisit&&_ref$countEachVisit,parsedInterval=Number(interval);if(!PageCounter.canInit(parsedInterval,intervalUnit))return!1;if(-1===pageTypesToCount.indexOf(bouncex.website.pts))return _logger.default.info({group:loggerGroup,message:'Curent page type: "'.concat(bouncex.website.pts,'" should not be counted.')}),!1;var bxPageCounter=PageCounter.getFromCookie()||getInitPageCounterData(parsedInterval,intervalUnit,intervalStart),pageId=window.location.pathname,hasVistedCurrentPage=bxPageCounter.pagesVisited[pageId];return!(!countEachVisit&&hasVistedCurrentPage)&&(isIntervalExpired(bxPageCounter.expiration)&&(bxPageCounter=getInitPageCounterData(parsedInterval,intervalUnit,intervalStart)),PageCounter.updateCount(bxPageCounter,pageId),bouncex.updateBounceCookie((function(cookie){cookie.pc={c:bxPageCounter.count,e:bxPageCounter.expiration,p:bxPageCounter.pagesVisited}})),!0)},hasValidDataFromCookie:function(pcCookieData){if(!pcCookieData)return loggerWarn("Cookie data not found."),!1;var c=pcCookieData.c,e=pcCookieData.e,p=pcCookieData.p;return void 0===c||void 0===e||void 0===p?(loggerWarn("Missing data in cookie."),!1):"number"!=typeof c||c<0?(loggerWarn("Counter in cookie is not numeric or less than 0."),!1):"number"!=typeof e||pcCookieData.e<0?(loggerWarn("Expiration in cookie is not numeric or less than 0."),!1):"object"===(0,_typeof2.default)(pcCookieData.p)||(loggerWarn("Pages visited in cookie is not an object."),!1)},getFromCookie:function(){var _bouncex$getBounceCoo,_bouncex,_bouncex$getBounceCoo2,pcCookieData=null===(_bouncex$getBounceCoo=(_bouncex=bouncex).getBounceCookie)||void 0===_bouncex$getBounceCoo||null===(_bouncex$getBounceCoo2=_bouncex$getBounceCoo.call(_bouncex))||void 0===_bouncex$getBounceCoo2?void 0:_bouncex$getBounceCoo2.pc;return PageCounter.hasValidDataFromCookie(pcCookieData)?{count:pcCookieData.c,expiration:pcCookieData.e,pagesVisited:pcCookieData.p}:null},updateCount:function(bxPageCounter,pageId){bxPageCounter.pagesVisited[pageId]?bxPageCounter.pagesVisited[pageId]++:bxPageCounter.pagesVisited[pageId]=1,bxPageCounter.count++},canInit:function(interval,intervalUnit){return bouncex.website.pt&&Object.keys(bouncex.website.pt).length?isNaN(interval)?(loggerWarn('Failed to init, "interval" is not a number.'),!1):interval<0?(loggerWarn('Failed to init, "interval" can not be negative.'),!1):-1!==["hours","days","months","years"].indexOf(intervalUnit)||(loggerWarn('Failed to init, "'.concat(intervalUnit,'" is not a supported intervalUnit.')),!1):(loggerWarn("Failed to init, PageTypes not found."),!1)},getIntervalStartDate:function(intervalStart){var now=new Date;return"start of month"===intervalStart?new Date(now.getFullYear(),now.getMonth(),1):"start of year"===intervalStart?new Date(now.getFullYear(),0,1):now},getIntervalEndDate:function(interval,intervalUnit,intervalStart){var parsedInterval=Number(interval),startDate=PageCounter.getIntervalStartDate(intervalStart),endYear="years"===intervalUnit?startDate.getFullYear()+parsedInterval:startDate.getFullYear(),endMonth="months"===intervalUnit?startDate.getMonth()+parsedInterval:startDate.getMonth(),endDay="days"===intervalUnit?startDate.getDate()+parsedInterval:startDate.getDate(),endHour="hours"===intervalUnit?startDate.getHours()+parsedInterval:startDate.getHours(),endMinute="hours"===intervalUnit?startDate.getMinutes():0;return new Date(endYear,endMonth,endDay,endHour,endMinute).getTime()}},_default=PageCounter;exports.default=_default},134:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ajax=_interopRequireDefault(__webpack_require__(9974)),_logger=_interopRequireDefault(__webpack_require__(5754)),_default={_articles:[],_constants:{selectors:{group:".bx-group-custom",image:".bx-row-line",headline:".bx-row-text-subheadline"}},_getArticles:function(){return this._articles},_getRequestOptions:function(){var self=this;return{url:self._settings.feedUrl,dataType:self._settings.feedFormat,complete:function(response,status){self._handleResponse(response,status)}}},_getStorageKey:function(){return"bx-recirc-"+bouncex.website.id},_getStoredArticles:function(){var key=this._getStorageKey(),results=window.sessionStorage.getItem(key);return bouncex.parseJSON(results,[])},_getValidArticles:function(articles){for(var validArticles=[],i=0;i<articles.length;i++)this._isValidArticle(articles[i])&&validArticles.push(articles[i]);return validArticles},_getValidGroups:function(creative){for(var groups=creative.querySelectorAll(this._constants.selectors.group),validGroups=[],i=0;i<groups.length;i++)this._isValidGroup(groups[i])&&validGroups.push(groups[i]);return validGroups},_handleResponse:function(response,status){if("error"===status)return this.error(null,"error response from article feed");this.log(null,"parsing feed response");var articles=this._parseArticles(response);if(!articles)return this.error(null,"no articles found while parsing feed response");var validArticles=this._getValidArticles(articles);if(!validArticles.length)return this.error(null,"all articles failed validation");this.log(null,validArticles.length+"/"+articles.length+" articles passed validation"),this._setArticles(validArticles),this._storeArticles(validArticles)},_isValidGroup:function(group){var hasImageElement=1===group.querySelectorAll(this._constants.selectors.image).length,hasTextElement=1===group.querySelectorAll(this._constants.selectors.headline).length,hasLink=1===group.querySelectorAll("a").length;return hasImageElement&&hasTextElement&&hasLink},_requestFeed:function(ajaxOptions){this.log(null,"requesting articles from "+ajaxOptions.url),_ajax.default.request(ajaxOptions)},_setArticles:function(articles){this._articles=articles},_storeArticles:function(articles){this.log(null,"storing articles in session storage");var key=this._getStorageKey();try{window.sessionStorage.setItem(key,JSON.stringify(articles))}catch(e){this.error(null,e)}},_isValidArticle:function(article){if(!article)return!1;var validLink=!(!article.link||!bouncex.utils.validate.url(article.link)),validImage=!(!article.image||!bouncex.utils.validate.url(article.image)),validHeadline=!!article.headline;return validLink&&validImage&&validHeadline},_parseArticles:function(response){switch(this._settings.feedFormat){case"xml":return this._settings.responseParser(response.responseXML);case"json":return this._settings.responseParser(response.responseJSON);default:return this.error(null,"unrecognized feed format type"),!1}},_populateGroup:function(campaignId,group,article){try{var imageEl=group.querySelectorAll(this._constants.selectors.image)[0].firstChild,headlineEl=group.querySelectorAll(this._constants.selectors.headline)[0].firstChild,anchorEl=group.querySelector("a");imageEl.style.backgroundImage="url("+article.image+")",imageEl.style.backgroundSize="cover",headlineEl.textContent=article.headline,anchorEl.setAttribute("href",article.link)}catch(e){this.error(campaignId,e)}},_settings:{},_validateSettings:function(){return!!(this._settings.feedFormat&&this._settings.feedUrl&&this._settings.responseParser&&"function"==typeof this._settings.responseParser)},addSettings:function(settings){for(var s in settings)bouncex.recirc._settings[s]=settings[s]},articlesAvailable:function(){return this._articles.length>0},error:function(campaignId,message){this.log(campaignId,message,!0)},init:function(){if(this.isEnabled()&&!this.articlesAvailable()){if(!this._validateSettings())return this.log(null,"settings failed validation");var storedArticles=this._getStoredArticles();storedArticles&&storedArticles.length?(this.log(null,"retrieving articles from session storage"),this._setArticles(storedArticles)):(this.log(null,"no articles found in storage; requesting from feed"),this._requestFeed(this._getRequestOptions()))}},isEnabled:function(){return!!this._settings.enabled},log:function(campaignId,message,isError){var data={group:"recirc",campaignId,message};isError?_logger.default.error(data):_logger.default.info(data)},populateCreative:function(campaignId){if(!this.isEnabled())return!1;if(!this.articlesAvailable())return!1;var creative=document.getElementById("bx-campaign-"+campaignId);if(!creative)return this.error(campaignId,"no creative found");var validGroups=this._getValidGroups(creative),articles=this._getArticles();if(validGroups.length&&validGroups.length<=articles.length){this.log(campaignId,"populating article groups");for(var i=0;i<validGroups.length;i++)this._populateGroup(campaignId,validGroups[i],articles[i])}else validGroups.length&&this.log(campaignId,"not enough articles to populate creative")}};exports.default=_default},4675:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(5754)),clientHints={setHighEntropyValues:function(){var _navigator;if(null===(_navigator=navigator)||void 0===_navigator||!_navigator.userAgentData)return _logger.default.info({message:"Client Hints (i.e. userAgentData) not supported",group:"clientHints"}),!1;navigator.userAgentData.getHighEntropyValues(["architecture","bitness","model","fullVersionList","platformVersion"]).then((function(clientHintsUA){clientHints.setDeviceSua(clientHintsUA)})).catch((function(err){_logger.default.error({message:"Error retrieving client hints ".concat(err),group:"Ads init"})}))},setDeviceSua:function(clientHintsUA){var browsers=clientHintsUA.fullVersionList.map((function(obj){return{brand:obj.brand,version:obj.version.split(".")}})),platform={brand:clientHintsUA.platform,version:clientHintsUA.platformVersion.split(".")};bouncex.state.deviceSua={browsers,platform,mobile:clientHintsUA.mobile?1:0,architecture:clientHintsUA.architecture,bitness:clientHintsUA.bitness,model:clientHintsUA.model,source:2}}},_default=clientHints;exports.default=_default},1522:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _getProfileSegments,_getProfileProps,_regenerator=_interopRequireDefault(__webpack_require__(4687)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(7156)),_logger=_interopRequireDefault(__webpack_require__(5754)),Blueconic={shouldSendUpdates:!0,isLoaded:function(){return new Promise((function(resolve){void 0!==window.blueConicClient&&void 0!==window.blueConicClient.event&&void 0!==window.blueConicClient.event.subscribe?resolve(!0):window.addEventListener("onBlueConicLoaded",(function(){resolve(!0)}),!1)}))},getProfileProps:(_getProfileProps=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(){var propNames,includeProfileId,propNamePrefix,profileProps,profile,_args=arguments;return _regenerator.default.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return propNames=_args.length>0&&void 0!==_args[0]?_args[0]:[],includeProfileId=_args.length>1&&void 0!==_args[1]&&_args[1],propNamePrefix=_args.length>2&&void 0!==_args[2]?_args[2]:"",profileProps={},_context.prev=4,_context.next=7,Blueconic.isLoaded();case 7:if(!(profile=window.blueConicClient.profile.getProfile())){_context.next=13;break}if(includeProfileId&&(profileProps["".concat(propNamePrefix,"profileId")]=profile.getId()),Array.isArray(propNames)){_context.next=12;break}return _context.abrupt("return",profileProps);case 12:propNames.forEach((function(propName){profileProps["".concat(propNamePrefix).concat(propName)]=profile.getValue(propName)}));case 13:_context.next=18;break;case 15:_context.prev=15,_context.t0=_context.catch(4),_logger.default.error({group:"blueconic",message:"Failed to read blueconic profile props",metadata:{error:"".concat(_context.t0)}});case 18:return _context.abrupt("return",profileProps);case 19:case"end":return _context.stop()}}),_callee,null,[[4,15]])}))),function(){return _getProfileProps.apply(this,arguments)}),getProfileSegments:(_getProfileSegments=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee2(){var segments;return _regenerator.default.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return segments=[],_context2.prev=1,_context2.next=4,Blueconic.isLoaded();case 4:window.blueConicClient.getSegments().forEach((function(s){null!=s&&s.name&&segments.push(s.name)})),_context2.next=11;break;case 8:_context2.prev=8,_context2.t0=_context2.catch(1),_logger.default.warn({group:"blueconic",message:"Failed to read blueconic profile segments",metadata:{error:"".concat(_context2.t0)}});case 11:return _context2.abrupt("return",segments);case 12:case"end":return _context2.stop()}}),_callee2,null,[[1,8]])}))),function(){return _getProfileSegments.apply(this,arguments)})},_default=Blueconic;exports.default=_default},6127:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"blueconic",{enumerable:!0,get:function(){return _blueconic.default}}),Object.defineProperty(exports,"loyaltyplus",{enumerable:!0,get:function(){return _loyaltyplus.default}});var _blueconic=_interopRequireDefault(__webpack_require__(1522)),_loyaltyplus=_interopRequireDefault(__webpack_require__(6073))},6073:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _getProfileSegments,_getProfileProps,_isLoaded,_regenerator=_interopRequireDefault(__webpack_require__(4687)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(7156)),_logger=_interopRequireDefault(__webpack_require__(5754)),_userRegistration=_interopRequireDefault(__webpack_require__(189)),vendorName="loyaltyplus",getProfileId=function(profileProps){var _profileProps$ids,_profileProps$ids$fin,profileId=null;null!=profileProps&&null!==(_profileProps$ids=profileProps.ids)&&void 0!==_profileProps$ids&&_profileProps$ids.length&&(profileId=null===(_profileProps$ids$fin=profileProps.ids.find((function(id){return id.type===vendorName})))||void 0===_profileProps$ids$fin?void 0:_profileProps$ids$fin.id);return profileId},Loyaltyplus={shouldSendUpdates:!1,isLoaded:(_isLoaded=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(){var loyaltyplusCachedData,loyaltyplusId,queryStringParams,response,responseData,data;return _regenerator.default.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(loyaltyplusCachedData=_userRegistration.default.getCachedDataByVendor(vendorName),!Object.keys(loyaltyplusCachedData).length){_context.next=4;break}return _logger.default.info({group:"Loyaltyplus",message:"Profile found in session storage cache, no fetch required."}),_context.abrupt("return",!0);case 4:return loyaltyplusId=window.localStorage.getItem("wknd_ur_lp"),queryStringParams={},loyaltyplusId&&(queryStringParams.loyaltyplus=loyaltyplusId),_context.prev=7,_context.next=10,_userRegistration.default.getUserInfo(vendorName,queryStringParams);case 10:if(200===(response=_context.sent).status){_context.next=15;break}return _userRegistration.default.setCachedDataByVendor(vendorName,{}),_logger.default.warn({group:"Loyaltyplus",message:"Failed to fetch Loyaltyplus data from backend"}),_context.abrupt("return",!1);case 15:return _context.next=17,response.json();case 17:return responseData=_context.sent,data=responseData.data,_userRegistration.default.setCachedDataByVendor(vendorName,data),profileId=void 0,(profileId=getProfileId(data))&&window.localStorage.setItem("wknd_ur_lp",profileId),_context.abrupt("return",!0);case 24:return _context.prev=24,_context.t0=_context.catch(7),_userRegistration.default.setCachedDataByVendor(vendorName,{}),_logger.default.error({group:"Loyaltyplus",message:"Failed to fetch or parse Loyaltyplus data from backend",metadata:{error:null===_context.t0||void 0===_context.t0?void 0:_context.t0.message}}),_context.abrupt("return",!1);case 29:case"end":return _context.stop()}var profileId}),_callee,null,[[7,24]])}))),function(){return _isLoaded.apply(this,arguments)}),getProfileProps:(_getProfileProps=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee2(){var propNames,includeProfileId,propNamePrefix,profileProps,profile,profileId,_args2=arguments;return _regenerator.default.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return propNames=_args2.length>0&&void 0!==_args2[0]?_args2[0]:[],includeProfileId=_args2.length>1&&void 0!==_args2[1]&&_args2[1],propNamePrefix=_args2.length>2&&void 0!==_args2[2]?_args2[2]:"",profileProps={},_context2.prev=4,_context2.next=7,Loyaltyplus.isLoaded();case 7:if(profile=_userRegistration.default.getCachedDataByVendor(vendorName),!Object.keys(profile).length){_context2.next=14;break}if(includeProfileId&&(profileId=getProfileId(profile),profileProps["".concat(propNamePrefix,"profileId")]=profileId),Array.isArray(propNames)){_context2.next=12;break}return _context2.abrupt("return",profileProps);case 12:propNames.forEach((function(propName){profileProps["".concat(propNamePrefix).concat(propName)]=(null==profile?void 0:profile[propName])||null})),profileProps["".concat(propNamePrefix,"profile_found")]=!0;case 14:_context2.next=19;break;case 16:_context2.prev=16,_context2.t0=_context2.catch(4),_logger.default.warn({group:"Loyaltyplus",message:"Failed to read Loyaltyplus profile props",metadata:{error:"".concat(_context2.t0)}});case 19:return _context2.abrupt("return",profileProps);case 20:case"end":return _context2.stop()}}),_callee2,null,[[4,16]])}))),function(){return _getProfileProps.apply(this,arguments)}),getProfileSegments:(_getProfileSegments=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee3(){var segments,profile;return _regenerator.default.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return segments=[],_context3.prev=1,_context3.next=4,Loyaltyplus.isLoaded();case 4:null!=(profile=_userRegistration.default.getCachedDataByVendor(vendorName))&&profile.current_tier&&segments.push(profile.current_tier),_context3.next=11;break;case 8:_context3.prev=8,_context3.t0=_context3.catch(1),_logger.default.warn({group:"Loyaltyplus",message:"Failed to read Loyaltyplus profile segments",metadata:{error:"".concat(_context3.t0)}});case 11:return _context3.abrupt("return",segments);case 12:case"end":return _context3.stop()}}),_callee3,null,[[1,8]])}))),function(){return _getProfileSegments.apply(this,arguments)})},_default=Loyaltyplus;exports.default=_default},5295:(__unused_webpack_module,exports)=>{function firstTwoCharacters(language){return language?language.length<=2?language:language.substring(0,2):""}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDeviceLanguage=function(){return firstTwoCharacters(navigator.language)},exports.getDocumentLanguage=function(){var _document$documentEle;return firstTwoCharacters(null===(_document$documentEle=document.documentElement)||void 0===_document$documentEle?void 0:_document$documentEle.lang)}},189:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(7424)),_defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_url=__webpack_require__(1847),_logger=_interopRequireDefault(__webpack_require__(5754));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var getHeaders=function(){var _bouncex,_bouncex$state,_bouncex2,_bouncex2$cookie;return{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+(null===(_bouncex=bouncex)||void 0===_bouncex||null===(_bouncex$state=_bouncex.state)||void 0===_bouncex$state?void 0:_bouncex$state.request_token),visit_id:null===(_bouncex2=bouncex)||void 0===_bouncex2||null===(_bouncex2$cookie=_bouncex2.cookie)||void 0===_bouncex2$cookie?void 0:_bouncex2$cookie.vid}},getUrl=function(vendor){var baseUrl=UserRegistration.getUserRegistrationBaseUrl();return"".concat(baseUrl,"/v1/registration/").concat(bouncex.website.id,"/").concat(vendor,"/user")},UserRegistration={getUserInfo:function(vendor,queryStringParams){var _bouncex3,_bouncex3$cookie,_bouncex4,_bouncex4$dg,qsObject={},url=getUrl(vendor);queryStringParams&&(qsObject=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},queryStringParams)),null!==(_bouncex3=bouncex)&&void 0!==_bouncex3&&null!==(_bouncex3$cookie=_bouncex3.cookie)&&void 0!==_bouncex3$cookie&&_bouncex3$cookie.did&&(qsObject.bxd_id=bouncex.cookie.did),null!==(_bouncex4=bouncex)&&void 0!==_bouncex4&&null!==(_bouncex4$dg=_bouncex4.dg)&&void 0!==_bouncex4$dg&&_bouncex4$dg.softId&&(qsObject.soft_id=bouncex.dg.softId);var queryString=(0,_url.qs)(qsObject);return queryString&&(url+="?".concat(queryString)),fetch(url,{headers:getHeaders()})},updateUserInfo:function(vendor,profileProps){var payload=UserRegistration.buildUserStatusPayload(vendor,profileProps),url=getUrl(vendor);return fetch(url,{method:"POST",headers:getHeaders(),body:JSON.stringify(payload)})},getCachedDataByVendor:function(vendor){var userRegistrationData=UserRegistration.getCachedData();return(null==userRegistrationData?void 0:userRegistrationData[vendor])||{}},setCachedDataByVendor:function(vendor,data){if(vendor&&"string"==typeof vendor){var userRegistrationData=UserRegistration.getCachedData();userRegistrationData[vendor]=data,UserRegistration.setCachedData(userRegistrationData)}},getCachedData:function(){var userRegistrationData=window.sessionStorage.getItem("wkndUr");return bouncex.parseJSON(userRegistrationData,{})},setCachedData:function(userRegistrationData){try{window.sessionStorage.setItem("wkndUr",JSON.stringify(userRegistrationData))}catch(error){_logger.default.error({group:"user-registration",message:"Failed to save user-registration data to the cache",metadata:error})}},getUserRegistrationBaseUrl:function(){var envMap={development:"dev",qa:"qa",staging:"stg"},env=envMap[bouncex.env]?"".concat(envMap[bouncex.env],"."):"";return"https://user-registration.".concat(env,"wknd.ai")},buildUserStatusPayload:function(vendor,profileProps){var _bouncex5,_bouncex5$cookie,_bouncex6,_bouncex6$dg,integrations=bouncex.website.crs.integrations,propNameMap={login:"logged_in",registration:"registered_with_account",paidSubs:"paid_subscriber"},payload={ids:[]};return null!==(_bouncex5=bouncex)&&void 0!==_bouncex5&&null!==(_bouncex5$cookie=_bouncex5.cookie)&&void 0!==_bouncex5$cookie&&_bouncex5$cookie.did&&payload.ids.push({type:"bxd_id",id:bouncex.cookie.did}),null!==(_bouncex6=bouncex)&&void 0!==_bouncex6&&null!==(_bouncex6$dg=_bouncex6.dg)&&void 0!==_bouncex6$dg&&_bouncex6$dg.softId&&payload.ids.push({type:"soft_id",id:bouncex.dg.softId}),profileProps?(Object.entries(profileProps).forEach((function(_ref){var _ref2=(0,_slicedToArray2.default)(_ref,2),key=_ref2[0],value=_ref2[1];if(key.indexOf("-profileId")>-1){var keyParts=key.split("-profileId");payload.ids.push({type:keyParts[0],id:value})}})),Object.entries(integrations).forEach((function(_ref3){var _ref4=(0,_slicedToArray2.default)(_ref3,2),propName=_ref4[0],propConfig=_ref4[1];"email"===propName&&profileProps[propName]&&payload.ids.push({type:"email",id:profileProps[propName]}),vendor===propConfig.int&&propNameMap[propName]&&(payload[propNameMap[propName]]=profileProps[propName])})),payload):payload}},_default=UserRegistration;exports.default=_default}},__webpack_require__=>{__webpack_require__.O(0,[179],(()=>{return moduleId=7975,__webpack_require__(__webpack_require__.s=moduleId);var moduleId}));__webpack_require__.O()}]);